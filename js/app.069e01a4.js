(function(t){function e(e){for(var s,o,r=e[0],l=e[1],c=e[2],d=0,u=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);m&&m(e);while(u.length)u.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},n={1:0},i=[];function o(t){return r.p+"js/"+({}[t]||t)+"."+{2:"1d425613",3:"e76dde3a",4:"16b89061"}[t]+".js"}function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var s=new Promise((function(e,s){a=n[t]=[e,s]}));e.push(a[2]=s);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=o(t);var c=new Error;i=function(e){l.onerror=l.onload=null,clearTimeout(d);var a=n[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",c.name="ChunkLoadError",c.type=s,c.request=i,a[1](c)}n[t]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var m=c;i.push([0,0]),a()})({0:function(t,e,a){t.exports=a("2f39")},"0f09":function(t,e,a){"use strict";a("173b")},1251:function(t,e,a){"use strict";a("c73b")},1397:function(t,e,a){},1427:function(t,e,a){"use strict";a("d6b4")},"166d":function(t,e,a){t.exports=a.p+"img/addons.92e62601.png"},"173b":function(t,e,a){},"1c67":function(t,e,a){},"1e5d":function(t,e,a){},2708:function(t,e,a){},2938:function(t,e,a){},"2f39":function(t,e,a){"use strict";a.r(e);a("5319"),a("573e"),a("7d6e"),a("e54f"),a("985d"),a("31cd");var s=a("2b0e"),n=a("1f91"),i=a("42d2"),o=a("b05d"),r=a("2a19"),l=a("f508");s["a"].use(o["a"],{config:{},lang:n["a"],iconSet:i["a"],plugins:{Notify:r["a"],Loading:l["a"]}});var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"q-app"}},[a("router-view")],1)},d=[],m={name:"App"},u=m,p=a("2877"),h=Object(p["a"])(u,c,d,!1,null,null,null),v=h.exports,b=a("4360"),g=a("8c4f"),_=(a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"my-card q-pa-sm title-card"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-5 q-mt-xs"},[a("span",{staticClass:"font-bold text-md"},[t._v("Dashboard")])]),a("div",{staticClass:"col-2"},[a("q-radio",{attrs:{val:"A.D",label:"A.D."},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}}),a("q-radio",{attrs:{val:"B.S",label:"B.S."},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-2"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"From Date",type:"date"},model:{value:t.fDate,callback:function(e){t.fDate=e},expression:"fDate"}})],1):a("div",{staticClass:"col-2"},[a("v-nepalidatepicker",{attrs:{classValue:"datepicker form-control",placeholder:"From Date"},model:{value:t.bsFromDate,callback:function(e){t.bsFromDate=e},expression:"bsFromDate"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-2"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"To Date",type:"date"},model:{value:t.tDate,callback:function(e){t.tDate=e},expression:"tDate"}})],1):a("div",{staticClass:"col-2"},[a("v-nepalidatepicker",{attrs:{classValue:"datepicker form-control",placeholder:"To Date"},model:{value:t.bsToDate,callback:function(e){t.bsToDate=e},expression:"bsToDate"}})],1),a("div",{staticClass:"col-1"},[a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.9rem",label:"Show"},on:{click:function(e){return t.fetchDashboard()}}})],1)])])],1)]),a("div",{staticClass:"row q-col-gutter-md q-mt-xs "},[a("div",{staticClass:"col-md-3"},[a("q-card",{staticClass:"q-pa-md card-border-radius  card-bg shadow-5"},[a("p",[a("iconify-icon",{staticClass:"light-orange",attrs:{icon:"icon-park-solid:transaction-order",width:"70"}})],1),a("p",{staticClass:"text-sm q-mb-xs"},[t._v("Total Order")]),t.total_val?a("p",{staticClass:"text-lg font-bold q-mb-none light-orange"},[t._v("\n          "+t._s(t.total_val.total_order)+"\n        ")]):t._e()])],1),a("div",{staticClass:"col-md-3"},[a("q-card",{staticClass:"q-pa-md card-border-radius  card-bg shadow-5"},[a("p",[a("iconify-icon",{staticClass:"light-orange",attrs:{icon:"game-icons:money-stack",width:"70"}})],1),a("p",{staticClass:"text-sm q-mb-xs"},[t._v("Total Revenue")]),t.total_val?a("p",{staticClass:"text-lg font-bold q-mb-none light-orange"},[t._v("\n          Rs."+t._s(t.total_val.total_revenue)+"\n        ")]):t._e()])],1),a("div",{staticClass:"col-md-3"},[a("q-card",{staticClass:"q-pa-md card-border-radius  card-bg shadow-5"},[a("p",[a("iconify-icon",{staticClass:"light-orange",attrs:{icon:"mdi:people-group",width:"70"}})],1),a("p",{staticClass:"text-sm  q-mb-xs"},[t._v("Total Customers")]),t.total_val?a("p",{staticClass:"text-lg font-bold q-mb-none light-orange"},[t._v("\n          "+t._s(t.total_val.total_customer)+"\n        ")]):t._e()])],1),a("div",{staticClass:"col-md-3"},[a("q-card",{staticClass:"q-pa-md card-border-radius card-bg shadow-5"},[a("p",[a("iconify-icon",{staticClass:"light-orange",attrs:{icon:"mdi:file-document-box-check",width:"70"}})],1),a("p",{staticClass:"text-sm  q-mb-xs"},[t._v("Ongoing Order")]),t.total_val?a("p",{staticClass:"text-lg font-bold q-mb-none light-orange"},[t._v("\n          "+t._s(t.total_val.ongoing_order)+"\n        ")]):t._e()])],1),a("div",{staticClass:"col-md-6"},[a("q-card",{staticClass:"shadow-5",on:{click:function(e){return t.top()}}},[a("q-card-section",{staticClass:"q-pa-none"},[a("p",{staticClass:"text-sm q-pt-md q-pl-md q-pb-none"},[t._v("Top Selling Items")])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-xs"},[a("q-scroll-area",{staticStyle:{height:"48vh","max-width":"100%"},attrs:{"thumb-style":t.thumbStyle,"content-style":t.contentStyle}},t._l(t.foodItems,(function(e){return a("div",{key:e.id,staticClass:"q-pa-sm q-ma-sm",staticStyle:{"border-radius":"8px",background:"rgb(255 255 255 / 65%)"}},[a("div",[t._v("\n                Item: "+t._s(e.name)+"\n              ")]),a("div",[t._v("\n                Quantity: "+t._s(e.quantity)+"\n              ")]),a("div",[t._v("\n                Net Sales: "+t._s(e.net_price)+"\n              ")])])})),0)],1),a("q-card-section",[a("div")])],1)],1),a("div",{staticClass:"col-md-6"},[a("q-card",{staticClass:"shadow-5"},[a("q-card-section",{staticClass:"q-pa-none"},[a("p",{staticClass:"text-sm q-pt-md q-pl-md q-pb-none"},[t._v("Completed Order")])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-xs"},[a("q-scroll-area",{staticStyle:{height:"48vh","max-width":"100%"},attrs:{"thumb-style":t.thumbStyle,"content-style":t.contentStyle}},t._l(t.paymentStore,(function(e){return a("div",{key:e.id,staticClass:"q-pa-sm q-ma-sm",staticStyle:{"border-radius":"8px",background:"rgb(255 255 255 / 65%)"}},[a("div",[t._v("Invoice no.: "),a("span",{staticStyle:{cursor:"pointer",color:"green"},on:{click:function(a){return t.detailBilling(e)}}},[t._v(t._s(e.id))])]),e.invoice.order&&"Dine In"===e.invoice.order.order_type?a("div",[t._v("Table no.: "+t._s(e.invoice.order.table.number))]):t._e(),e.invoice.merged_order?a("div",[t._v("\n                Table no.:\n                "),t._l(e.invoice.merged_order.merged_table.table,(function(e){return a("div",{key:e.id},[t._v("\n                  "+t._s(e.number)+"\n                ")])}))],2):t._e(),t._v("\n              Date: "+t._s(e.billing_date.substring(0,10))+"\n              "),a("div",[t._v("\n                Time: "+t._s(e.billing_date.substring(11,19))+"\n              ")])])})),0)],1),a("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down","full-width":"","full-height":""},model:{value:t.showInvoice,callback:function(e){t.showInvoice=e},expression:"showInvoice"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId}})],1),a("q-card-section",[a("div")])],1)],1),a("div",{staticClass:"col-md-6"},[a("q-card",{staticClass:"q-pa-md card-border-radius card-bg shadow-5"},[a("q-card-section",[a("p",{staticClass:"text-sm q-mb-xs"},[t._v("Top Selling Item Graphs")])]),t.chart?a("apexchart",{attrs:{height:"300",type:"bar",options:t.chartOptions,series:t.series}}):t._e()],1)],1),a("div",{staticClass:"col-md-6"},[a("q-card",{staticClass:"q-pa-md card-border-radius card-bg shadow-5"},[a("q-card-section",[a("p",{staticClass:"text-sm q-mb-xs"},[t._v("Recent Sales Graph")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[t.chart2?a("apexchart",{attrs:{width:"100%",type:"line",options:t.options,series:t.series2}}):t._e()],1)])],1)],1)])])}),f=[],y=a("1321"),q=a.n(y),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"q-pa-sm"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",[a("p",{staticClass:"float-right"},[a("q-btn",{staticClass:"bg-confirm",attrs:{label:"Print",dense:"",push:"",size:"0.8rem",padding:"sm sm"},on:{click:function(e){return t.printInvoice()}}})],1)])]),a("div",{staticClass:"col-12"},[a("div",{attrs:{id:"pos-bill"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.payment.is_bill_printed,expression:"payment.is_bill_printed"}],staticStyle:{"font-size":"100px",position:"absolute",top:"200px",left:"10px",opacity:"0.4",transform:"rotate(-60deg)"}},[t._v("\n          Copy of Original\n        ")]),a("div",{staticClass:"header"},[a("p",{staticClass:"q-ma-none"},[t._v(t._s(t.resDetail.name))]),a("p",{staticClass:"q-ma-none"},[t._v(t._s(t.resDetail.address))]),t.resDetail.vat_number?a("p",{staticClass:"q-ma-none"},[t._v("PAN No: "+t._s(t.resDetail.vat_number))]):t._e(),a("p",{staticClass:"q-ma-none"},[t._v("SALES INVOICE")])]),a("div",{staticClass:"customer-info"},[a("p",{staticClass:"q-ma-none q-mb-xs"},[a("span",[t._v("\n              Invoice No.: "+t._s(t.payment.id)+"\n            ")])]),a("p",{staticClass:"q-ma-none q-mb-xs"},[a("span",[t._v("\n              Miti:\n              "+t._s(this.date.format("YYYY-MM-DD"))+"\n            ")])]),t.payment.invoice.order&&t.payment.invoice.order.table?a("p",{staticClass:"q-ma-none q-mb-xs"},[t._v("\n            Table: "),t.payment.invoice.order.table?a("span",[t._v(t._s(t.payment.invoice.order.table.number))]):t._e()]):t.payment.invoice.merged_order?a("p",{staticClass:"q-ma-none q-mb-xs"},[a("span",[t._v("\n              Table:\n              "),t._l(t.payment.invoice.merged_order.merged_table.table,(function(e,s){return a("span",{key:e.id},[t._v("\n                "+t._s(e.number)+"\n                "),s!==t.payment.invoice.merged_order.merged_table.table.length-1?a("span",[t._v(",")]):t._e()])}))],2)]):a("p",{staticClass:"q-ma-none q-mb-xs"})]),a("div",{staticClass:"items"},[a("table",[a("tr",[a("th",{staticClass:"left"},[t._v("PARTICULARS")]),a("th",[t._v("QTY")]),a("th",[t._v("RATE")]),a("th",[t._v("AMOUNT")])]),t._l(t.filterFood,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.food.detail.name.toUpperCase()))]),a("td",{staticClass:"center-text"},[t._v(t._s(e.quantity))]),(e.food.is_taxable,a("td",{staticClass:"center-text"},[t._v("\n                "+t._s(e.food.detail.price)+"\n\n              ")])),a("td",{staticClass:"center-text"},[t._v("\n                "+t._s(t.amtWTax(e,e.food.detail.price).toFixed(2))+"\n              ")])])})),t._l(t.filterBeverage,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.beverage.detail.name.toUpperCase()))]),a("td",{staticClass:"center-text"},[t._v(t._s(e.quantity))]),(e.beverage.is_taxable,a("td",{staticClass:"center-text"},[t._v("\n                "+t._s(e.beverage.detail.price)+"\n\n              ")])),a("td",{staticClass:"center-text"},[t._v("\n                "+t._s(t.amtWTax(e,e.beverage.detail.price).toFixed(2))+"\n\n              ")])])})),t._l(t.filterInventory,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.inventory_item.item.name.toUpperCase()))]),a("td",{staticClass:"center-text"},[t._v(t._s(e.quantity))]),(e.inventory_item.is_taxable,a("td",{staticClass:"center-text"},[t._v("\n                "+t._s(e.inventory_item.detail.price)+"\n\n              ")])),a("td",{staticClass:"center-text"},[t._v("\n                "+t._s(t.amtWTax(e,e.inventory_item.detail.price).toFixed(2))+"\n\n              ")])])})),t._l(t.filterAddons,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.addons.detail.name.toUpperCase()))]),a("td",{staticClass:"center-text"},[t._v(t._s(e.quantity))]),(e.addons.is_taxable,a("td",{staticClass:"center-text"},[t._v("\n                "+t._s(e.addons.detail.price)+"\n\n              ")])),a("td",{staticClass:"center-text"},[t._v("\n                "+t._s(t.amtWTax(e,e.addons.detail.price).toFixed(2))+"\n              ")])])})),t._l(t.filterCombo,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.combo_offer.name.toUpperCase()))]),a("td",{staticClass:"center-text"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"center-text"},[t._v("\n                "+t._s(e.combo_offer.price)+"\n\n              ")]),a("td",{staticClass:"center-text"},[t._v("\n                "+t._s(t.amtWTax(e,e.combo_offer.price).toFixed(2))+"\n              ")])])})),a("tr",{staticStyle:{"border-bottom":".5px dashed black","border-top":".5px dashed black"}},[a("td"),a("td"),a("td",{staticClass:"center-text"},[t._v("Total")]),a("td",{staticClass:"center-text"},[t._v("\n                Rs."+t._s(t.totalAmtWTax.toFixed(2))+"\n              ")])])],2)]),a("div",{staticClass:"q-mt-xs"},[a("p",{staticClass:"q-ma-none"},[a("span",[t._v("Total Qty.: "+t._s(t.itemCount))]),t.payment.invoice.discount_amount?a("span",{staticClass:"float-right"},[t._v("Discount Amount :\n              "+t._s(t.payment.invoice.discount_amount))]):t._e()])]),a("div",{staticClass:"q-mt-xs q-pb-xs totals"},[a("p",{staticClass:"q-ma-none"},[t._v("Grand Total : "+t._s(t.payment.invoice.net_price))])]),a("div",{staticClass:"q-mt-xs q-pb-xs words"},[a("p",{staticClass:"q-ma-none"},[a("span",[t._v("In Words: "+t._s(t.amountWords))])])]),a("div",{staticClass:"q-mt-xs"},[a("p",{staticClass:"q-ma-none"},[t._v("\n            Pay Mode:\n            "),t._l(t.payment.payment_method,(function(e,s){return a("span",{key:s},[t._v("\n              "+t._s(e.pay_type)+"\n              "),s!==t.payment.payment_method.length-1?a("span",[t._v("&")]):t._e()])})),a("span",{staticClass:"float-right"},[t._v("Tender: Rs. "+t._s(t.payment.total_paid))])],2)]),a("div",{staticClass:"change q-mt-xs q-pb-xs"},[a("p",{staticClass:"q-ma-none"},[a("span",[t._v("Cashier: "+t._s(t.$store.state.user.user.user.toUpperCase()))]),a("span",{staticClass:"float-right"},[t._v("Change: Rs. "+t._s(t.payment.total_return))])])]),a("div",{staticClass:"q-mt-xs",staticStyle:{"text-align":"center"}},[a("p",{staticClass:"q-ma-none"},[t._v("Thank You, Visit Again :)")])])])])])])},x=[],w=a("ded3"),k=a.n(w),I=(a("13d5"),a("f70f")),S=a("e219"),D=a("be3b"),A=a("f61f");const F=`${A["a"]}/api/v1/restaurant/`,T=`${A["a"]}/api/v1/restaurant/settings/`,O=`${A["a"]}/api/v1/user/`;function $(){return Object(D["a"])().get(F)}function Q(t){return Object(D["a"])().put(`${F}`,t)}function M(t){return Object(D["a"])().post(F,t)}function E(t){return Object(D["a"])().post(T,t)}function R(){return Object(D["a"])().get(T)}function B(t){return Object(D["a"])().put(T,t)}function P(t){return Object(D["a"])().post(O,t)}function N(t={}){return Object(D["a"])().get(O,{params:t})}function j(t,e){return Object(D["a"])().put(`${O}${t}`,e)}const L=`${A["a"]}/api/v1/order/`,z=`${A["a"]}/api/v1/order/bill/`,U=`${A["a"]}/api/v1/merge/table/`,V=`${A["a"]}/api/v1/merge/order/`,W=`${A["a"]}/api/v1/order/invoice/`,Y=`${A["a"]}/api/v1/payment/`,G=(A["a"],`${A["a"]}/api/v1/customer/credit/payment/`),H=`${A["a"]}/api/v1/customer/credit/payment`;function J(t){return Object(D["a"])().post(z,t)}function K(t){return Object(D["a"])().post(L,t)}function Z(t={}){return Object(D["a"])().get(L,{params:t})}function X(t,e={}){return Object(D["a"])().get(`${L}${t}`,{params:e})}function tt(t,e){return Object(D["a"])().put(`${L}${t}`,e)}function et(t,e={}){return Object(D["a"])().put(`${L}${t}`,{name:"ppp"},{params:e})}function at(t){return Object(D["a"])().post(U,t)}function st(t={}){return Object(D["a"])().get(V,{params:t})}function nt(t,e={}){return Object(D["a"])().put(`${V}${t}`,{name:"ppp"},{params:e})}function it(t){return Object(D["a"])().post(W,t)}function ot(t,e={}){return Object(D["a"])().post(Y,t,{params:e})}function rt(t={}){return Object(D["a"])().get(Y,{params:t})}function lt(t={}){return Object(D["a"])().get(G,{params:t})}function ct(t={}){return Object(D["a"])().get(W,{params:t})}function dt(t,e){return Object(D["a"])().put(`${U}${t}/`,e)}function mt(t){return Object(D["a"])().get(`${V}${t}`)}function ut(t,e){return Object(D["a"])().put(V+t,e)}function pt(t,e){return Object(D["a"])().put(`${W}${t}`,e)}function ht(t={}){return Object(D["a"])().get(`${Y}refund/`,{params:t})}function vt(t){return Object(D["a"])().post(`${Y}refund/`,t)}function bt(t,e,a={}){return Object(D["a"])().put(`${G}${t}/`,e,{params:a})}function gt(t){return Object(D["a"])().post(`${H}`,t)}function _t(t={}){return Object(D["a"])().get(`${L}featured`,{params:t})}function ft(t,e={}){return Object(D["a"])().get(`${Y}${t}/`,{params:e})}var yt={data:()=>({invoiceDetail:!0,totalFood:[],totalBeverage:[],totalInventory:[],totalAddons:[],totalCombo:[],orderItems:[],vatCharge:null,payment:{},yr:null,mnt:null,day:null,date:{},merge:!1,resDetail:{}}),props:{propSingleId:{required:!0}},created(){this.fetchInvoice(),this.fetchRestaurant()},computed:{amountWords(){if(this.payment){const t=new S["ToWords"]({localeCode:"en-IN",converterOptions:{currency:!0,ignoreDecimal:!1,ignoreZeroCurrency:!1,doNotAddOnly:!1,currencyOptions:{name:"Rupee",plural:"Rupees",symbol:"₹",fractionalUnit:{name:"Paisa",plural:"Paisa",symbol:""}}}}),e=t.convert(this.payment.invoice.net_price);return e}return""},filterFood(){return this.totalFood=this.orderItems.orderfood.filter((t=>!(0===t.quantity))),this.totalFood.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null})))},filterBeverage(){return this.totalBeverage=this.orderItems.orderbeverage.filter((t=>!(0===t.quantity))),this.totalBeverage.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null})))},filterInventory(){if(this.merge)var t=this.orderItems.merge_order_inventory_item;else t=this.orderItems.order_inventory_item;return this.totalInventory=t.filter((t=>!(0===t.quantity))),this.totalInventory.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null})))},filterAddons(){return this.totalAddons=this.orderItems.orderaddons.filter((t=>!(0===t.quantity))),this.totalAddons.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null})))},filterCombo(){if(this.merge)var t=this.orderItems.merge_order_combo_offer;else t=this.orderItems.order_combo_offer;return this.totalCombo=t.filter((t=>!(0===t.quantity))),this.totalCombo.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null})))},itemCount(){const t=this.totalFood.reduce(((t,e)=>t+e.quantity),0),e=this.totalBeverage.reduce(((t,e)=>t+e.quantity),0),a=this.totalAddons.reduce(((t,e)=>t+e.quantity),0),s=this.totalInventory.reduce(((t,e)=>t+e.quantity),0),n=this.totalCombo.reduce(((t,e)=>t+e.quantity),0);return t+e+a+n+s},unique(){return this.totalFood.length+this.totalBeverage.length+this.totalAddons.length+this.totalCombo.length+this.totalInventory.length},totalAmtWTax(){const t=this.filterFood.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),e=this.filterBeverage.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),a=this.filterAddons.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),s=this.filterInventory.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),n=this.filterCombo.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0);return parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(n)+parseFloat(s)}},methods:{rateWoTax(t,e){return t.rate_wotax=(e*(100/(100+parseFloat(this.vatCharge)))).toFixed(2),t.rate_wotax},amtWTax(t,e){return t.amount_wtax=t.quantity*e,t.amount_wtax},checkDate(){this.yr=this.payment.billing_date.substring(0,4),this.mnt=this.payment.billing_date.substring(5,7),this.day=this.payment.billing_date.substring(8,10),this.date=new I["a"](new Date(this.yr,this.mnt-1,this.day))},amtWoTax(t,e){return t.rate_wotax?t.amount_wotax=t.quantity*t.rate_wotax:t.amount_wotax=t.quantity*e,t.amount_wotax},async fetchInvoice(){const t=await ft(this.propSingleId,{merge:!1});this.payment=t.data,t.data.invoice.order?(this.orderItems=t.data.invoice.order,this.merge=!1):(this.orderItems=t.data.invoice.merged_order,this.merge=!0),this.checkDate()},totalAmtWoTax(){const t=this.filterFood.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wotax)),0),e=this.filterBeverage.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wotax)),0),a=this.filterAddons.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wotax)),0);return parseFloat(t)+parseFloat(e)+parseFloat(a)},async fetchRestaurant(){const t=await $();this.resDetail=t.data,this.vatCharge=t.data.vat},printInvoice(){const t=document.getElementById("pos-bill").innerHTML;let e="";for(const s of[...document.querySelectorAll('link[rel="stylesheet"], style')])e+=s.outerHTML;const a=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");a.document.write(`<!DOCTYPE html>\n                <html>\n                  <head>\n                    ${e}\n                  </head>\n                  <body>\n                    ${t}\n                  </body>\n                </html>`),a.document.close(),a.focus(),a.print(),a.close()}}},qt=yt,Ct=(a("e8eb"),a("f09f")),xt=a("9c40"),wt=a("eebe"),kt=a.n(wt),It=Object(p["a"])(qt,C,x,!1,null,"ed209bf2",null),St=It.exports;kt()(It,"components",{QCard:Ct["a"],QBtn:xt["a"]});const Dt=`${A["a"]}/api/v1/restaurant/dashboard_value/`;function At(t={}){return Object(D["a"])().get(Dt,{params:t})}const Ft=`${A["a"]}/api/v1/report/salessummary`;function Tt(t={}){return Object(D["a"])().get(Ft,{params:t})}var Ot={components:{FinalBill:St,apexchart:q.a},data(){return{chartOptions:{chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"50%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:[]},yaxis:{title:{text:"Quantity"}},fill:{opacity:1},tooltip:{y:{formatter:function(t){return t}}}},series:[{name:"Quantity",data:[]}],options:{chart:{id:"vuechart-example"},xaxis:{categories:[]}},series2:[{name:"Sales",data:[]}],contentStyle:{color:"#555"},thumbStyle:{right:"2px",borderRadius:"5px",backgroundColor:"#027be3",width:"5px",opacity:.75},currentOrder:[],foodItems:[],total_val:null,paymentStore:[],date:"",propSinglePayment:[],propSingleId:null,showInvoice:!1,propMergePayment:[],propMergeId:null,showMergeInvoice:!1,chart:!1,chart2:!1,fDate:null,tDate:null,dateType:"A.D",bsFromDate:"",bsToDate:""}},created(){this.fetchDashboard(),this.fetchPayment(),this.fetchTopSellingItem(),this.fetchCurrentOrder()},methods:{async fetchCurrentOrder(){await Z({dashboard:!0,ongoing:1,merge:1}).then((t=>{this.currentOrder=t.data}))},async fetchTopSellingItem(){await Tt({item:0,dashboard:!0}).then((({data:t})=>{this.foodItems=t,this.foodItems.forEach((t=>{this.chartOptions.xaxis.categories.push(t.name),this.series[0].data.push(t.quantity)})),this.chart=!0,this.$q.loading.hide()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response})}))},async fetchDashboard(){const t=await At({to_date:this.tDate,from_date:this.fDate});this.total_val=t.data},async fetchPayment(){const t=await rt({dashboard:!0});this.paymentStore=t.data,this.paymentStore.forEach((t=>{this.options.xaxis.categories.push(t.id),this.series2[0].data.push(t.invoice.net_price),this.chart2=!0}))},detailBilling(t){this.propSinglePayment=t,this.propSingleId=t.id,this.showInvoice=!0},payment(){this.$router.push({name:"Order",query:{type:"payed"}})},ongoing(){this.$router.push({name:"Order",query:{type:"ongoing"}})},convertEnglishDate(t){let e,a;if(new I["a"](t).getAD().date<10){const a=0;e=a.toString()+new I["a"](t).getAD().date.toString()}else e=new I["a"](t).getAD().date.toString();if(new I["a"](t).getAD().month<10){const e=0;a=e.toString()+(new I["a"](t).getAD().month+1).toString()}else a=(new I["a"](t).getAD().month+1).toString();return"010"===a&&(a="10"),new I["a"](t).getAD().year.toString()+"-"+a+"-"+e}},watch:{bsFromDate(){this.fDate=this.convertEnglishDate(this.bsFromDate)},bsToDate(){this.tDate=this.convertEnglishDate(this.bsToDate)}}},$t=Ot,Qt=a("9989"),Mt=a("3786"),Et=a("27f9"),Rt=a("a370"),Bt=a("eb85"),Pt=a("4983"),Nt=a("24e8"),jt=Object(p["a"])($t,_,f,!1,null,null,null),Lt=jt.exports;kt()(jt,"components",{QPage:Qt["a"],QCard:Ct["a"],QRadio:Mt["a"],QInput:Et["a"],QBtn:xt["a"],QCardSection:Rt["a"],QSeparator:Bt["a"],QScrollArea:Pt["a"],QDialog:Nt["a"]});var zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Food Menu")])])])])],1)]),a("q-card",{staticClass:"q-mt-lg"},[a("q-tabs",{staticClass:"text-grey q-mb-md",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.foodTab,callback:function(e){t.foodTab=e},expression:"foodTab"}},[a("q-tab",{attrs:{name:"addFood",label:"Add Food"}}),a("q-tab",{attrs:{name:"foodDetails",label:"Food List"}})],1),a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.foodTab,callback:function(e){t.foodTab=e},expression:"foodTab"}},[a("q-tab-panel",{attrs:{name:"addFood"}},[a("AddFoodItem")],1),a("q-tab-panel",{attrs:{name:"foodDetails"}},[a("FoodItemList")],1)],1)],1)],1)},Ut=[],Vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-8"},[s("form",[s("ValidationObserver",{ref:"foodForm"},[s("div",{staticClass:"row q-col-gutter-md"},[s("div",{staticClass:"col-4"},[s("validation-provider",{attrs:{name:"Food Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Food Name",dense:""},model:{value:t.foodName,callback:function(e){t.foodName=e},expression:"foodName"}}),s("span",{staticClass:"text-red-500"},[t._v(t._s(a[0]))])]}}])})],1),s("div",{staticClass:"col-4"},[s("q-select",{attrs:{"transition-show":"flip-up","transition-hide":"flip-down",filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",options:t.foodType,label:"Type","emit-value":"","map-options":""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),s("div",{staticClass:"col-4"},[s("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Unit",dense:""},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}})],1),s("div",{staticClass:"col-4"},[s("validation-provider",{attrs:{name:"Price",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Price",dense:""},model:{value:t.price,callback:function(e){t.price=t._n(e)},expression:"price"}}),s("span",{staticClass:"text-red-500"},[t._v(t._s(a[0]))])]}}])})],1),s("div",{staticClass:"col-4"},[s("q-file",{attrs:{filled:"",dense:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Upload Image"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"image"}})]},proxy:!0}]),model:{value:t.image,callback:function(e){t.image=e},expression:"image"}})],1)])]),s("p",{staticClass:"q-mt-sm q-mb-none"},[s("span",[s("q-checkbox",{attrs:{label:"isTaxable?",color:"orange-3"},model:{value:t.taxable,callback:function(e){t.taxable=e},expression:"taxable"}})],1)]),s("p",{staticClass:"q-mb-none"},[s("span",[t.edit?s("q-btn",{staticClass:"q-mt-md",attrs:{color:"orange-3",push:"","text-color":"black",size:"0.8rem",label:"Update",type:"button"},on:{click:function(e){return t.updateFoodBtn()}}}):s("q-btn",{staticClass:"q-mt-md",attrs:{color:"orange-3",push:"","text-color":"black",size:"0.8rem",label:"Add",type:"button"},on:{click:function(e){return t.addFoodBtn()}}})],1)])],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"col-4 q-pt-xl"},[s("q-img",{attrs:{src:a("e20b")}})],1)]),s("q-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("div",[s("q-card",{staticClass:"card-shadow",staticStyle:{width:"350px"}},[s("q-card-section",{staticClass:"row items-center q-pb-none text-center"},[s("div",{staticClass:"text-h6"},[t._v("Add Recipe For The Food?")]),s("q-space")],1),s("q-card-section",{attrs:{align:"right"}},[s("q-btn",{attrs:{color:"green-5",label:"Yes",text:""},on:{click:function(e){return t.confirm()}}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"red-5",label:"No"}})],1)],1)],1)])],1)},Wt=[];const Yt=`${A["a"]}/api/v1/food/`;function Gt(t){return Object(D["a"])().post(Yt,t)}function Ht(t={}){return Object(D["a"])().get(Yt,{params:t})}function Jt(t,e){return Object(D["a"])().put(`${Yt}${t}/`,e)}function Kt(t){return Object(D["a"])().delete(`${Yt}${t}/`)}var Zt=a("7bb1"),Xt=a("4c93");Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"}));var te={components:{ValidationProvider:Zt["b"],ValidationObserver:Zt["a"]},data(){return{image:"",price:"",unit:"",foodName:"",type:"",foodType:[{label:"Veg",value:"veg"},{label:"Non-Veg",value:"nonveg"}],refresh:!1,taxable:!1,dialog:!1,sendFood:"",sendId:""}},props:{edit:{required:!0},propFood:{required:!0}},created(){this.checkEdit()},methods:{checkEdit(){this.edit&&(this.foodName=this.propFood.name,this.unit=this.propFood.unit,this.type=this.propFood.type,this.price=this.propFood.price,this.taxable=this.propFood.is_taxable,this.image?this.image=this.propFood.image:this.image="")},addFoodBtn:function(){this.$refs.foodForm.validate().then((t=>{if(!t)return;var e={type:this.type,unit:this.unit,name:this.foodName,price:this.price,taxable:this.taxable,image:this.image};const a=new FormData;Object.keys(e).forEach((t=>{a.append(t,e[t])})),Gt(a).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Food Added Successfully"}),this.foodName="",this.type="",this.unit="",this.image="",this.taxable=!1,this.price=null,this.dialog=!0,this.sendFood=t.data.data.name,this.sendId=t.data.data.id})).catch((({res:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Add Food"})}))}))},updateFoodBtn:function(){var t={type:this.type,unit:this.unit,name:this.foodName,price:this.price,image:this.image,taxable:this.taxable};const e=new FormData;Object.keys(t).forEach((a=>{e.append(a,t[a])})),Jt(this.propFood.id,e).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Food Updated Successfully"}),this.$emit("closeForm")})).catch((({error:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Update Food"})}))},confirm(){this.$router.push({path:"recipe",query:{type:"Food",item:this.sendFood,id:this.sendId}})}}},ee=te,ae=a("ddd8"),se=a("7d53"),ne=a("0016"),ie=a("8f8e"),oe=a("068f"),re=a("2c91"),le=a("7f67"),ce=Object(p["a"])(ee,Vt,Wt,!1,null,null,null),de=ce.exports;kt()(ce,"components",{QInput:Et["a"],QSelect:ae["a"],QFile:se["a"],QIcon:ne["a"],QCheckbox:ie["a"],QBtn:xt["a"],QImg:oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"]}),kt()(ce,"directives",{ClosePopup:le["a"]});var me=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),s("div",{staticClass:"row q-mt-md"},[t.select?s("div",{staticClass:"col-12"},[s("q-markup-table",{attrs:{flat:"",bordered:""}},[s("thead",[s("tr",[s("th",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-center"},[t._v("Select")]),s("th",{staticClass:"text-center"},[t._v("Image")]),s("th",{staticClass:"text-center"},[t._v("Name")]),s("th",{staticClass:"text-center"},[t._v("Price")])])]),s("tbody",t._l(t.foodItem,(function(e){return s("tr",{key:e.id},[s("td",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-center"},[s("q-checkbox",{attrs:{color:"orange-3"},on:{input:function(a){return t.choiceSelected(e)}},model:{value:e.choice,callback:function(a){t.$set(e,"choice",a)},expression:"food.choice"}})],1),e.image?s("td",{staticClass:"text-center"},[s("img",{staticClass:"order-img",staticStyle:{height:"4.0625em",width:"4.0625em"},attrs:{src:e.image}})]):s("td",{staticClass:"text-center"},[s("q-avatar",{staticClass:"order-avatar bg-delete",attrs:{"text-color":"white",size:"4.0625em"}},[t._v("\n                "+t._s(e.name[0].toUpperCase())+"\n              ")])],1),s("td",{staticClass:"text-center"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.price))])])})),0)]),s("div",{staticClass:"q-pt-md q-mb-sm"},[s("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1):s("div",{staticClass:"col-8"},[s("q-markup-table",{attrs:{flat:"",bordered:""}},[s("thead",[s("tr",[s("th",{staticClass:"text-center"},[t._v("Image")]),s("th",{staticClass:"text-center"},[t._v("Name")]),s("th",{staticClass:"text-center"},[t._v("Price")]),s("th",{staticClass:"text-center"},[t._v("Featured")]),s("th",{staticClass:"text-center"},[t._v("Action")])])]),s("tbody",t._l(t.foodItem,(function(e){return s("tr",{key:e.id},[e.image?s("td",{staticClass:"text-center"},[s("img",{staticClass:"order-img",staticStyle:{height:"4.0625em",width:"4.0625em"},attrs:{src:e.image}})]):s("td",{staticClass:"text-center"},[s("q-avatar",{staticClass:"order-avatar bg-delete",attrs:{"text-color":"white",size:"4.0625em"}},[t._v("\n                "+t._s(e.name[0].toUpperCase())+"\n              ")])],1),s("td",{staticClass:"text-center"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.price))]),s("td",{staticClass:"text-center"},[s("q-toggle",{attrs:{color:"orange-3"},on:{input:function(a){return t.changeFeature(e)}},model:{value:e.featured,callback:function(a){t.$set(e,"featured",a)},expression:"food.featured"}})],1),s("td",{staticClass:"text-center"},[s("span",{staticClass:"q-ml-sm"},[s("q-btn",{staticClass:"bg-confirm",attrs:{title:"edit",padding:"xs xs","text-color":"black",icon:"edit"},on:{click:function(a){return t.updateFoodItem(e)}}})],1),s("span",{staticClass:"q-ml-sm"},[s("q-btn",{staticClass:"bg-delete",attrs:{title:"delete",padding:"xs xs","text-color":"black",icon:"delete"},on:{click:function(a){t.del=!0,t.deleteId=e.id}}})],1)])])})),0)]),s("div",{staticClass:"q-pt-md q-mb-sm"},[s("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"col-4"},[s("q-img",{attrs:{src:a("e20b")}})],1)]),s("q-dialog",{model:{value:t.foodStatus,callback:function(e){t.foodStatus=e},expression:"foodStatus"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center q-pb-none q-mb-md"},[s("h6",{staticClass:"q-ma-none"},[t._v("Edit Food Details")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),s("q-separator"),s("q-card-section",[s("AddFoodItem",{attrs:{propFood:t.propFood,edit:!0},on:{closeForm:t.closeForm}})],1)],1)],1),s("q-dialog",{model:{value:t.del,callback:function(e){t.del=e},expression:"del"}},[s("DeleteLayout",{on:{deleteItem:t.deleteItem}})],1),s("q-dialog",{attrs:{medium:""},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}},[s("DetailFood",{attrs:{propFood:t.propFood}})],1)],1)},ue=[],pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticClass:"card-shadow",staticStyle:{width:"250px"}},[a("q-card-section",{staticClass:"row items-center q-pb-none text-center"},[a("div",{staticClass:"text-h6"},[t._v("Are you sure?")]),a("q-space")],1),a("q-card-section",{attrs:{align:"right"}},[t.comp?a("q-btn",{attrs:{color:"green-5",label:"Yes",text:""},on:{click:function(e){return t.confirmComp()}}}):a("q-btn",{attrs:{color:"green-5",label:"Yes",text:""},on:{click:function(e){return t.confirm()}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"red-5",label:"No"}})],1)],1)],1)},he=[],ve={methods:{confirm(){this.$emit("deleteItem")},confirmComp(){this.$emit("compDelete")}},props:{comp:{}}},be=ve,ge=Object(p["a"])(be,pe,he,!1,null,null,null),_e=ge.exports;kt()(ge,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QBtn:xt["a"]}),kt()(ge,"directives",{ClosePopup:le["a"]});var fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticStyle:{"background-color":"white"}},[t.propFood.image?a("q-img",{staticStyle:{height:"200px",width:"400px"},attrs:{src:t.propFood.image}}):a("q-avatar",{staticClass:"order-avatar",staticStyle:{height:"200px",width:"400px"},attrs:{color:"pink","text-color":"white",size:"15em"}},[t._v(t._s(t.propFood.name[0].toUpperCase()))]),a("q-card-section",[a("p",{staticClass:"text-h5"},[a("span",[t._v("\n                "+t._s(t.propFood.name)+"\n            ")]),a("span",{staticClass:"float-right"},[t.propFood.featured?a("q-icon",{attrs:{name:"favorite",color:"red",size:"2rem"}},[a("q-tooltip",[t._v("Favorite\n                        Item")])],1):a("q-icon",{attrs:{name:"favorite_border",size:"2rem"}},[a("q-tooltip",[t._v("Not Favorite")])],1)],1)]),a("p",{staticClass:"q-mt-sm"},[a("span",{staticStyle:{color:"indianred"}},[t._v(t._s(t.propFood.variety.name))]),"nonveg"===t.propFood.type?a("span",{staticClass:"float-right q-mt-none"},[a("q-badge",{staticClass:"q-pa-xs",attrs:{"text-color":"white",color:"red-5"}},[t._v("Non-Veg")])],1):a("span",{staticClass:"float-right q-pa-xs  q-mt-none"},[a("q-badge",{staticClass:"q-pa-xs",attrs:{"text-color":"white",color:"green-5"}},[t._v("Veg")])],1)]),a("p",{staticClass:"q-pa-none"},[t._v("Menu: "),a("q-chip",[t._v(t._s(t.propFood.menu.name))])],1),a("p",{staticClass:"q-pa-none q-mb-none"},[t._v("Category: "),a("q-chip",[t._v(t._s(t.propFood.category.name))])],1)]),a("q-separator",{staticClass:"q-mx-md q-mt-none q-pa-none q-mb-none"}),a("q-card-section",[a("div",[a("span",{staticClass:"text-h6",staticStyle:{color:"indianred"}},[t._v("Rs."+t._s(t.propFood.price))]),a("span",{staticClass:"text-grey text-weigth-thin"},[t._v(" per "+t._s(t.propFood.unit.toLowerCase()))])])])],1)},ye=[],qe={props:{propFood:{required:!0}}},Ce=qe,xe=a("cb32"),we=a("05c0"),ke=a("58a8"),Ie=a("b047"),Se=Object(p["a"])(Ce,fe,ye,!1,null,null,null),De=Se.exports;kt()(Se,"components",{QCard:Ct["a"],QImg:oe["a"],QAvatar:xe["a"],QCardSection:Rt["a"],QIcon:ne["a"],QTooltip:we["a"],QBadge:ke["a"],QChip:Ie["a"],QSeparator:Bt["a"]});var Ae={components:{AddFoodItem:de,DeleteLayout:_e,DetailFood:De},props:{select:{required:!0},recipe:{required:!0}},data(){return{search:"",last_page:"",current_page:"",next_page:"",previous_page:"",foodItem:{},to:"",from:"",deleteId:"",propFood:{},options:{page:1,itemsPerPage:7},total:0,foodStatus:!1,del:!1,detail:!1,isRecipe:!1}},created(){this.fetchFoodItem()},activated(){this.fetchFoodItem()},methods:{async fetchFoodItem(){const{page:t,itemsPerPage:e}=this.options;this.recipe?this.isRecipe=!0:this.isRecipe=!1,await Ht({page:t,page_size:e,search:this.search,recipe:this.isRecipe}).then((t=>{this.foodItem=t.data.food.data,this.foodItem=this.foodItem.map((t=>k()(k()({},t),{},{choice:!1}))),this.current_page=t.data.food.meta.current_page,this.previous_page=t.data.food.meta.previous_page,this.last_page=t.data.food.meta.last_page,this.next_page=t.data.food.meta.next_page,this.to=t.data.food.meta.to,this.from=t.data.food.meta.from,this.total=t.data.food.meta.total})).catch((t=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.res.data.error})}))},showDetail(t){this.propFood=t,this.detail=!0},choiceSelected(t){this.$emit("exitFood",t)},deleteItem(){Kt(this.deleteId).then((()=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Food Item Deleted"}),this.del=!1,this.fetchFoodItem()}))},updateFoodItem:function(t){this.propFood=t,this.foodStatus=!0},closeForm(){this.foodStatus=!1,this.fetchFoodItem()},async changeFeature(t){const e={featured:t.featured,name:t.name,price:t.price,unit:t.unit,type:t.type,image:null,taxable:t.is_taxable};try{await Jt(t.id,e);this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Favorite Updated"})}catch(a){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Update Favorite"})}}},watch:{current_page(){this.options.page=this.current_page,this.fetchFoodItem()},search(){this.fetchFoodItem()}}},Fe=Ae,Te=a("2bb1"),Oe=a("3b16"),$e=a("9564"),Qe=Object(p["a"])(Fe,me,ue,!1,null,null,null),Me=Qe.exports;kt()(Qe,"components",{QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QCheckbox:ie["a"],QAvatar:xe["a"],QPagination:Oe["a"],QToggle:$e["a"],QBtn:xt["a"],QImg:oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QSeparator:Bt["a"]}),kt()(Qe,"directives",{ClosePopup:le["a"]});var Ee={data(){return{foodTab:"addFood"}},components:{AddFoodItem:de,FoodItemList:Me}},Re=Ee,Be=a("429b"),Pe=a("7460"),Ne=a("adad"),je=a("823b"),Le=Object(p["a"])(Re,zt,Ut,!1,null,null,null),ze=Le.exports;kt()(Le,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var Ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Beverage Menu")])])])])],1)]),a("q-card",{staticClass:"q-mt-lg"},[a("q-tabs",{staticClass:"text-grey q-mb-md",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"add",label:"Add Beverage"}}),a("q-tab",{attrs:{name:"list",label:"Beverage List"}})],1),a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"add"}},[a("AddBeverageItem")],1),a("q-tab-panel",{attrs:{name:"list"}},[a("BeverageItemList")],1)],1)],1)],1)},Ve=[],We=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-8"},[s("form",[s("ValidationObserver",{ref:"beverageForm"},[s("div",{staticClass:"row q-col-gutter-md"},[s("div",{staticClass:"col-4"},[s("validation-provider",{attrs:{name:"Beverage Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Beverage Name",dense:""},model:{value:t.beverageName,callback:function(e){t.beverageName=e},expression:"beverageName"}}),s("span",{staticClass:"text-red-500"},[t._v(t._s(a[0]))])]}}])})],1),s("div",{staticClass:"col-4"},[s("q-select",{attrs:{"transition-show":"flip-up","transition-hide":"flip-down",filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",options:t.typeOptions,label:"Type","emit-value":"","map-options":""},model:{value:t.typeName,callback:function(e){t.typeName=e},expression:"typeName"}})],1),s("div",{staticClass:"col-4"},[s("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Unit",dense:""},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}})],1),s("div",{staticClass:"col-4"},[s("validation-provider",{attrs:{name:"Price",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Price",dense:""},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),s("span",{staticClass:"text-red-500"},[t._v(t._s(a[0]))])]}}])})],1),s("div",{staticClass:"col-4"},[s("q-file",{attrs:{filled:"",dense:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Upload Image"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"image"}})]},proxy:!0}]),model:{value:t.image,callback:function(e){t.image=e},expression:"image"}})],1)])]),s("p",{staticClass:"q-mt-sm q-mb-none"},[s("span",[s("q-checkbox",{attrs:{label:"isTaxable?",color:"orange-3"},model:{value:t.taxable,callback:function(e){t.taxable=e},expression:"taxable"}})],1)]),s("p",{staticClass:"q-mb-none"},[t.edit?s("q-btn",{staticClass:"q-mt-md",attrs:{color:"orange-3",push:"","text-color":"black",size:"0.8rem",label:"Update",type:"button"},on:{click:function(e){return t.update()}}}):s("q-btn",{staticClass:"q-mt-md",attrs:{color:"orange-3",push:"","text-color":"black",size:"0.8rem",label:"Add",type:"button"},on:{click:function(e){return t.addBev()}}})],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"col-4 q-pt-xl"},[s("q-img",{attrs:{src:a("eb3b")}})],1)]),s("q-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("div",[s("q-card",{staticClass:"card-shadow",staticStyle:{width:"350px"}},[s("q-card-section",{staticClass:"row items-center q-pb-none text-center"},[s("div",{staticClass:"text-h6"},[t._v("Add Recipe For The Beverage?")]),s("q-space")],1),s("q-card-section",{attrs:{align:"right"}},[s("q-btn",{attrs:{color:"green-5",label:"Yes",text:""},on:{click:function(e){return t.confirm()}}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"red-5",label:"No"}})],1)],1)],1)])],1)},Ye=[];const Ge=`${A["a"]}/api/v1/beverage/`;function He(t){return Object(D["a"])().post(Ge,t)}function Je(t={}){return Object(D["a"])().get(Ge,{params:t})}function Ke(t,e){return Object(D["a"])().put(`${Ge}${t}/`,e)}function Ze(t){return Object(D["a"])().delete(`${Ge}${t}/`)}Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"})),Object(Zt["c"])("min",k()(k()({},Xt["f"]),{},{message:"{_field_} may not be less than {length} numbers"})),Object(Zt["c"])("max",k()(k()({},Xt["e"]),{},{message:"{_field_} may not be greater than {length} numbers"})),Object(Zt["c"])("double",k()(k()({},Xt["c"]),{},{message:"{_field_} must have decimal"}));var Xe={components:{ValidationProvider:Zt["b"],ValidationObserver:Zt["a"]},data(){return{image:"",price:"",unit:"",typeOptions:[{label:"Hard Drink",value:"hard"},{value:"soft",label:"Soft Drink"},{label:"Cold Drink",value:"cold"},{label:"Hot Drink",value:"hot"}],beverageName:"",typeName:"",taxable:!1,menu:!1,dialog:!1,sendBeverage:"",sendId:""}},created(){this.checkEdit()},props:{bev:{required:!0},edit:{required:!0}},methods:{checkEdit(){this.edit&&(this.beverageName=this.bev.name,this.typeName=this.bev.type,this.price=this.bev.price,this.unit=this.bev.unit,this.taxable=this.bev.is_taxable,this.image?this.image=this.bev.image:this.image="")},addBev:function(){this.$refs.beverageForm.validate().then((t=>{if(!t)return;const e={name:this.beverageName,price:this.price,unit:this.unit,image:this.image,type:this.typeName,taxable:this.taxable},a=new FormData;Object.keys(e).forEach((t=>{a.append(t,e[t])})),He(a).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Beverage Added Successfully"}),this.beverageName="",this.unit="",this.image="",this.typeName="",this.price=null,this.taxable=!1,this.dialog=!0,this.sendBeverage=t.data.Beverage.name,this.sendId=t.data.Beverage.id})).catch((({error:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Add Beverage"})}))}))},update:function(){this.$refs.beverageForm.validate().then((t=>{if(!t)return;var e={name:this.beverageName,price:this.price,unit:this.unit,type:this.typeName,image:this.image,taxable:this.taxable};const a=new FormData;Object.keys(e).forEach((t=>{a.append(t,e[t])})),Ke(this.bev.id,a).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Beverage Updated Successfully"}),this.$emit("closeForm")})).catch((({error:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Updated Beverage"})}))}))},confirm(){this.$router.push({path:"recipe",query:{type:"Beverage",item:this.sendBeverage,id:this.sendId}})}}},ta=Xe,ea=Object(p["a"])(ta,We,Ye,!1,null,null,null),aa=ea.exports;kt()(ea,"components",{QInput:Et["a"],QSelect:ae["a"],QFile:se["a"],QIcon:ne["a"],QCheckbox:ie["a"],QBtn:xt["a"],QImg:oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"]}),kt()(ea,"directives",{ClosePopup:le["a"]});var sa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),s("div",{staticClass:"row q-mt-md"},[t.select?s("div",{staticClass:"col-12"},[s("q-markup-table",{attrs:{flat:"",bordered:""}},[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[t._v("Select")]),s("th",{staticClass:"text-left"},[t._v("Image")]),s("th",{staticClass:"text-left"},[t._v("Name")]),s("th",{staticClass:"text-left"},[t._v("Price")])])]),s("tbody",t._l(t.beverageItem,(function(e){return s("tr",{key:e.id},[s("td",[s("q-checkbox",{attrs:{color:"orange-3"},on:{input:function(a){return t.choiceSelected(e)}},model:{value:e.choice,callback:function(a){t.$set(e,"choice",a)},expression:"beverage.choice"}})],1),e.image?s("td",[s("img",{staticClass:"order-img",staticStyle:{height:"4.0625em",width:"4.0625em"},attrs:{src:e.image}})]):s("td",[s("q-avatar",{staticClass:"order-avatar bg-confirm",attrs:{"text-color":"white",size:"4.0625em"}},[t._v(t._s(e.name[0].toUpperCase()))])],1),s("td",{staticClass:"text-left"},[t._v(t._s(e.name))]),s("td",{staticClass:"text-left"},[t._v("Rs "+t._s(e.price))])])})),0)]),s("div",{staticClass:"q-pt-md q-mb-sm"},[s("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1):s("div",{staticClass:"col-8"},[s("q-markup-table",{attrs:{flat:"",bordered:""}},[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[t._v("Image")]),s("th",{staticClass:"text-left"},[t._v("Name")]),s("th",{staticClass:"text-left"},[t._v("Price")]),s("th",{staticClass:"text-center"},[t._v("Favorite")]),s("th",{staticClass:"text-center"},[t._v("Action")])])]),s("tbody",t._l(t.beverageItem,(function(e){return s("tr",{key:e.id},[e.image?s("td",[s("img",{staticClass:"order-img",staticStyle:{height:"4.0625em",width:"4.0625em"},attrs:{src:e.image}})]):s("td",[s("q-avatar",{staticClass:"order-avatar bg-confirm",attrs:{"text-color":"white",size:"4.0625em"}},[t._v(t._s(e.name[0].toUpperCase()))])],1),s("td",{staticClass:"text-left"},[t._v(t._s(e.name))]),s("td",{staticClass:"text-left"},[t._v("Rs "+t._s(e.price))]),s("td",{staticClass:"text-center"},[s("q-toggle",{attrs:{color:"orange-3"},on:{input:function(a){return t.changeFeature(e)}},model:{value:e.featured,callback:function(a){t.$set(e,"featured",a)},expression:"beverage.featured"}})],1),s("td",{staticClass:"text-center"},[s("span",{staticClass:"q-ml-sm"},[s("q-btn",{staticClass:"bg-confirm",attrs:{title:"edit",padding:"xs xs","text-color":"black",icon:"edit"},on:{click:function(a){return t.update(e)}}})],1),s("span",{staticClass:"q-ml-sm"},[s("q-btn",{staticClass:"bg-delete",attrs:{title:"delete",padding:"xs xs","text-color":"black",icon:"delete"},on:{click:function(a){t.del=!0,t.deleteId=e.id}}})],1)])])})),0)]),s("div",{staticClass:"q-pt-md q-mb-sm"},[s("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"col-4"},[s("q-img",{attrs:{src:a("eb3b")}})],1)]),s("q-dialog",{model:{value:t.add,callback:function(e){t.add=e},expression:"add"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center q-pb-none q-mb-md"},[s("h6",{staticClass:"q-ma-none"},[t._v("Edit Beverage Details")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),s("q-separator"),s("q-card-section",[s("AddBeverageItem",{attrs:{bev:t.bev,edit:!0},on:{closeForm:t.closeForm}})],1)],1)],1),s("q-dialog",{model:{value:t.del,callback:function(e){t.del=e},expression:"del"}},[s("DeleteLayout",{on:{deleteItem:t.deleteItem}})],1),s("q-dialog",{attrs:{medium:""},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}},[s("DetailBeverage",{attrs:{propBeverage:t.propBeverage}})],1)],1)},na=[],ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticStyle:{"background-color":"white"}},[t.propBeverage.image?a("q-img",{staticStyle:{height:"200px",width:"400px"},attrs:{src:t.propBeverage.image}}):a("q-avatar",{staticClass:"order-avatar",staticStyle:{height:"200px",width:"400px"},attrs:{color:"pink","text-color":"white",size:"15em"}},[t._v(t._s(t.propBeverage.name[0].toUpperCase()))]),a("q-card-section",[a("p",{staticClass:"text-h5"},[a("span",[t._v("\n                "+t._s(t.propBeverage.name)+"\n            ")]),a("span",{staticClass:"float-right"},[this.propBeverage.featured?a("q-icon",{attrs:{name:"favorite",color:"red",size:"2rem"}},[a("q-tooltip",[t._v("Favorite Item")])],1):a("q-icon",{attrs:{name:"favorite_border",size:"2rem"}},[a("q-tooltip",[t._v("Not Favorite")])],1)],1)]),a("p",{staticClass:"q-mt-sm q-pa-none q-mb-none"},[a("span",{staticStyle:{color:"indianred"}},[t._v(t._s(t.propBeverage.menu.name))]),"soft"===t.propBeverage.type?a("span",{staticClass:"float-right q-mt-none"},[a("q-badge",{staticClass:"q-pa-xs",attrs:{"text-color":"white",color:"green-5"}},[t._v("Soft Drink")])],1):"hard"===t.propBeverage.type?a("span",{staticClass:"float-right q-pa-xs  q-mt-none"},[a("q-badge",{staticClass:"q-pa-xs",attrs:{"text-color":"white",color:"red-5"}},[t._v("Hard Drink")])],1):"hot"===t.propBeverage.type?a("span",{staticClass:"float-right q-pa-xs  q-mt-none"},[a("q-badge",{staticClass:"q-pa-xs",attrs:{"text-color":"white",color:"red-5"}},[t._v("Hot Drink")])],1):"cold"===t.propBeverage.type?a("span",{staticClass:"float-right q-pa-xs  q-mt-none"},[a("q-badge",{staticClass:"q-pa-xs",attrs:{"text-color":"white",color:"blue-5"}},[t._v("Cold Drink")])],1):t._e()])]),a("q-separator",{staticClass:"q-mx-md q-mt-none q-pa-none q-mb-none"}),a("q-card-section",[a("div",[a("span",{staticClass:"text-h6",staticStyle:{color:"indianred"}},[t._v("Rs."+t._s(t.propBeverage.price))]),a("span",{staticClass:"text-grey text-weigth-thin"},[t._v(" per "+t._s(t.propBeverage.unit.toLowerCase()))])])])],1)},oa=[],ra={props:{propBeverage:{required:!0}}},la=ra,ca=Object(p["a"])(la,ia,oa,!1,null,null,null),da=ca.exports;kt()(ca,"components",{QCard:Ct["a"],QImg:oe["a"],QAvatar:xe["a"],QCardSection:Rt["a"],QIcon:ne["a"],QTooltip:we["a"],QBadge:ke["a"],QSeparator:Bt["a"]});var ma={data(){return{last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:7},beverageItem:{},search:"",add:!1,bev:{},del:!1,deleteId:"",propBeverage:{},detail:!1,isRecipe:!1}},created(){this.fetchBeverageItem()},activated(){this.fetchBeverageItem()},props:{select:{},recipe:{}},methods:{fetchBeverageItem:async function(){this.recipe?this.isRecipe=!0:this.isRecipe=!1;const{page:t,itemsPerPage:e}=this.options,a=await Je({page:t,page_size:e,recipe:this.isRecipe,search:this.search});this.beverageItem=a.data.beverage.data,this.beverageItem=this.beverageItem.map((t=>k()(k()({},t),{},{choice:!1}))),this.current_page=a.data.beverage.meta.current_page,this.previous_page=a.data.beverage.meta.previous_page,this.last_page=a.data.beverage.meta.last_page,this.next_page=a.data.beverage.meta.next_page},choiceSelected(t){this.$emit("exitBeverage",t)},deleteItem(){return Ze(this.deleteId).then((()=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Beverage Deleted"}),this.del=!1,this.fetchBeverageItem()}))},update:function(t){this.bev=t,this.add=!0},closeForm(){this.add=!1,this.fetchBeverageItem()},showDetail(t){this.propBeverage=t,this.detail=!0},async changeFeature(t){const e={featured:t.featured,name:t.name,price:t.price,unit:t.unit,type:t.type,image:null,taxable:t.is_taxable};try{await Ke(t.id,e);this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Favorite Updated"})}catch(a){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Update Favorite"})}}},watch:{current_page(){this.options.page=this.current_page,this.fetchBeverageItem()},search(){this.fetchBeverageItem()}},components:{AddBeverageItem:aa,DeleteLayout:_e,DetailBeverage:da}},ua=ma,pa=Object(p["a"])(ua,sa,na,!1,null,null,null),ha=pa.exports;kt()(pa,"components",{QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QCheckbox:ie["a"],QAvatar:xe["a"],QPagination:Oe["a"],QToggle:$e["a"],QBtn:xt["a"],QImg:oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QSeparator:Bt["a"]}),kt()(pa,"directives",{ClosePopup:le["a"]});var va={data(){return{tab:"add"}},components:{AddBeverageItem:aa,BeverageItemList:ha}},ba=va,ga=Object(p["a"])(ba,Ue,Ve,!1,null,null,null),_a=ga.exports;kt()(ga,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var fa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"q-pa-lg"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("q-card",{staticClass:"q-pa-sm",staticStyle:{"box-shadow":"none"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Table Detail")])])])])],1)]),s("div",{staticClass:"row q-col-gutter-sm"},[s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"q-mt-lg q-pa-md"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-8 q-mt-sm"},[s("TableDetailList")],1),s("div",{staticClass:"col-4 q-mt-lg"},[s("q-img",{staticClass:"q-ml-sm",attrs:{src:a("7629")}})],1)])])],1)])])},ya=[],qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("span",{staticClass:"q-mb-md pointer",on:{click:function(e){t.add=!0}}},[a("q-chip",{staticClass:"menu-chip",attrs:{color:"orange-1"}},[a("q-avatar",{staticClass:"b-r-8",attrs:{push:"",icon:"add",padding:"md md",type:"button",color:"orange-3",size:"2.5rem","text-color":"black"}}),t._v("\n        Add Table\n      ")],1)],1)]),a("div",{staticClass:"col-6 q-mt-xs"},[a("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"col-12"},[a("q-markup-table",{attrs:{flat:"",bordered:""}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Table No.")]),a("th",{staticClass:"text-left"},[t._v("Capacity")]),a("th",{staticClass:"text-left"},[t._v("Status")]),a("th",{staticClass:"text-center"},[t._v("Action")])])]),a("tbody",t._l(t.tables,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[t._v(t._s(e.number))]),a("td",{staticClass:"text-left"},[t._v(t._s(e.capacity))]),a("td",{staticClass:"text-left"},[t._v(t._s(e.status_name))]),a("td",{staticClass:"text-center"},[a("span",[a("q-btn",{staticClass:"bg-confirm",attrs:{title:"edit",padding:"xs xs","text-color":"black",icon:"edit"},on:{click:function(a){return t.update(e)}}})],1),a("span",{staticClass:"q-ml-sm"},[a("q-btn",{staticClass:"bg-delete",attrs:{title:"delete",padding:"xs xs","text-color":"black",icon:"delete"},on:{click:function(a){t.del=!0,t.deleteId=e.id}}})],1)])])})),0)]),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1),a("q-dialog",{model:{value:t.add,callback:function(e){t.add=e},expression:"add"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-md"},[a("h6",{staticClass:"q-ma-none"},[t._v("Add Table Details")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("AddTableDetails",{on:{closeForm:t.closeForm}})],1)],1)],1),a("q-dialog",{model:{value:t.edit,callback:function(e){t.edit=e},expression:"edit"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-md"},[a("h6",{staticClass:"q-ma-none"},[t._v("Edit Table Details")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("AddTableDetails",{attrs:{tab:t.tab,edit:t.edit},on:{closeForm:t.closeForm}})],1)],1)],1),a("q-dialog",{model:{value:t.del,callback:function(e){t.del=e},expression:"del"}},[a("DeleteLayout",{on:{deleteItem:t.deleteItem}})],1)],1)},Ca=[];const xa=`${A["a"]}/api/v1/order/table/`;function wa(t){return Object(D["a"])().post(xa,t)}function ka(t={}){return Object(D["a"])().get(xa,{params:t})}function Ia(t){return Object(D["a"])().delete(`${xa}${t}/`)}function Sa(t,e){return Object(D["a"])().put(`${xa}${t}/`,e)}var Da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-form",[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Table No.",dense:""},model:{value:t.tableNo,callback:function(e){t.tableNo=e},expression:"tableNo"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Capacity",dense:""},model:{value:t.capacity,callback:function(e){t.capacity=e},expression:"capacity"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"col-6"},[a("q-select",{attrs:{"transition-show":"flip-up","transition-hide":"flip-down",filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",options:t.statusOptions,label:"Status","emit-value":"","map-options":""},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)]),a("p",[t.edit?a("q-btn",{staticClass:"q-mt-md",attrs:{"text-color":"black",label:"Update",type:"button",color:"orange-3",push:"",size:"0.8rem"},on:{click:function(e){return t.update()}}}):a("q-btn",{staticClass:"q-mt-md",attrs:{"text-color":"black",label:"Add",type:"button",color:"orange-3",push:"",size:"0.8rem"},on:{click:function(e){return t.tableAdd()}}})],1)])],1)},Aa=[],Fa={created(){this.checkEdit()},props:{tab:{},edit:{}},data(){return{tableNo:"",capacity:null,status:"",statusOptions:[{label:"Occupied",value:1},{label:"Vacant",value:2}]}},methods:{checkEdit(){this.edit&&(this.tableNo=this.tab.number,this.capacity=this.tab.capacity,this.status=this.tab.status)},tableAdd:function(){if(!this.tableNo)return void this.$q.notify({color:"red-5",icon:"warning",message:"Table Number is required"});if(!this.capacity)return void this.$q.notify({color:"red-5",icon:"warning",message:"Capacity is required"});const t={number:this.tableNo,capacity:this.capacity};wa(t).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Table Added Successfully"}),this.$emit("closeForm")})).catch((({response:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Add Table"})}))},update:function(){if(!this.tableNo)return void this.$q.notify({color:"red-5",icon:"warning",message:"Table Number is required"});if(!this.capacity)return void this.$q.notify({color:"red-5",icon:"warning",message:"Capacity is required"});const t={number:this.tableNo,capacity:this.capacity,status:this.status};Sa(this.tab.id,t).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Table Updated"}),this.$emit("closeForm")})).catch((t=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response.data[0]||"Unable to Update"})}))}}},Ta=Fa,Oa=a("0378"),$a=Object(p["a"])(Ta,Da,Aa,!1,null,null,null),Qa=$a.exports;kt()($a,"components",{QForm:Oa["a"],QInput:Et["a"],QSelect:ae["a"],QBtn:xt["a"]});var Ma={data(){return{last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:8},tables:{},search:"",add:!1,tab:{},edit:!1,del:!1}},created(){this.fetchTable()},components:{AddTableDetails:Qa,DeleteLayout:_e},methods:{fetchTable:async function(){const{page:t,itemsPerPage:e}=this.options,a=await ka({page:t,page_size:e,search:this.search});this.tables=a.data.table.data,this.current_page=a.data.table.meta.current_page,this.previous_page=a.data.table.meta.previous_page,this.last_page=a.data.table.meta.last_page,this.next_page=a.data.table.meta.next_page},deleteItem(){return Ia(this.deleteId).then((()=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Table Deleted"}),this.del=!1,this.fetchTable()})).catch((t=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Delete Table"}),this.del=!1}))},closeForm(){this.add=!1,this.edit&&(this.edit=!1),this.fetchTable()},update(t){this.tab=t,this.edit=!0}},watch:{search(){this.fetchTable()},current_page(){this.options.page=this.current_page,this.fetchTable()}}},Ea=Ma,Ra=Object(p["a"])(Ea,qa,Ca,!1,null,null,null),Ba=Ra.exports;kt()(Ra,"components",{QChip:Ie["a"],QAvatar:xe["a"],QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QBtn:xt["a"],QPagination:Oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QSeparator:Bt["a"]}),kt()(Ra,"directives",{ClosePopup:le["a"]});var Pa={components:{TableDetailList:Ba}},Na=Pa,ja=Object(p["a"])(Na,fa,ya,!1,null,null,null),La=ja.exports;kt()(ja,"components",{QPage:Qt["a"],QCard:Ct["a"],QImg:oe["a"]});var za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Manage Order")])])])])],1)]),a("q-card",{staticClass:"my-card q-mt-lg"},[a("div",{staticClass:"row q-col-gutter-x-md"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("q-tabs",{staticClass:"text-grey no-shadow",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"neworder",label:"New Order"}}),a("q-tab",{attrs:{name:"ongoingorder",label:"On Going Order"}}),a("q-tab",{attrs:{name:"allorders",label:"Sales Bill"}}),a("q-tab",{attrs:{name:"unsettledorders",label:"Unsettled Orders"}})],1)],1),a("div",{staticClass:"col-12"},[a("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"neworder"}},[a("NewOrder")],1),a("q-tab-panel",{attrs:{name:"ongoingorder"}},[a("OnGoingOrder")],1),a("q-tab-panel",{attrs:{name:"allorders"}},[a("AllOrders")],1),a("q-tab-panel",{attrs:{name:"unsettledorders"}},[a("UnsettledOrders")],1)],1)],1)])])],1)},Ua=[],Va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-12 col-md-12"},[a("div",{staticClass:"row q-col-gutter-y-md"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-md q-mt-xs"},[a("div",{staticClass:"col-4"},[a("q-select",{attrs:{"bg-color":"orange-1",standout:"bg-standout",dense:"",filled:"",options:t.orderOptions,label:"Order Type","map-options":"","emit-value":""},model:{value:t.orderModel,callback:function(e){t.orderModel=e},expression:"orderModel"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{"bg-color":"orange-1",standout:"bg-standout",dense:"",filled:"",mask:"time",rules:["time"],label:"Order Time"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"red-5",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),a("div",{staticClass:"col-4"},[1===t.orderModel?a("q-input",{attrs:{"bg-color":"orange-1",standout:"bg-standout",dense:"",filled:"",label:"Total Customers"},model:{value:t.totalCustomer,callback:function(e){t.totalCustomer=e},expression:"totalCustomer"}}):3===this.orderModel?a("q-input",{attrs:{"bg-color":"orange-1",standout:"bg-standout",dense:"",filled:"",label:"Select Customer",readonly:""},on:{click:function(e){return t.selectCustomer()}},model:{value:t.customerName,callback:function(e){t.customerName=e},expression:"customerName"}}):t._e()],1)]),1===t.orderModel?a("div",["{}"===JSON.stringify(t.selectedTable)?a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[t._m(0),t._l(t.tables.filter((function(t){return"Vacant"===t.status_name})),(function(e){return a("div",{key:e.id,staticClass:"col-2"},[a("TableChip",{attrs:{table:e},on:{tab:t.tab}})],1)})),a("div",{staticClass:"col-12"},[a("q-btn",{staticClass:"q-ml-xs q-mb-sm",attrs:{push:"",color:"orange-3",label:"Submit","text-color":"black",size:"0.8rem"},on:{click:function(e){return t.submitOrder()}}})],1)],2):a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[a("div",{staticClass:"col-12"},[a("p",[a("span",{staticClass:"text-h7 q-mt-lg",staticStyle:{"vertical-align":"middle"}},[t._v("Selected Table\n                    "),a("iconify-icon",{staticStyle:{"vertical-align":"middle"},attrs:{icon:"material-symbols:arrow-right-alt-rounded",width:"28"}})],1),a("q-chip",{staticClass:"table-chip q-ma-md relative-position",attrs:{color:"white"}},[a("q-avatar",{attrs:{color:"grey-2","text-color":"black"}},[a("iconify-icon",{attrs:{icon:"material-symbols:table-bar",width:"32"}})],1),t._v("\n                    "+t._s(t.selectedTable.number)+"\n                    "),a("i",{staticClass:"\n                          fa-solid fa-check\n                          absolute-top-right\n                          selected-one\n                          select-position\n                        "})],1),a("span",[a("q-btn",{staticClass:"q-ml-sm q-mb-sm q-mt-sm",attrs:{push:"",color:"light-green-1","text-color":"black",label:"Reselect Table"},on:{click:function(e){t.selectedTable={}}}})],1)],1)]),a("div",{staticClass:"q-mt-sm"},[a("q-btn",{staticClass:"q-mt-sm",attrs:{push:"",color:"orange-3",label:"Submit","text-color":"black",size:"0.8rem"},on:{click:function(e){return t.submitOrder()}}})],1)])]):a("div",{staticClass:"q-mt-sm"},[a("q-btn",{staticClass:"q-mt-sm q-ml-xs",attrs:{push:"",color:"orange-3",label:"Submit","text-color":"black",size:"0.8rem"},on:{click:function(e){return t.submitOrder()}}})],1),a("q-separator",{staticClass:"q-mt-md"}),a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[t._m(1),t._l(t.tables.filter((function(t){return"Occupied"===t.status_name})),(function(e){return a("div",{key:e.id,staticClass:"col-2"},[a("TableChip",{attrs:{table:e,occupied:!0},on:{tab:t.tab}})],1)})),t.occupiedTableStatus?t._e():a("div",[t._v("\n              No Tables Occupied!\n            ")])],2)],1)])]),a("q-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("CustomerList",{staticClass:"q-pa-sm",attrs:{select:!0},on:{selectedCustomer:t.selectedCustomer}})],1)],1)])},Wa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("p",{staticClass:"text-h7 q-ma-none"},[t._v("Select Table")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[a("p",{staticClass:"text-h7 q-ma-none"},[t._v("Occupied Table")])])}];const Ya=new WebSocket("wss://starternepal.com/wsrms"),Ga=new s["a"]({methods:{send(t){Ha(Ya,(function(){Ya.send(t)}))},check(){return 1===Ya.readyState}}});function Ha(t,e){setTimeout((function(){1===t.readyState?null!=e&&e():Ha(t,e)}),1e3)}Ya.onmessage=function(t){Ga.$emit("message",t)},Ya.onerror=function(t){Ga.$emit("error",t)};var Ja=Ga,Ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-pt-md"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"col-6"},[a("span",{staticClass:"q-mb-md pointer",on:{click:function(e){t.add=!0}}},[a("q-chip",{staticClass:"menu-chip",attrs:{color:"orange-1"}},[a("q-avatar",{staticClass:"b-r-8",attrs:{push:"",icon:"add",padding:"md md",type:"button",color:"orange-3",size:"2.5rem","text-color":"black"}}),t._v("\n          Add Customer\n        ")],1)],1)]),a("div",{staticClass:"col-6"},[a("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),a("div",{staticClass:"q-mt-md"},[a("q-markup-table",{attrs:{flat:"",bordered:""}},[a("thead",[a("tr",[a("th",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-left"},[t._v("Select")]),a("th",{staticClass:"text-left"},[t._v("Name")]),a("th",{staticClass:"text-center"},[t._v("Age / Gender")]),a("th",{staticClass:"text-center"},[t._v("Address")]),a("th",{staticClass:"text-center"},[t._v("Phone")]),a("th",{staticClass:"text-center"},[t._v("Pan No.")]),a("th",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}]},[t._v("Action")])])]),a("tbody",t._l(t.customers,(function(e){return a("tr",{key:e.id},[a("td",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-center"},[a("q-checkbox",{on:{input:function(a){return t.sendCustomer(e)}},model:{value:e.choose,callback:function(a){t.$set(e,"choose",a)},expression:"customer.choose"}})],1),a("td",{staticClass:"text-left"},[t._v(t._s(e.name))]),e.age&&e.gender?a("td",{staticClass:"text-center"},[t._v("\n            "+t._s(e.age)+" / "+t._s(e.gender)+"\n          ")]):e.age&&!e.gender?a("td",{staticClass:"text-center"},[t._v("\n            "+t._s(e.age)+" / -\n          ")]):!e.age&&e.gender?a("td",{staticClass:"text-center"},[t._v("\n            - / "+t._s(e.gender)+"\n          ")]):a("td",{staticClass:"text-center"},[t._v("-")]),e.address?a("td",{staticClass:"text-center"},[t._v("\n            "+t._s(e.address)+"\n          ")]):a("td",{staticClass:"text-center"},[t._v("-")]),e.phone_no?a("td",{staticClass:"text-center"},[t._v("\n            "+t._s(e.phone_no)+"\n          ")]):a("td",{staticClass:"text-center"},[t._v("-")]),e.pan_number?a("td",{staticClass:"text-center"},[t._v("\n            "+t._s(e.pan_number)+"\n          ")]):a("td",{staticClass:"text-center"},[t._v("-")]),a("td",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"text-center"},[a("span",[a("q-btn",{staticClass:"bg-confirm",attrs:{padding:"xs xs","text-color":"black",icon:"edit"},on:{click:function(a){return t.update(e)}}},[a("q-tooltip",[t._v("Edit")])],1)],1)])])})),0)]),a("q-dialog",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-sm"},[a("h6",{staticClass:"q-ma-none"},[t._v("Edit Customer Details")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("AddCustomer",{attrs:{edit:!0,sender:t.sender},on:{closeForm:t.closeForm}})],1)],1)],1),a("q-dialog",{model:{value:t.add,callback:function(e){t.add=e},expression:"add"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-sm"},[a("h6",{staticClass:"q-ma-none"},[t._v("Add Customer Details")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("AddCustomer",{attrs:{addCust:!0},on:{closeAdd:t.closeAdd}})],1)],1)],1)],1)])},Za=[],Xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-pt-md"},[a("form",{ref:"custForm"},[a("ValidationObserver",{ref:"customerForm"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-4"},[a("q-select",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Title",dense:"",options:t.titleOptions,"emit-value":"","map-options":""},model:{value:t.customer.title,callback:function(e){t.$set(t.customer,"title",e)},expression:"customer.title"}})],1),a("div",{staticClass:"col-4"},[a("validation-provider",{attrs:{name:"Customer Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Customer Name",dense:""},model:{value:t.customer.name,callback:function(e){t.$set(t.customer,"name",e)},expression:"customer.name"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-4"},[a("validation-provider",{attrs:{name:"Age",rules:"numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Age",dense:""},model:{value:t.customer.age,callback:function(e){t.$set(t.customer,"age",t._n(e))},expression:"customer.age"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-4"},[a("q-select",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Gender",dense:"",options:t.genderOptions},model:{value:t.customer.gender,callback:function(e){t.$set(t.customer,"gender",e)},expression:"customer.gender"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Address",dense:""},model:{value:t.customer.address,callback:function(e){t.$set(t.customer,"address",e)},expression:"customer.address"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Contact No.",dense:""},model:{value:t.customer.phone_no,callback:function(e){t.$set(t.customer,"phone_no",t._n(e))},expression:"customer.phone_no"}})],1),a("div",{staticClass:"col-4"},[a("validation-provider",{attrs:{name:"Pan Number",rules:"digits:9"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Pan No.",dense:""},model:{value:t.customer.pan_number,callback:function(e){t.$set(t.customer,"pan_number",t._n(e))},expression:"customer.pan_number"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1)])]),a("p",[t.edit?a("q-btn",{staticClass:"q-mt-md",attrs:{push:"",size:".8rem","text-color":"black",label:"Update",type:"button",color:"orange-3"},on:{click:function(e){return t.update()}}}):a("q-btn",{staticClass:"q-mt-md",attrs:{push:"",size:".8rem ","text-color":"black",label:"Add",type:"button",color:"orange-3"},on:{click:function(e){return t.add()}}})],1)],1)])])},ts=[];const es=`${A["a"]}/api/v1/customer/`;function as(t){return Object(D["a"])().post(es,t)}function ss(t={}){return Object(D["a"])().get(es,{params:t})}function ns(t){return Object(D["a"])().get(`${es}${t}/`)}function is(t,e){return Object(D["a"])().put(`${es}update/${t}/`,e)}function os(t){return Object(D["a"])().post(`${es}membership/discount_type`,t)}function rs(t={}){return Object(D["a"])().get(`${es}membership/discount_type`,{params:t})}function ls(t){return Object(D["a"])().delete(`${es}membership/discount_type/${t}/`)}function cs(t){return Object(D["a"])().post(`${es}membership/discount`,t)}function ds(t={}){return Object(D["a"])().get(`${es}membership/discount`,{params:t})}function ms(t,e){return Object(D["a"])().put(`${es}membership/discount/${t}/`,e)}Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"})),Object(Zt["c"])("digits",k()(k()({},Xt["b"]),{},{message:"{_field_} must contain exactly {length} numbers"}));var us={components:{ValidationProvider:Zt["b"],ValidationObserver:Zt["a"]},created(){this.checkEdit()},data(){return{customer:{title:"",name:"",age:null,gender:"",phone_no:null,address:"",pan_number:null},titleOptions:[{label:"Mr.",value:"mr"},{label:"Miss",value:"miss"},{label:"Mrs.",value:"mrs"}],genderOptions:["Male","Female"]}},props:{sender:{required:!0},edit:{required:!0},addCust:{}},methods:{checkEdit(){this.edit&&(this.customer.title=this.sender.title,this.customer.name=this.sender.name,this.customer.gender=this.sender.gender,this.customer.address=this.sender.address,this.customer.phone_no=this.sender.phone_no,this.customer.age=this.sender.age,this.customer.pan_number=this.sender.pan_number)},async add(){if(await this.$refs.customerForm.validate())try{await as(this.customer),this.$q.notify({message:"Customer Added",color:"green-5",icon:"info"}),this.customer={title:"",name:"",gender:"",address:"",phone_no:null,age:null,pan_number:null},this.addCust&&this.$emit("closeAdd")}catch(error){this.$q.notify({message:"Unable to Add Cutomer",color:"red-5",icon:"warning"})}},update(){this.$refs.customerForm.validate().then((t=>{t&&is(this.sender.id,this.customer).then((t=>{this.$q.notify({message:"Customer Updated",color:"green-5",icon:"info"}),this.$emit("closeForm")})).catch((t=>{this.$q.notify({message:"Unable to Update Cutomer",color:"red-5",icon:"warning"})}))}))}},computed:{helperName(){return this.customer.title}},watch:{helperName(){"mr"===this.customer.title?this.customer.gender="Male":"miss"===this.customer.title||"mrs"===this.customer.title?this.customer.gender="Female":this.customer.gender=""}}},ps=us,hs=Object(p["a"])(ps,Xa,ts,!1,null,null,null),vs=hs.exports;kt()(hs,"components",{QSelect:ae["a"],QInput:Et["a"],QBtn:xt["a"]});var bs={components:{AddCustomer:vs},created(){this.fetchCustomers()},activated(){this.fetchCustomers()},props:{select:{}},data:()=>({customers:[],sender:{},search:"",last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:5},status:!1,add:!1}),methods:{async fetchCustomers(){const{page:t,itemsPerPage:e}=this.options,a=await ss({search:this.search});this.customers=a.data.data,this.customers=this.customers.map((t=>k()(k()({},t),{},{choose:!1})))},update(t){this.sender=t,this.status=!0},closeForm(){this.status=!1,this.fetchCustomers()},sendCustomer(t){this.$emit("selectedCustomer",t)},closeAdd(){this.add=!1,this.fetchCustomers()}},watch:{search(){this.fetchCustomers()},current_page(){this.options.page=this.current_page,this.fetchCustomers()}}},gs=bs,_s=Object(p["a"])(gs,Ka,Za,!1,null,null,null),fs=_s.exports;kt()(_s,"components",{QChip:Ie["a"],QAvatar:xe["a"],QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QCheckbox:ie["a"],QBtn:xt["a"],QTooltip:we["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QSeparator:Bt["a"]}),kt()(_s,"directives",{ClosePopup:le["a"]});var ys=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{on:{click:t.selected}},[a("q-chip",{staticClass:"table-chip q-ma-md relative-position",attrs:{color:"white"}},[a("q-avatar",{attrs:{color:"grey-2","text-color":"black"}},["Occupied"===t.table.status_name?a("iconify-icon",{staticStyle:{color:"red"},attrs:{icon:"material-symbols:table-bar"}}):a("iconify-icon",{staticStyle:{color:"green"},attrs:{icon:"material-symbols:table-bar",width:"32"}})],1),t._v("\n            "+t._s(t.table.number)+"\n            ")],1)],1)])},qs=[],Cs={data:()=>({count:0}),props:{table:{required:!0}},methods:{selected(){if(null!=this.table.order_id){var t=this.$router.resolve({path:"currentorder",query:{id:this.table.order_id}});window.open(t.href,"_blank")}else this.count=this.count+1,this.$emit("tab",this.table),this.$emit("numba",this.count)}}},xs=Cs,ws=Object(p["a"])(xs,ys,qs,!1,null,null,null),ks=ws.exports;kt()(ws,"components",{QChip:Ie["a"],QAvatar:xe["a"]});var Is={components:{TableChip:ks,CustomerList:fs},data(){return{tables:[],selectedTable:{},customerName:"",time:"",orderModel:1,orderOptions:[{label:"Dine In",value:1},{label:"Takeaway",value:2},{label:"Delivery",value:3}],totalCustomer:null,dialog:!1,customerId:null,occupiedTableStatus:!0}},created(){this.fetchTable(),this.getTime(),Ja.$on("message",this.handleSignal),setInterval(function(){this.tableNoOptions=[],this.fetchTable(),this.getTime()}.bind(this),3e3)},methods:{handleSignal(t){switch(t=JSON.parse(t.data),t.type){case"register":break;case"order_complete":this.fetchTable(),this.getTime();break;case"payment_complete":this.fetchTable(),this.getTime();break}},async fetchTable(){const t=await ka();this.tables=t.data.table.data;var e=this.tables.filter((t=>"Occupied"===t.status_name));0===e.length&&(this.occupiedTableStatus=!1)},getTime(){let t=new Date;this.time=t.getHours()+":"+t.getMinutes()},tab(t){this.selectedTable=t},selectedCustomer(t){this.customerName=t.name,this.customerId=t.id,this.dialog=!1},selectCustomer(){this.dialog=!0},submitOrder(){const t=Date.now();if(1===this.orderModel){if(!this.selectedTable.id)return void this.$q.notify({message:"No Table Selected",color:"red-5",icon:"warning"});var e=this.$router.resolve({path:"currentorder",query:{orderEpochTime:t,type:this.orderModel,time:this.time,table_no:this.selectedTable.id,num_cust:this.totalCustomer}})}else if(2===this.orderModel)e=this.$router.resolve({path:"currentorder",query:{orderEpochTime:t,type:this.orderModel,time:this.time}});else{if(!this.customerName)return void this.$q.notify({message:"Enter Customer",color:"red-5",icon:"warning"});e=this.$router.resolve({path:"currentorder",query:{orderEpochTime:t,type:this.orderModel,time:this.time,customer_id:this.customerId}})}window.open(e.href,"_blank"),this.orderModel=1,this.customerName="",this.customerId=null,this.selectedTable={},this.totalCustomer=null}}},Ss=Is,Ds=a("7cbe"),As=a("ca78"),Fs=Object(p["a"])(Ss,Va,Wa,!1,null,null,null),Ts=Fs.exports;kt()(Fs,"components",{QSelect:ae["a"],QInput:Et["a"],QIcon:ne["a"],QPopupProxy:Ds["a"],QTime:As["a"],QBtn:xt["a"],QChip:Ie["a"],QAvatar:xe["a"],QSeparator:Bt["a"],QDialog:Nt["a"]}),kt()(Fs,"directives",{ClosePopup:le["a"]});var Os=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("q-tabs",{staticClass:"q-mt-sm ongoingSub",attrs:{dense:"",align:"justify","narrow-indicator":""},model:{value:t.ongoingSub,callback:function(e){t.ongoingSub=e},expression:"ongoingSub"}},[a("q-tab",{attrs:{name:"all",label:"All Orders"}}),a("q-tab",{attrs:{name:"sit",label:"Dine In"}}),a("q-tab",{attrs:{name:"take",label:"Take Away"}}),a("q-tab",{attrs:{name:"online",label:"Home Delivery"}})],1)],1)]),a("q-tab-panels",{staticClass:"text-black q-mb-sm q-mt-sm",attrs:{animated:"","transition-prev":"scale","transition-next":"scale"},model:{value:t.ongoingSub,callback:function(e){t.ongoingSub=e},expression:"ongoingSub"}},[a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"all"}},[0===t.orderList.length&&0===t.mergeOrders.length?a("div",[a("p",{staticClass:"q-mt-lg q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"mdi:food",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("\n            No orders right now!\n          ")])])]):a("div",[a("div",{staticClass:"row q-mt-xs q-mb-md"},[a("div",{staticClass:"col-4"},[a("q-btn",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{"box-shadow":"none"},attrs:{size:"0.8rem",push:"",label:"Merge Tables",color:"light-green-1","text-color":"black"},on:{click:function(e){t.mergeDialog=!0}}})],1),a("div",{staticClass:"col-8"},[t._v(" ")]),a("q-dialog",{attrs:{"full-width":"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.mergeDialog,callback:function(e){t.mergeDialog=e},expression:"mergeDialog"}},[a("MergeTable",{on:{closeForm:t.closeForm}})],1)],1),a("div",{staticClass:"row q-col-gutter-md"},[t._l(t.orderList,(function(e){return a("div",{key:e.id,staticClass:"col-6"},[a("q-card",{staticClass:"my-card ongoing-bg",staticStyle:{"border-radius":"8px"},attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"q-pa-none q-ma-none",staticStyle:{"min-height":"250px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-6"},[a("p",{staticClass:"text-subtitle2 q-mt-none q-mb-none q-pt-sm"},[t._v("\n                          Order Id:\n                          "),a("span",{staticStyle:{"font-weight":"800","font-size":"14px"}},[t._v("#"+t._s(e.id)+"\n                            "),a("span",{directives:[{name:"show",rawName:"v-show",value:"Complementary"===e.detail.order_status,expression:"order.detail.order_status === 'Complementary'"}]},[t._v("\n                              (Complementary Order)\n                            ")])])])]),a("div",{staticClass:"col-6"},[a("p",{staticClass:" text-subtitle2 q-mt-none q-mb-none float-right q-pt-sm"},[t._v("\n                          Order Time: "+t._s(e.time)+"\n                        ")])])]),a("q-separator"),a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-12"},[e.table?a("p",{staticClass:"text-subtitle2 q-mt-md q-mb-md"},[t._v("\n                          Table Number:\n                          "),a("q-chip",{staticClass:"table-no-chip",attrs:{color:"white"}},[a("q-avatar",{staticClass:"avatar-border",staticStyle:{border:"1px solid #f3f2f2"},attrs:{color:"orange-3","text-color":"white",size:"1.8rem"}},[a("iconify-icon",{attrs:{icon:"material-symbols:table-bar",width:"18"}})],1),t._v("\n                            "+t._s(e.table.number)+"\n                          ")],1)],1):e.customer?a("p",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("\n                          Name: "+t._s(e.customer.name)+"\n                        ")]):t._e()]),e.customer?a("div",{staticClass:"col-12 q-mb-sm"},[a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Contact No: "+t._s(e.customer.phone_no)+"\n                        ")])]):t._e(),e.customer?a("div",{staticClass:"col-12 q-mb-sm"},[a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Location: "+t._s(e.customer.address)+"\n                        ")])]):t._e(),a("div",{staticClass:"col-12"},[0!==e.orderfood.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Food:\n                          "),t._l(e.orderfood.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.food.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v(t._s(e.food.detail.name)+" -\n                            "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                            ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderbeverage.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Beverages:\n                          "),t._l(e.orderbeverage.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.beverage.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                            "+t._s(e.beverage.detail.name)+" -\n                            "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                            ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.order_inventory_item.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Inventory:\n                          "),t._l(e.order_inventory_item.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v(t._s(e.inventory_item.item.name)+" -\n                            "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                            ")]):a("span",[t._v(" "+t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderaddons.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Add-ons:\n                          "),t._l(e.orderaddons.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.addons.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                            "+t._s(e.addons.detail.name)+" -\n                            "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                            ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.order_combo_offer.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Combo:\n                          "),t._l(e.order_combo_offer.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                            "+t._s(e.combo_offer.name)+" -\n                            "),a("span",[t._v("\n                              "+t._s(e.quantity)+"\n                            ")])])}))],2):t._e()])])],1)])]),a("q-separator"),a("q-card-actions",{staticClass:"q-pa-sm"},["Complementary"!==e.detail.order_status?a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelDialog(e.id)}}}):a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel Complementary","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelComplementary(e.id)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:"Complementary"!==e.detail.order_status,expression:"order.detail.order_status !== 'Complementary'"}],staticClass:"bg-confirm",attrs:{push:"",label:"Edit Order","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.editOrderBtn(e)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:"Complementary"!==e.detail.order_status&&"Sit & Eat"===e.order_type,expression:"order.detail.order_status !== 'Complementary' && order.order_type === 'Sit & Eat'"}],staticClass:"bg-delete",attrs:{push:"",label:"Transfer","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.transfer(e)}}}),"Complementary"===e.detail.order_status?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Give Complementary"},on:{click:function(a){return t.complementaryDone(e.id)}}}):e.invoice?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Payment"},on:{click:function(a){return t.fetchSingleOrder(e.id)}}}):a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"View Order"},on:{click:function(a){return t.fetchSingleOrder(e.id)}}})],1)],1)],1)})),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-md"},t._l(t.mergeOrders,(function(e){return a("div",{key:e.id,staticClass:"col-6"},[a("q-card",{staticClass:"my-card ongoing-bg",staticStyle:{"border-radius":"8px"},attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"q-pa-none q-ma-none",staticStyle:{"min-height":"250px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-12"},[a("p",{staticClass:" text-subtitle2 q-mt-none q-mb-none q-pt-sm"},[t._v("\n                              Merge Order Number:\n                              "),a("span",{staticStyle:{"font-weight":"800","font-size":"14px"}},[t._v("#"+t._s(e.id)+"\n                                "),a("span",{directives:[{name:"show",rawName:"v-show",value:5===e.order_status,expression:"merge.order_status === 5"}]},[t._v("\n                                  (Complementary Order)\n                                ")])])])])]),a("q-separator"),a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-12"},[a("p",{staticClass:"text-subtitle2 q-mt-md q-mb-md"},[t._v("\n                              Tables Merged :\n                              "),t._l(e.merged_table.table,(function(e){return a("q-chip",{key:e.id,staticClass:"table-no-chip",attrs:{color:"white"}},[a("q-avatar",{staticClass:"avatar-border",staticStyle:{border:"1px solid #f3f2f2"},attrs:{color:"orange-3","text-color":"white",size:"1.8rem"}},[a("iconify-icon",{attrs:{icon:"material-symbols:table-bar",width:"18"}})],1),t._v("\n                                "+t._s(e.number)+"\n                              ")],1)}))],2)]),a("div",{staticClass:"col-12"},[0!==e.orderfood.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                              Food:\n                              "),t._l(e.orderfood.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                                "+t._s(e.food.detail.name)+" -\n                                "),e.complementary.complementary_quantity?a("span",[t._v("\n                                  "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                                ")]):a("span",[t._v("\n                                  "+t._s(e.quantity)+"\n                                ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderbeverage.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                              Beverages:\n                              "),t._l(e.orderbeverage.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                                "+t._s(e.beverage.detail.name)+" -\n                                "),e.complementary.complementary_quantity?a("span",[t._v("\n                                  "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                                ")]):a("span",[t._v("\n                                  "+t._s(e.quantity)+"\n                                ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.merge_order_inventory_item.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                              Inventory:\n                              "),t._l(e.merge_order_inventory_item.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                                "+t._s(e.inventory_item.item.name)+" -\n                                "),e.complementary.complementary_quantity?a("span",[t._v("\n                                  "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                                ")]):a("span",[t._v("\n                                  "+t._s(e.quantity)+"\n                                ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderaddons.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                              Addons:\n                              "),t._l(e.orderaddons.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                                "+t._s(e.addons.detail.name)+" -\n                                "),e.complementary.complementary_quantity?a("span",[t._v("\n                                  "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                                ")]):a("span",[t._v("\n                                  "+t._s(e.quantity)+"\n                                ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.merge_order_combo_offer.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                              Combo:\n                              "),t._l(e.merge_order_combo_offer.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                                "+t._s(e.combo_offer.name)+" -\n                                "),a("span",[t._v("\n                                  "+t._s(e.quantity)+"\n                                ")])])}))],2):t._e()])])],1)])]),a("q-separator"),a("q-card-actions",{staticClass:"q-pa-sm",attrs:{align:"left"}},[1===e.order_status?a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelDialog(e.id)}}}):a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel Complementary","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelComplementary(e.id)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:1===e.order_status,expression:"merge.order_status === 1"}],staticClass:"bg-confirm",attrs:{push:"",label:"Edit Order","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.editMergeOrder(e)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:1===e.order_status,expression:"merge.order_status === 1"}],staticClass:"bg-delete",attrs:{push:"",label:"Split","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.splitDialog(e.merged_table.id)}}}),5===e.order_status?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Give Complementary"},on:{click:function(e){return t.complementaryDone(t.order.id)}}}):e.invoice?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Payment"},on:{click:function(a){return t.fetchSingleMergedOrder(e.id)}}}):a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"View Order"},on:{click:function(a){return t.fetchSingleMergedOrder(e.id)}}})],1)],1)],1)})),0)])],2)])]),a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"sit"}},[0===t.sitAndEat.length&&0===t.mergeOrders.length?a("div",[a("p",{staticClass:"q-mt-lg q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"mdi:food",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("No orders right now!")])])]):a("div",[a("div",{staticClass:"row q-mt-xs q-mb-md"},[a("div",{staticClass:"col-4"},[a("q-btn",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{"box-shadow":"none"},attrs:{size:"0.8rem",push:"",label:"Merge Tables",color:"light-green-1","text-color":"black"},on:{click:function(e){t.mergeDialog=!0}}})],1),a("div",{staticClass:"col-8"},[t._v(" ")]),a("q-dialog",{attrs:{"full-width":"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.mergeDialog,callback:function(e){t.mergeDialog=e},expression:"mergeDialog"}},[a("MergeTable",{on:{closeForm:t.closeForm}})],1)],1),a("div",{staticClass:"row q-col-gutter-md"},[t._l(t.sitAndEat,(function(e){return a("div",{key:e.id,staticClass:"col-6"},[a("q-card",{staticClass:"my-card ongoing-bg",staticStyle:{"border-radius":"8px"},attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"q-pa-none q-ma-none",staticStyle:{"min-height":"250px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-6"},[a("p",{staticClass:"text-subtitle2 q-mt-none q-mb-none q-pt-sm"},[t._v("\n                          Order Id:\n                          "),a("span",{staticStyle:{"font-weight":"800","font-size":"14px"}},[t._v("#"+t._s(e.id)+"\n                            "),a("span",{directives:[{name:"show",rawName:"v-show",value:"Complementary"===e.detail.order_status,expression:"order.detail.order_status === 'Complementary'"}]},[t._v("\n                              (Complementary Order)\n                            ")])])])]),a("div",{staticClass:"col-6"},[a("p",{staticClass:" text-subtitle2 q-mt-none q-mb-none float-right q-pt-sm"},[t._v("\n                          Order Time: "+t._s(e.time)+"\n                        ")])])]),a("q-separator"),a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-12"},[e.table?a("p",{staticClass:"text-subtitle2 q-mt-md q-mb-md"},[t._v("\n                          Table Number:\n                          "),a("q-chip",{staticClass:"table-no-chip",attrs:{color:"white"}},[a("q-avatar",{staticClass:"avatar-border",staticStyle:{border:"1px solid #f3f2f2"},attrs:{color:"orange-3","text-color":"white",size:"1.8rem"}},[a("iconify-icon",{attrs:{icon:"material-symbols:table-bar",width:"18"}})],1),t._v("\n                            "+t._s(e.table.number)+"\n                          ")],1)],1):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderfood.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Food:\n                          "),t._l(e.orderfood.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.food.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v(t._s(e.food.detail.name)+" -\n                            "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                            ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderbeverage.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Beverages:\n                          "),t._l(e.orderbeverage.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.beverage.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                            "+t._s(e.beverage.detail.name)+" -\n                            "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                            ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.order_inventory_item.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Inventory:\n                          "),t._l(e.order_inventory_item.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v(t._s(e.inventory_item.item.name)+" -\n                            "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                            ")]):a("span",[t._v(" "+t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderaddons.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Add-ons:\n                          "),t._l(e.orderaddons.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.addons.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                            "+t._s(e.addons.detail.name)+" -\n                            "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                            ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.order_combo_offer.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Combo:\n                          "),t._l(e.order_combo_offer.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                            "+t._s(e.combo_offer.name)+" -\n                            "),a("span",[t._v("\n                              "+t._s(e.quantity)+"\n                            ")])])}))],2):t._e()])])],1)])]),a("q-separator"),a("q-card-actions",{staticClass:"q-pa-sm"},["Complementary"!==e.detail.order_status?a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelDialog(e.id)}}}):a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel Complementary","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelComplementary(e.id)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:"Complementary"!==e.detail.order_status,expression:"order.detail.order_status !== 'Complementary'"}],staticClass:"bg-confirm",attrs:{push:"",label:"Edit Order","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.editOrderBtn(e)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:"Complementary"!==e.detail.order_status,expression:"order.detail.order_status !== 'Complementary'"}],staticClass:"bg-delete",attrs:{push:"",label:"Transfer","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.transfer(e)}}}),"Complementary"===e.detail.order_status?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Give Complementary"},on:{click:function(a){return t.complementaryDone(e.id)}}}):e.invoice?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Payment"},on:{click:function(a){return t.fetchSingleOrder(e.id)}}}):a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"View Order"},on:{click:function(a){return t.fetchSingleOrder(e.id)}}})],1)],1)],1)})),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-md"},t._l(t.mergeOrders,(function(e){return a("div",{key:e.id,staticClass:"col-6"},[a("q-card",{staticClass:"my-card ongoing-bg",staticStyle:{"border-radius":"8px"},attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"q-pa-none q-ma-none",staticStyle:{"min-height":"250px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-12"},[a("p",{staticClass:" text-subtitle2 q-mt-none q-mb-none q-pt-sm"},[t._v("\n                              Merge Order Number:\n                              "),a("span",{staticStyle:{"font-weight":"800","font-size":"14px"}},[t._v("#"+t._s(e.id)+"\n                                "),a("span",{directives:[{name:"show",rawName:"v-show",value:5===e.order_status,expression:"merge.order_status === 5"}]},[t._v("\n                                  (Complementary Order)\n                                ")])])])])]),a("q-separator"),a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-12"},[a("p",{staticClass:"text-subtitle2 q-mt-md q-mb-md"},[t._v("\n                              Tables Merged :\n                              "),t._l(e.merged_table.table,(function(e){return a("q-chip",{key:e.id,staticClass:"table-no-chip",attrs:{color:"white"}},[a("q-avatar",{staticClass:"avatar-border",staticStyle:{border:"1px solid #f3f2f2"},attrs:{color:"orange-3","text-color":"white",size:"1.8rem"}},[a("iconify-icon",{attrs:{icon:"material-symbols:table-bar",width:"18"}})],1),t._v("\n                                "+t._s(e.number)+"\n                              ")],1)}))],2)]),a("div",{staticClass:"col-12"},[0!==e.orderfood.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                              Food:\n                              "),t._l(e.orderfood.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                                "+t._s(e.food.detail.name)+" -\n                                "),e.complementary.complementary_quantity?a("span",[t._v("\n                                  "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                                ")]):a("span",[t._v("\n                                  "+t._s(e.quantity)+"\n                                ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderbeverage.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                              Beverages:\n                              "),t._l(e.orderbeverage.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                                "+t._s(e.beverage.detail.name)+" -\n                                "),e.complementary.complementary_quantity?a("span",[t._v("\n                                  "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                                ")]):a("span",[t._v("\n                                  "+t._s(e.quantity)+"\n                                ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.merge_order_inventory_item.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                              Inventory:\n                              "),t._l(e.merge_order_inventory_item.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                                "+t._s(e.inventory_item.item.name)+" -\n                                "),e.complementary.complementary_quantity?a("span",[t._v("\n                                  "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                                ")]):a("span",[t._v("\n                                  "+t._s(e.quantity)+"\n                                ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderaddons.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                              Addons:\n                              "),t._l(e.orderaddons.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                                "+t._s(e.addons.detail.name)+" -\n                                "),e.complementary.complementary_quantity?a("span",[t._v("\n                                  "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                                ")]):a("span",[t._v("\n                                  "+t._s(e.quantity)+"\n                                ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.merge_order_combo_offer.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                              Combo:\n                              "),t._l(e.merge_order_combo_offer.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                                "+t._s(e.combo_offer.name)+" -\n                                "),a("span",[t._v("\n                                  "+t._s(e.quantity)+"\n                                ")])])}))],2):t._e()])])],1)])]),a("q-separator"),a("q-card-actions",{staticClass:"q-pa-sm",attrs:{align:"left"}},[1===e.order_status?a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelDialog(e.id)}}}):a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel Complementary","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelComplementary(e.id)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:1===e.order_status,expression:"merge.order_status === 1"}],staticClass:"bg-confirm",attrs:{push:"",label:"Edit Order","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.editMergeOrder(e)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:1===e.order_status,expression:"merge.order_status === 1"}],staticClass:"bg-delete",attrs:{push:"",label:"Split","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.splitDialog(e.merged_table.id)}}}),1===e.order_status?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Payment"},on:{click:function(a){return t.fetchSingleMergedOrder(e.id)}}}):5===e.order_status?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Give Complemenytary"},on:{click:function(a){return t.complementaryDone(e.id)}}}):t._e(),5===e.order_status?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Give Complementary"},on:{click:function(e){return t.complementaryDone(t.order.id)}}}):e.invoice?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Payment"},on:{click:function(e){return t.fetchSingleOrder(t.order.id)}}}):a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"View Order"},on:{click:function(e){return t.fetchSingleOrder(t.order.id)}}})],1)],1)],1)})),0)])],2)])]),a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"take"}},[0!==t.takeAway.length?a("div",{staticClass:"row q-col-gutter-md"},t._l(t.takeAway,(function(e){return a("div",{key:e.id,staticClass:"col-6"},[a("q-card",{staticClass:"my-card ongoing-bg",staticStyle:{"border-radius":"8px"},attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"q-pa-none q-ma-none",staticStyle:{"min-height":"250px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-6"},[a("p",{staticClass:"text-subtitle2 q-mt-none q-mb-none q-pt-sm"},[t._v("\n                        Order Id:\n                        "),a("span",{staticStyle:{"font-weight":"800","font-size":"14px"}},[t._v("#"+t._s(e.id))])])]),a("div",{staticClass:"col-6"},[a("p",{staticClass:" text-subtitle2 q-mt-none q-mb-none float-right q-pt-sm"},[t._v("\n                        Order Time: "+t._s(e.time)+"\n                      ")])])]),a("q-separator"),a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-12"},[0!==e.orderfood.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Food:\n                        "),t._l(e.orderfood.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.food.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                          "+t._s(e.food.detail.name)+" -\n                          "),e.complementary.complementary_quantity?a("span",[t._v("\n                            "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                          ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderbeverage.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Beverages:\n                        "),t._l(e.orderbeverage.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.beverage.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                          "+t._s(e.beverage.detail.name)+" -\n                          "),e.complementary.complementary_quantity?a("span",[t._v("\n                            "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                          ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.order_inventory_item.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Inventory:\n                        "),t._l(e.order_inventory_item.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v(t._s(e.inventory_item.item.name)+" -\n                          "),e.complementary.complementary_quantity?a("span",[t._v("\n                            "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                          ")]):a("span",[t._v(" "+t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderaddons.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Add-ons:\n                        "),t._l(e.orderaddons.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.addons.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                          "+t._s(e.addons.detail.name)+" -\n                          "),e.complementary.complementary_quantity?a("span",[t._v("\n                            "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                          ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.order_combo_offer.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Combo:\n                        "),t._l(e.order_combo_offer.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                          "+t._s(e.combo_offer.name)+" -\n                          "),a("span",[t._v("\n                            "+t._s(e.quantity)+"\n                          ")])])}))],2):t._e()])])],1)])]),a("q-separator"),a("q-card-actions",{staticClass:"q-pa-sm",attrs:{align:"left"}},["Complementary"!==e.detail.order_status?a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelDialog(e.id)}}}):a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel Complementary","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelComplementary(e.id)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:"Complementary"!==e.detail.order_status,expression:"order.detail.order_status !== 'Complementary'"}],staticClass:"bg-confirm",attrs:{push:"",label:"Edit Order","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.editOrderBtn(e)}}}),"Complementary"===e.detail.order_status?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Give Complementary"},on:{click:function(a){return t.complementaryDone(e.id)}}}):e.invoice?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Payment"},on:{click:function(a){return t.fetchSingleOrder(e.id)}}}):a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"View Order"},on:{click:function(a){return t.fetchSingleOrder(e.id)}}})],1)],1)],1)})),0):a("div",[a("p",{staticClass:"q-mt-lg q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"mdi:food",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("No takeaway order right now!")])])])]),a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"online"}},[0!==t.delivery.length?a("div",{staticClass:"row q-col-gutter-md"},t._l(t.delivery,(function(e){return a("div",{key:e.id,staticClass:"col-6"},[a("q-card",{staticClass:"my-card ongoing-bg",staticStyle:{"border-radius":"8px"},attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"q-pa-none q-ma-none",staticStyle:{"min-height":"250px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-6"},[a("p",{staticClass:"text-subtitle2 q-mt-none q-mb-none q-pt-sm"},[t._v("\n                        Order Id:\n                        "),a("span",{staticStyle:{"font-weight":"800","font-size":"14px"}},[t._v("#"+t._s(e.id))])])]),a("div",{staticClass:"col-6"},[a("p",{staticClass:" text-subtitle2 q-mt-none q-mb-none float-right q-pt-sm"},[t._v("\n                        Order Time: "+t._s(e.time)+"\n                      ")])])]),a("q-separator"),a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-12 q-mb-sm"},[e.customer?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Name: "+t._s(e.customer.name)+"\n                      ")]):t._e()]),a("div",{staticClass:"col-12 q-mb-sm"},[e.customer?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Contact No: "+t._s(e.customer.phone_no)+"\n                      ")]):t._e()]),a("div",{staticClass:"col-12 q-mb-sm"},[e.customer?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Location: "+t._s(e.customer.address)+"\n                      ")]):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderfood.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Food:\n                        "),t._l(e.orderfood.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.food.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v(t._s(e.food.detail.name)+" -\n                          "),e.complementary.complementary_quantity?a("span",[t._v(t._s(e.quantity+e.complementary.complementary_quantity))]):a("span",[t._v("\n                            "+t._s(e.quantity)+"\n                          ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderbeverage.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Beverages:\n                        "),t._l(e.orderbeverage.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.beverage.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                          "+t._s(e.beverage.detail.name)+"-\n                          "),e.complementary.complementary_quantity?a("span",[t._v("\n                            "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                          ")]):a("span",[t._v("\n                            "+t._s(e.quantity)+"\n                          ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.order_inventory_item.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Inventory:\n                        "),t._l(e.order_inventory_item.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v(t._s(e.inventory_item.item.name)+" -\n                          "),e.complementary.complementary_quantity?a("span",[t._v("\n                            "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                          ")]):a("span",[t._v(" "+t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderaddons.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Add-ons:\n                        "),t._l(e.orderaddons.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.addons.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                          "+t._s(e.addons.detail.name)+" -\n                          "),e.complementary.complementary_quantity?a("span",[t._v("\n                            "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                          ")]):a("span",[t._v("\n                            "+t._s(e.quantity)+"\n                          ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.order_combo_offer.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                        Combo:\n                        "),t._l(e.order_combo_offer.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                          "+t._s(e.combo_offer.name)+" -\n                          "),a("span",[t._v("\n                            "+t._s(e.quantity)+"\n                          ")])])}))],2):t._e()])])],1)])]),a("q-separator"),a("q-card-actions",{staticClass:"q-pa-sm",attrs:{align:"left"}},["Complementary"!==e.detail.order_status?a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelDialog(e.id)}}}):a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel Complementary","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelComplementary(e.id)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:"Complementary"!==e.detail.order_status,expression:"order.detail.order_status !== 'Complementary'"}],staticClass:"bg-confirm",attrs:{push:"",label:"Edit Order","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.editOrderBtn(e)}}}),"Complementary"===e.detail.order_status?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Give Complementary"},on:{click:function(a){return t.complementaryDone(e.id)}}}):e.invoice?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Payment"},on:{click:function(a){return t.fetchSingleOrder(e.id)}}}):a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"View Order"},on:{click:function(a){return t.fetchSingleOrder(e.id)}}})],1)],1)],1)})),0):a("div",[a("p",{staticClass:"q-mt-lg q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"mdi:food",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("No home delivery order right now!")])])])])],1),a("q-dialog",{attrs:{"full-width":""},model:{value:t.tableShow,callback:function(e){t.tableShow=e},expression:"tableShow"}},[a("TransferTable",{attrs:{orderId:t.orderId},on:{closeTab:t.closeTab}})],1),a("q-dialog",{model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("ConfirmLayout",{on:{confirmItem:t.confirmItem}})],1),a("q-dialog",{model:{value:t.canc,callback:function(e){t.canc=e},expression:"canc"}},[a("DeleteLayout",{on:{deleteItem:t.deleteItem}})],1),a("q-dialog",{model:{value:t.compCancel,callback:function(e){t.compCancel=e},expression:"compCancel"}},[a("DeleteLayout",{attrs:{comp:!0},on:{compDelete:t.compDelete}})],1),a("q-dialog",{model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[a("ConfirmLayout",{attrs:{free:!0},on:{freeItem:t.freeItem}})],1)],1)},$s=[],Qs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-pt-none q-pa-xs q-pl-md"},[a("div",{staticClass:"text-h6"},[t._v("Merge Tables")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{"bg-color":"green",flat:"",icon:"close",dense:""}})],1),a("q-separator"),a("q-card-section",[0===t.filterType.length||0===t.orderList.length?a("div",[a("p",{staticClass:"q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"ic:round-table-bar",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("No Tables Available for Merging")])])]):a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"my-card"},[a("q-card-section",{staticClass:"q-pa-none q-ma-none"},[a("div",{staticClass:"row q-col-gutter-md"},[t._l(t.filterType,(function(e){return a("div",{key:e.id,staticClass:"col-3"},[a("div",[e.invoice?a("q-chip",{staticClass:"table-chip q-ma-md relative-position",attrs:{disable:"",color:"white"}},[a("q-avatar",{attrs:{color:"grey-2","text-color":"black"}},[a("iconify-icon",{attrs:{icon:"material-symbols:table-bar",width:"32"}})],1),a("p",{staticClass:"text-subtitle2 q-mb-xs text-center"},[t._v("\n                      "+t._s(e.table.number)+"\n                    ")]),a("q-tooltip",[a("span",[t._v("Invoice For Table Already Exist")])])],1):a("q-chip",{staticClass:"table-chip q-ma-md relative-position",attrs:{color:"white"}},[a("q-avatar",{attrs:{color:"grey-2","text-color":"black"},on:{click:function(a){return t.sendMergeInfo(e)}}},[a("iconify-icon",{attrs:{icon:"material-symbols:table-bar",width:"32"}})],1),a("p",{staticClass:"text-subtitle2 q-mb-xs text-center",on:{click:function(a){return t.sendMergeInfo(e)}}},[t._v("\n                      "+t._s(e.table.number)+"\n                    ")]),a("i",{staticClass:"fa-solid fa-check absolute-top-right selected select-position"})],1)],1),a("div",{staticClass:"row"},[t.table.includes(e.table.id)?a("div",{staticClass:"col-2 q-ml-xl q-mb-sm"},[a("q-avatar",{staticStyle:{cursor:"pointer"},attrs:{title:"Remove",color:"red-5","text-color":"white",icon:"close",size:"2em"},on:{click:function(a){return t.removeMergeInfo(e)}}})],1):t._e()])])})),a("div",{staticClass:"col-12 q-mb-md q-ml-sm"},[t.count>1?a("q-btn",{staticClass:"bg-confirm text-black",attrs:{size:".8rem",push:"",label:"Confirm Merging",padding:"xs md","text-color":"black"},on:{click:function(e){return t.finalMerge()}}}):t._e()],1)],2)])],1)],1)])])],1)},Ms=[],Es=a("148b"),Rs={data(){return{orderList:[],options:{page:1,itemsPerPage:14},table:[],mergeFinal:{},mergeTable:{},count:0}},created(){this.fetchOrder()},computed:{filterType(){return this.orderList.filter((t=>"Sit & Eat"===t.order_type))}},methods:{fetchOrder(){const{page:t,itemsPerPage:e}=this.options;Z({page:t,page_size:e,ongoing:1,merge:1}).then((t=>{this.orderList=t.data.order.data}))},finalMerge(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:60,message:"Merging Tables !",messageColor:"white"}),this.$set(this.mergeTable,"table",this.table);const t=[];t.push(this.mergeTable),this.$set(this.mergeFinal,"merge_table",t),at(this.mergeFinal).then((t=>{this.$q.loading.hide(),this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Merge Successful"}),this.fetchOrder(),this.table=[],this.count=0,this.$emit("closeForm")})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response.data.merge_table[0]})}))},sendMergeInfo(t){this.table.includes(t.table.id)||(this.table.push(t.table.id),this.count=this.count+1)},removeMergeInfo(t){var e=this.table.indexOf(t.table.id);e>-1&&(this.table.splice(e,1),this.count=this.count-1)}}},Bs=Rs,Ps=Object(p["a"])(Bs,Qs,Ms,!1,null,null,null),Ns=Ps.exports;kt()(Ps,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QBtn:xt["a"],QSeparator:Bt["a"],QChip:Ie["a"],QAvatar:xe["a"],QTooltip:we["a"]}),kt()(Ps,"directives",{ClosePopup:le["a"]});var js=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-pt-none q-pa-xs q-pl-md"},[a("div",{staticClass:"text-h6 "},[t._v("\n            Select Table to Transfer Order\n        ")])]),a("q-separator"),a("q-card-section",[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"my-card "},[a("q-card-section",{staticClass:"q-pa-none q-ma-none"},[a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},t._l(t.tables,(function(e){return a("div",{key:e.id,staticClass:"col-2"},[a("TableChip",{attrs:{table:e},on:{tab:t.tab}})],1)})),0)])],1)],1)])]),a("q-dialog",{model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("ConfirmLayout",{on:{confirmItem:t.confirmItem}})],1)],1)},Ls=[],zs=a("9149"),Us=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticClass:"card-shadow",staticStyle:{width:"250px"}},[a("q-card-section",{staticClass:"row items-center q-pb-none text-center"},[a("div",{staticClass:"text-h6"},[t._v("Are you sure?")]),a("q-space")],1),a("q-card-section",{attrs:{align:"right"}},[t.free?a("q-btn",{attrs:{color:"green-5",label:"Yes",text:""},on:{click:function(e){return t.freeFunc()}}}):a("q-btn",{attrs:{color:"green-5",label:"Yes",text:""},on:{click:function(e){return t.confirm()}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"red-5",label:"No"}})],1)],1)],1)},Vs=[],Ws={props:{free:{}},methods:{confirm(){this.$emit("confirmItem")},freeFunc(){this.$emit("freeItem")}}},Ys=Ws,Gs=Object(p["a"])(Ys,Us,Vs,!1,null,null,null),Hs=Gs.exports;kt()(Gs,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QBtn:xt["a"]}),kt()(Gs,"directives",{ClosePopup:le["a"]});var Js={components:{TableChip:ks,ConfirmLayout:Hs},data:()=>({tables:[],confirm:!1,tableId:null}),props:{orderId:{required:!0}},created(){this.fetchTable()},methods:{async fetchTable(){const t=await ka({table:2});this.tables=t.data.table.data},tab(t){this.tableId=t.id,this.confirm=!0},confirmItem(){this.confirm=!1,this.$q.loading.show({spinner:zs["a"],spinnerColor:"white",spinnerSize:60,message:"Processing !",messageColor:"white"});const t={table_id:this.tableId};tt(this.orderId,t).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Transfer Successful"}),this.$q.loading.hide(),this.$emit("closeTab")}))}}},Ks=Js,Zs=Object(p["a"])(Ks,js,Ls,!1,null,null,null),Xs=Zs.exports;kt()(Zs,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSeparator:Bt["a"],QDialog:Nt["a"]});var tn={components:{MergeTable:Ns,TransferTable:Xs,DeleteLayout:_e,ConfirmLayout:Hs},data(){return{ongoingSub:"all",orderList:[],quantity:1,discount:0,mergeDialog:!1,options:{page:1,itemsPerPage:14},singleOrder:{},maximizedToggle:!0,mergeOrders:[],orderId:null,tableShow:!1,splitId:null,cancelId:null,split:!1,canc:!1,compCancel:!1,compId:null,confirmDialog:!1}},created(){this.fetchOrder(),this.fetchMergeOrder(),setInterval(function(){this.fetchOrder(),this.fetchMergeOrder()}.bind(this),3e3),Ja.$on("message",this.handleSignal)},computed:{sitAndEat(){return this.orderList.filter((t=>"Sit & Eat"===t.order_type))},takeAway(){return this.orderList.filter((t=>"Take Away"===t.order_type))},delivery(){return this.orderList.filter((t=>"Online"===t.order_type))}},methods:{handleSignal(t){switch(t=JSON.parse(t.data),t.type){case"update_order":this.orderList=[],this.fetchOrder(),this.mergeOrders=[],this.fetchMergeOrder();break;case"invoice_generated":this.orderList=[],this.fetchOrder(),this.mergeOrders=[],this.fetchMergeOrder();break;case"payment_complete":this.orderList=[],this.fetchOrder(),this.mergeOrders=[],this.fetchMergeOrder();break}},fetchOrder(){const{page:t,itemsPerPage:e}=this.options;Z({page:t,page_size:e,ongoing:1,merge:1}).then((t=>{this.orderList=t.data.order.data}))},async fetchMergeOrder(){const t=await st({ongoing:1});this.mergeOrders=t.data.data},fetchSingleOrder(t){var e=this.$router.resolve({path:"paymentinvoice",query:{id:t}});window.open(e.href,"_blank")},complementaryDone(t){this.compId=t,this.confirmDialog=!0},async freeItem(){if(this.compId.startsWith("O"))try{await et(this.compId,{complementary:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Complementary Given!"}),this.confirmDialog=!1,this.compId=null,this.fetchOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Error when giving Complementary!"}),this.confirmDialog=!1,this.compId=null}else if(this.compId.startsWith("M"))try{await nt(this.compId,{complementary:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Complementary Given!"}),this.confirmDialog=!1,this.compId=null,this.fetchMergeOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Error when giving Complementary!"}),this.confirmDialog=!1,this.compId=null}},cancelDialog(t){this.canc=!0,this.cancelId=t},cancelComplementary(t){this.compCancel=!0,this.cancelId=t},async compDelete(){if(this.cancelId.startsWith("O"))try{await et(this.cancelId,{cancel:!0,complementary:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Complementary Cancelled"}),this.cancelId=null,this.compCancel=!1,this.fetchOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable To Cancel Order"}),this.cancelId=null,this.compCancel=!1}else if(this.cancelId.startsWith("M"))try{await nt(this.cancelId,{cancel:!0,complementary:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Complementary Cancelled"}),this.cancelId=null,this.compCancel=!1,this.fetchMergeOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable To Cancel Order"}),this.cancelId=null,this.compCancel=!1}},async deleteItem(){if(this.cancelId.startsWith("O"))try{await et(this.cancelId,{cancel:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Order Cancelled"}),this.cancelId=null,this.canc=!1,this.fetchOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable To Cancel Order"}),this.cancelId=null,this.canc=!1}else if(this.cancelId.startsWith("M"))try{await nt(this.cancelId,{cancel:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Order Cancelled"}),this.cancelId=null,this.canc=!1,this.fetchMergeOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable To Cancel Order"}),this.cancelId=null,this.canc=!1}},transfer(t){t.invoice?this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Invoice for Order Already Exist! Cancel Current Invoice to Proceed"}):(this.tableShow=!0,this.orderId=t.id)},closeTab(){this.tableShow=!1,this.fetchOrder(),this.fetchMergeOrder()},fetchSingleMergedOrder(t){var e=this.$router.resolve({path:"mergepaymentinvoice",query:{id:t}});window.open(e.href,"_blank")},splitDialog(t){this.splitId=t,this.split=!0},confirmItem(){const t={status:3};dt(this.splitId,t).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Split Successful"}),this.split=!1,this.splitId=!1,this.fetchOrder(),this.fetchMergeOrder()})).catch((t=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response.data[0]}),this.split=!1,this.splitId=!1}))},editMergeOrder(t){var e=this.$router.resolve({path:"editmergeorder",query:{merge_id:t.id}});window.open(e.href,"_blank")},editOrderBtn(t){if(t.invoice)this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Invoice for Order Already Created! Cancel Current Invoice to Proceed"});else{var e=this.$router.resolve({path:"currentorder",query:{id:t.id}});window.open(e.href,"_blank")}},closeForm(){this.mergeDialog=!1,this.fetchOrder(),this.fetchMergeOrder()}}},en=tn,an=a("4b7e"),sn=Object(p["a"])(en,Os,$s,!1,null,null,null),nn=sn.exports;kt()(sn,"components",{QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"],QBtn:xt["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSeparator:Bt["a"],QChip:Ie["a"],QAvatar:xe["a"],QBadge:ke["a"],QCardActions:an["a"]});var on=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("q-tabs",{staticClass:"q-mt-md",staticStyle:{padding:"1px !important"},attrs:{dense:"",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"completed",label:"Completed Order List"}}),a("q-tab",{attrs:{name:"credit",label:"Credit List"}}),a("q-tab",{attrs:{name:"refund",label:"Refund List"}})],1)],1)]),a("q-tab-panels",{staticClass:"text-black",attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"completed"}},[a("CompletedOrderList")],1),a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"credit"}},[a("Credit")],1),a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"refund"}},[a("RefundOrderList")],1)],1)],1)},rn=[],ln=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Customer Search",type:"text",readonly:""},on:{click:function(e){t.customerStatus=!0}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-md-4"},[a("q-radio",{attrs:{val:"A.D",label:"English"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}}),a("q-radio",{attrs:{val:"B.S",label:"Nepali"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-md-4"},[a("q-input",{ref:"fromDate",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"From Date",type:"date"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1):a("div",{staticClass:"col-md-4"},[a("v-nepalidatepicker",{attrs:{placeholder:"From Date",classValue:"datepicker form-control"},model:{value:t.bsFromDate,callback:function(e){t.bsFromDate=e},expression:"bsFromDate"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-md-4"},[a("q-input",{ref:"pdate",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"To Date",type:"date"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1):a("div",{staticClass:"col-md-4"},[a("v-nepalidatepicker",{attrs:{placeholder:"To Date",classValue:"datepicker form-control",label:"Date"},model:{value:t.bsToDate,callback:function(e){t.bsToDate=e},expression:"bsToDate"}})],1)])]),a("div",{staticClass:"col-12 q-mt-xs"},[a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.8rem",label:"Search"},on:{click:function(e){return t.searchData()}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:this.search,expression:"this.search"}],staticClass:"q-ml-sm bg-delete",attrs:{push:"",size:"0.8rem",label:"Clear"},on:{click:function(e){return t.clear()}}})],1)]),0===t.payArray.data.length?a("div",[a("p",{staticClass:"q-mt-lg q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"ic:outline-credit-card-off",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("\n                No Completed Order\n            ")])])]):a("div",{staticClass:"row q-mt-sm q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("q-markup-table",{attrs:{bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Invoice No.")]),a("th",[t._v("Order Type")]),a("th",[t._v("Table No.")]),a("th",[t._v("Customer")]),a("th",[t._v("Address")]),a("th",[t._v("Contact No.")]),a("th",[t._v("Order Time")]),a("th",[t._v("Total Amount")]),a("th",[t._v("Action")])])]),a("tbody",{directives:[{name:"show",rawName:"v-show",value:0!==t.payArray.data.length,expression:"payArray.data.length !== 0"}]},t._l(t.payArray.data,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.detailBilling(e)}}},[t._v(t._s(e.id))])]),e.is_merged?a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Dine In")])],1):a("td",{staticClass:"text-center"},["Sit & Eat"===e.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Dine\n                                In")]):t._e(),"Take Away"===e.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Takeaway")]):t._e(),"Online"===e.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Online")]):t._e()],1),e.invoice.order&&e.invoice.order.table?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.order.table.number)+"\n                        ")]):e.invoice.merged_order?a("td",{staticClass:"text-center"},t._l(e.invoice.merged_order.merged_table.table,(function(s,n){return a("span",{key:s.id},[t._v("\n                                "+t._s(s.number)),n!==e.invoice.merged_order.merged_table.table.length-1?a("span",[t._v(",\n                                ")]):t._e()])})),0):a("td",{staticClass:"text-center"},[t._v("-")]),e.invoice.membership?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.membership.customer.name)+"\n                        ")]):e.invoice.order&&e.invoice.order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.order.customer.name)+"\n                        ")]):e.invoice.merged_order&&e.invoice.merged_order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.merged_order.customer.name)+"\n                        ")]):a("td",{staticClass:"text-center"},[t._v("-")]),e.invoice.membership?a("td",{staticClass:"text-center"},[e.invoice.membership.customer?a("p",{staticClass:"q-ma-none q-pa-none"},[e.invoice.membership.customer.address?a("span",[t._v("\n                                    "+t._s(e.invoice.membership.customer.address)+"\n                                ")]):a("span",[t._v(" -")])]):a("p",[t._v(" -")])]):e.invoice.order&&e.invoice.order.customer?a("td",{staticClass:" text-center"},[e.invoice.order.customer.address?a("span",[t._v("\n                                "+t._s(e.invoice.order.customer.address)+"\n                            ")]):a("span",[t._v("-")])]):e.invoice.merge_order&&e.invoice.merged_order.customer?a("td",{staticClass:" text-center"},[e.invoice.merged_order.customer.address?a("span",[t._v("\n                                "+t._s(e.invoice.merged_order.customer.address)+"\n                            ")]):a("span",[t._v("-")])]):a("td",{staticClass:"text-center"},[t._v("-")]),e.invoice.membership?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.membership.customer.phone_no.substring(4,14))+"\n                        ")]):e.invoice.order&&e.invoice.order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.order.customer.phone_no.substring(4,14))+"\n                        ")]):e.invoice.merged_order&&e.invoice.merged_order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.merged_order.customer.phone_no.substring(4,14))+"\n                        ")]):a("td",{staticClass:"text-center"},[t._v("-")]),e.invoice.order?a("td",{staticClass:"text-center"},[t._v(t._s(e.invoice.order.time))]):a("td",{staticClass:"text-center"},[t._v(t._s(e.invoice.time))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.invoice.net_price))]),a("td",{staticClass:"text-center"},[a("q-btn",{staticClass:"bg-delete",attrs:{size:"0.65rem",padding:"sm sm",dense:"",push:"",icon:"loop"},on:{click:function(a){return t.refund(e)}}},[a("q-tooltip",[t._v("Refund Items")])],1)],1)])})),0)])],1),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{attrs:{color:"orange-3","text-color":"black",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1),a("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down","full-width":"","full-height":""},model:{value:t.showInvoice,callback:function(e){t.showInvoice=e},expression:"showInvoice"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId},on:{invoiceStatus:t.invoiceStatus}})],1),a("q-dialog",{model:{value:t.customerStatus,callback:function(e){t.customerStatus=e},expression:"customerStatus"}},[a("CustomerList",{staticClass:"q-pa-sm",attrs:{select:!0},on:{selectedCustomer:t.selectedCustomer}})],1),a("q-dialog",{attrs:{maximized:""},model:{value:t.refundStatus,callback:function(e){t.refundStatus=e},expression:"refundStatus"}},[a("RefundMenu",{attrs:{payment:t.payment},on:{closeForm:t.closeForm}})],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.refundBill,callback:function(e){t.refundBill=e},expression:"refundBill"}},[a("RefundBill",{attrs:{payment:t.payment,refundResponse:t.refundResponse}})],1)],1)])},cn=[],dn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[t._v(" ")]),a("div",{staticClass:"col-10"},[a("span",{staticClass:"font-bold text-md q-mb-none q-pa-lg"},[t._v("Refund Menu")])]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1)])],1)]),a("q-card",{staticClass:"my-card q-mt-lg"},[a("q-card-section",[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-1"},[t._v("\n                     \n                ")]),a("div",{staticClass:"col-10"},[a("q-markup-table",{attrs:{separator:"vertical"}},[a("thead",[a("tr",[a("th",[t._v("Refund?")]),a("th",[t._v("Item Name")]),a("th",[t._v("Refundable Qty "),a("q-tooltip",[t._v("Quantity")])],1),a("th",[t._v("Refund Quantity")])])]),a("tbody",t._l(t.apiArray,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5"},model:{value:e.refund,callback:function(a){t.$set(e,"refund",a)},expression:"item.refund"}})],1),a("td",{staticClass:"text-center"},[t._v(t._s(e.item))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{attrs:{align:"center"}},[e.refund?a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.refund_quantity,callback:function(a){t.$set(e,"refund_quantity",a)},expression:"item.refund_quantity"}}):a("q-input",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"orange-3",disable:""}})],1)])})),0)])],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"},[t._v("\n                     \n                ")]),a("div",{staticClass:"col-4"},[a("validation-provider",{attrs:{name:"Reason",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{staticClass:"q-pt-md",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Refund Reason",dense:""},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1)]),a("div",{staticClass:"row q-mt-md"},[a("div",{staticClass:"col-1"},[t._v("\n                     \n                ")]),a("div",{staticClass:"col-3"},[a("q-btn",{staticClass:"bg-delete",attrs:{size:"0.8rem",padding:"sm sm",dense:"",push:"",label:"Refund"},on:{click:function(e){return t.refund()}}})],1)])])],1)],1)},mn=[];Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"}));var un={components:{ValidationProvider:Zt["b"],ValidationObserver:Zt["a"]},props:{payment:{required:!0,type:Object}},created(){this.usefulApi()},data:()=>({data:{},isMerged:!1,invoiceId:"",api:{item:"",itemId:"",id:null,quantity:null},apiArray:[],reason:"",refundFood:[],refundBeverage:[],refundAddons:[],refundInventory:[],reasonOptions:["Wrong Item","Complementary"]}),methods:{usefulApi(){this.invoiceId=this.payment.id,this.payment.invoice.order?(this.data=this.payment.invoice.order,this.isMerged=!1):this.payment.invoice.merged_order&&(this.data=this.payment.invoice.merged_order,this.isMerged=!0),this.recreateApi()},recreateApi(){this.data.orderfood=this.data.orderfood.filter((t=>0!==t.refundable_quantity)),this.data.orderbeverage=this.data.orderbeverage.filter((t=>0!==t.refundable_quantity)),this.data.orderaddons=this.data.orderaddons.filter((t=>0!==t.refundable_quantity)),this.data.order_inventory_item=this.data.order_inventory_item.filter((t=>0!==t.refundable_quantity)),this.data.orderfood.forEach((t=>{this.api={item:t.food.detail.name,itemId:t.food.id,id:t.id,quantity:t.refundable_quantity},this.apiArray.push(this.api),this.api={item:"",itemId:"",id:null,quantity:null}})),this.data.orderbeverage.forEach((t=>{this.api={item:t.beverage.detail.name,itemId:t.beverage.id,id:t.id,quantity:t.refundable_quantity},this.apiArray.push(this.api),this.api={item:"",itemId:"",id:null,quantity:null}})),this.data.orderaddons.forEach((t=>{this.api={item:t.addons.detail.name,itemId:t.addons.id,id:t.id,quantity:t.refundable_quantity},this.apiArray.push(this.api),this.api={item:"",itemId:"",id:null,quantity:null}})),this.data.order_inventory_item.forEach((t=>{this.api={item:t.inventory_item.item.name,itemId:t.inventory_item.id,id:t.id,quantity:t.refundable_quantity},this.apiArray.push(this.api),this.api={item:"",itemId:"",id:null,quantity:null}})),this.apiArray=this.apiArray.map((t=>k()(k()({},t),{},{refund:!1,refund_quantity:null})))},postFormat(){this.apiArray=this.apiArray.filter((t=>!0===t.refund)),this.apiArray.forEach((t=>{if(t.itemId.startsWith("F")){var e={order_food:t.id,return_quantity:t.refund_quantity};this.refundFood.push(e),e={orderfood:null,return_quantity:null}}if(t.itemId.startsWith("B")){var a={order_beverage:t.id,return_quantity:t.refund_quantity};this.refundBeverage.push(a),a={order_beverage:null,return_quantity:null}}if(t.itemId.startsWith("A")){var s={order_addons:t.id,return_quantity:t.refund_quantity};this.refundAddons.push(s),s={order_addons:null,return_quantity:null}}if(t.itemId.startsWith("I")){e={order_inventory_item:t.id,return_quantity:t.refund_quantity};this.refundInventory.push(e),e={order_inventory_item:null,return_quantity:null}}}))},async refund(){this.reason||this.$q.notify({message:"Refund Reason must be provided",color:"red-5",icon:"warning"}),this.postFormat();const t={is_merged:this.isMerged,refund_food:this.refundFood,refund_beverage:this.refundBeverage,refund_addons:this.refundAddons,refund_inventory_item:this.refundInventory,payment:this.invoiceId,description:this.reason};try{const e=await vt(t);this.$q.notify({message:"Refund Successful",color:"green-5",icon:"info"}),this.$emit("closeForm",e.data)}catch(error){this.$q.notify({message:"Refund Unuccessful",color:"red-5",icon:"warning"})}},keyHandler(t){this.model<1&&"ArrowDown"===t.key&&t.preventDefault(),"-"===t.key&&t.preventDefault()},onInput(t){this.model=t,t&&t<0&&(this.model=0)}}},pn=un,hn=Object(p["a"])(pn,dn,mn,!1,null,null,null),vn=hn.exports;kt()(hn,"components",{QCard:Ct["a"],QSpace:re["a"],QBtn:xt["a"],QCardSection:Rt["a"],QMarkupTable:Te["a"],QTooltip:we["a"],QCheckbox:ie["a"],QInput:Et["a"],QSelect:ae["a"]}),kt()(hn,"directives",{ClosePopup:le["a"]});var bn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"q-pa-sm"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",[a("p",{staticClass:"float-right"},[a("q-btn",{staticClass:"bg-confirm",attrs:{label:"Print",dense:"",push:"",size:"0.8rem",padding:"sm sm"},on:{click:function(e){return t.printInvoice()}}})],1)])]),a("div",{staticClass:"col-12"},[a("div",{attrs:{id:"pos-bill"}},[a("div",{staticClass:"header"},[a("h5",{staticClass:"q-mb-none"},[t._v(t._s(t.resDetail.name))]),a("p",{staticClass:"q-mb-none q-mt-sm"},[t._v(t._s(t.resDetail.address))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.resDetail.vat_number,expression:"resDetail.vat_number"}],staticClass:"q-mb-none"},[t._v("PAN No: "+t._s(t.resDetail.vat_number))]),a("h6",{staticClass:"q-ma-none"},[t._v("Return Bill")])]),a("div",{staticClass:"customer-info"},[a("p",{staticClass:"q-ma-none q-mb-xs"},[t._v("\n                        Customer: "+t._s(t.customer)+"\n                        "),a("span",{staticClass:"float-right"},[t._v("\n                            Date: "+t._s(t.refundRes.return_date.substring(0,10))+"\n                        ")])]),a("p",{staticClass:"q-ma-none q-mb-xs"},[a("span",[t._v("\n                            Return Invoice No.: "+t._s(t.refundRes.id)+"\n                        ")])]),a("p",{staticClass:"q-ma-none q-mb-xs"},[a("span",[t._v("\n                            Invoice No.: "+t._s(t.refundRes.payment.id)+"\n                        ")])])]),a("div",{staticClass:"items"},[a("table",[a("tr",[a("th",{staticClass:"text-left"},[t._v("S.N.")]),a("th",{staticClass:"text-left"},[t._v("Particulars")]),a("th",[t._v("Qty.")]),a("th",[t._v("Amount")])]),t._l(t.data,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.quantity))]),a("td",[t._v("Rs. "+t._s(e.amount))])])})),a("tr",{staticStyle:{"border-bottom":"1px dashed black","border-top":"1px dashed black"}},[a("td"),a("td"),a("td",[t._v("Total")]),a("td",[t._v("\n                                Rs. "+t._s(t.refundRes.return_amount)+"\n                            ")])])],2)]),a("div",{staticClass:"q-mt-md"},[a("p",[a("span",[t._v("Total Quantity: "+t._s(t.totalQuantity))])])]),a("div",[a("p",[a("span",[t._v("Unique Items : "+t._s(t.data.length))])])]),a("div",{staticClass:"totals"},[a("p",[t._v("Grand Total : Rs. "+t._s(t.refundRes.return_amount)+" ")])]),a("div",{staticClass:"q-mt-md words"},[a("p",[a("span",[t._v("In Words: "+t._s(t.amountWords))])])]),a("div",{staticStyle:{"text-align":"center"}},[a("p",{staticClass:"q-ma-none q-mt-sm"},[t._v("Thank You For The Visit !!!")])])])])])])},gn=[],_n={props:{payment:{},refundResponse:{},refundVal:{}},created(){this.refundVal?this.refundRes=this.refundVal:this.refundRes=this.refundResponse,this.usefulApi(),this.fetchRestaurant()},watch:{},data:()=>({data:[],needed:{name:"",quantity:null,rate:null,amount:null},refundRes:{},resDetail:{}}),methods:{async fetchRestaurant(){const t=await $();this.resDetail=t.data},usefulApi(){this.refundRes.refund_food&&this.refundRes.refund_food.forEach((t=>{this.needed={name:t.food.food.detail.name,quantity:t.return_quantity,amount:t.return_amount,rate:t.food.food.detail.price},this.data.push(this.needed),this.needed={name:"",quantity:null,amount:null,rate:null}})),this.refundRes.refund_beverage&&this.refundRes.refund_beverage.forEach((t=>{this.needed={name:t.beverage.beverage.detail.name,quantity:t.return_quantity,amount:t.return_amount,rate:t.beverage.beverage.detail.price},this.data.push(this.needed),this.needed={name:"",quantity:null,amount:null,rate:null}})),this.refundRes.refund_addons&&this.refundRes.refund_addons.forEach((t=>{this.needed={name:t.addons.addons.detail.name,quantity:t.return_quantity,amount:t.return_amount,rate:t.addons.addons.detail.price},this.data.push(this.needed),this.needed={name:"",quantity:null,amount:null,rate:null}})),this.refundRes.refund_inventory_item&&this.refundRes.refund_inventory_item.forEach((t=>{this.needed={name:t.inventory_item.inventory_item.item.name,quantity:t.return_quantity,amount:t.return_amount,rate:t.inventory_item.inventory_item.sales_price},this.data.push(this.needed),this.needed={name:"",quantity:null,amount:null,rate:null}}))}},computed:{amountWords(){const t=new S["ToWords"]({localeCode:"en-IN",converterOptions:{currency:!0,ignoreDecimal:!1,ignoreZeroCurrency:!1,doNotAddOnly:!1,currencyOptions:{name:"Rupee",plural:"Rupees",symbol:"₹",fractionalUnit:{name:"Paisa",plural:"Paisa",symbol:""}}}}),e=t.convert(this.refundRes.return_amount);return e},totalQuantity(){return this.data.reduce(((t,e)=>t+e.quantity),0)},customer(){if(this.refundRes.payment.invoice.membership)return this.refundRes.payment.invoice.membership.customer.name;if(this.refundRes.payment.invoice.order){if(this.refundRes.payment.invoice.order.customer)return this.refundRes.payment.invoice.order.customer.name}else{if(!this.refundRes.payment.invoice.merged_order)return;if(this.refundRes.payment.invoice.merged_order.customer)return this.refundRes.payment.invoice.merged_order.customer.name}}}},fn=_n,yn=(a("4ded"),Object(p["a"])(fn,bn,gn,!1,null,"01c88fbb",null)),qn=yn.exports;kt()(yn,"components",{QCard:Ct["a"],QBtn:xt["a"]});var Cn={data(){return{last_page:"",current_page:1,next_page:"",previous_page:"",options:{page:1,itemsPerPage:8},fromDate:null,toDate:null,bsToDate:"",bsFromDate:"",search:"",customerId:null,propSinglePayment:{},propSingleId:null,propMergeId:null,propMergePayment:{},credit:{},payment:{},refundResponse:{},creditDialog:!1,showInvoice:!1,showMergeInvoice:!1,customerStatus:!1,refundStatus:!1,refundBill:!1,dateType:"A.D",payArray:[]}},components:{FinalBill:St,CustomerList:fs,RefundMenu:vn,RefundBill:qn},created(){this.fetchPayment()},methods:{async fetchPayment(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"});const{page:t,itemsPerPage:e}=this.options,a=await rt({page:t,page_size:e,allOrder:!0,from_date:this.fromDate,to_date:this.toDate,search:this.customerId});this.payArray=a.data.payment_data,this.current_page=a.data.payment_data.meta.current_page,this.last_page=a.data.payment_data.meta.last_page,this.next_page=a.data.payment_data.meta.next_page,this.previous_page=a.data.payment_data.meta.previous_page,this.$q.loading.hide()},detailBilling(t){this.propSinglePayment=t,this.propSingleId=t.id,this.showInvoice=!0},detailMergeBilling(t){this.propMergePayment=t,this.propMergeId=t.id,this.showMergeInvoice=!0},invoiceStatus(){this.showInvoice=!1},selectedCustomer(t){this.search=t.name,this.customerId=t.id,this.customerStatus=!1},refund(t){this.refundStatus=!0,this.payment=t},closeForm(t){this.refundResponse=t,this.refundStatus=!1,this.refundBill=!0},searchData(){this.fetchPayment()},clear(){this.fromDate=null,this.toDate=null,this.search="",this.customerId=null,this.fetchPayment()},convertEnglishDate(t){let e,a;if(new I["a"](t).getAD().date<10){const a=0;e=a.toString()+new I["a"](t).getAD().date.toString()}else e=new I["a"](t).getAD().date.toString();if(new I["a"](t).getAD().month<10){const e=0;a=e.toString()+(new I["a"](t).getAD().month+1).toString()}else a=(new I["a"](t).getAD().month+1).toString();return"010"===a&&(a="10"),new I["a"](t).getAD().year.toString()+"-"+a+"-"+e}},watch:{async bsFromDate(){this.fromDate=this.convertEnglishDate(this.bsFromDate)},async bsToDate(){this.toDate=this.convertEnglishDate(this.bsToDate)},current_page(){this.options.page=this.current_page,this.fetchPayment()}}},xn=Cn,wn=Object(p["a"])(xn,ln,cn,!1,null,null,null),kn=wn.exports;kt()(wn,"components",{QInput:Et["a"],QRadio:Mt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QBadge:ke["a"],QTooltip:we["a"],QPagination:Oe["a"],QDialog:Nt["a"]});var In=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("q-tabs",{staticClass:"q-mt-md",staticStyle:{padding:"1px !important"},attrs:{dense:"",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"remain",label:"Remaining Credits"}}),a("q-tab",{attrs:{name:"complete",label:"Completed Credits"}})],1)],1)]),a("q-tab-panels",{staticClass:"text-black",attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"remain"}},[a("CreditOrderList")],1),a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"complete"}},[a("CompletedCredit")],1)],1)],1)},Sn=[],Dn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Select Customer",readonly:""},on:{click:function(e){return t.changeStatus()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-md-4"},[a("q-radio",{attrs:{val:"A.D",label:"English"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}}),a("q-radio",{attrs:{val:"B.S",label:"Nepali"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-md-4"},[a("q-input",{ref:"fromDate",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"From Date",type:"date"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1):a("div",{staticClass:"col-md-4"},[a("v-nepalidatepicker",{attrs:{placeholder:"From Date",classValue:"datepicker form-control"},model:{value:t.bsFromDate,callback:function(e){t.bsFromDate=e},expression:"bsFromDate"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-md-4"},[a("q-input",{ref:"pdate",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"To Date",type:"date"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1):a("div",{staticClass:"col-md-4"},[a("v-nepalidatepicker",{attrs:{placeholder:"To Date",classValue:"datepicker form-control",label:"Date"},model:{value:t.bsToDate,callback:function(e){t.bsToDate=e},expression:"bsToDate"}})],1)])]),a("div",{staticClass:"col-12 q-mt-xs"},[a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.8rem",label:"Search"},on:{click:function(e){return t.searchData()}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:this.search,expression:"this.search"}],staticClass:"q-ml-sm bg-delete",attrs:{push:"",size:"0.8rem",label:"Clear"},on:{click:function(e){return t.clear()}}}),t.customerId&&0!==t.creditArray.data.length?a("q-btn",{staticClass:"q-ml-sm bg-delete",attrs:{push:"",size:"0.8rem",label:"Pay All"},on:{click:function(e){return t.payAllCredit()}}}):t._e()],1)]),0===t.creditArray.data.length?a("div",[a("p",{staticClass:"q-mt-lg q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"ic:outline-credit-card-off",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("\n                No Credit Record\n            ")])])]):a("div",{staticClass:"row q-mt-sm q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("q-markup-table",{attrs:{bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Invoice No.")]),a("th",{staticClass:"text-center"},[t._v("Order Type")]),a("th",{staticClass:"text-center"},[t._v("Table No.")]),a("th",{staticClass:"text-center"},[t._v("Customer")]),a("th",{staticClass:"text-center"},[t._v("Contact No.")]),a("th",{staticClass:"text-center"},[t._v("Order Time")]),a("th",{staticClass:"text-center"},[t._v("Total Amount")]),a("th",{staticClass:"text-center"},[t._v("Credit Amount")]),a("th",{staticClass:"text-center"},[t._v("Remaining Credit")]),a("th",{staticClass:"text-center"},[t._v("Action")])])]),a("tbody",{directives:[{name:"show",rawName:"v-show",value:0!==t.creditArray.data.length,expression:"creditArray.data.length !== 0"}]},t._l(t.creditArray.data,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.detailBilling(e)}}},[t._v(t._s(e.id))])]),e.invoice.order?a("td",{staticClass:"text-center"},["Sit & Eat"===e.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Dine\n                                In")]):t._e(),"Take Away"===e.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Takeaway")]):t._e(),"Online"===e.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Online")]):t._e()],1):a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Dine In")])],1),e.invoice.order&&e.invoice.order.table?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.order.table.number)+"\n                        ")]):e.invoice.merged_order?a("td",{staticClass:"text-center"},t._l(e.invoice.merged_order.merged_table.table,(function(s,n){return a("span",{key:s.id},[t._v("\n                                "+t._s(s.number)),n!==e.invoice.merged_order.merged_table.table.length-1?a("span",[t._v(",\n                                ")]):t._e()])})),0):a("td",{staticClass:"text-center"},[t._v("-")]),e.invoice.membership?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.membership.customer.name)+"\n                        ")]):e.invoice.order&&e.invoice.order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.order.customer.name)+"\n                        ")]):e.invoice.merged_order&&e.invoice.merged_order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.merged_order.customer.name)+"\n                        ")]):a("td",{staticClass:"text-center"},[t._v("-")]),e.invoice.membership?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.membership.customer.phone_no.substring(4,14))+"\n                        ")]):e.invoice.order&&e.invoice.order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.order.customer.phone_no.substring(4,14))+"\n                        ")]):e.invoice.merged_order&&e.invoice.merged_order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.invoice.merged_order.customer.phone_no.substring(4,14))+"\n                        ")]):a("td",{staticClass:"text-center"},[t._v("-")]),e.invoice.order?a("td",{staticClass:"text-center"},[t._v(t._s(e.invoice.order.time))]):a("td",{staticClass:"text-center"},[t._v(t._s(e.invoice.time))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.invoice.net_price))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.credit.credit_due_amount))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.credit.credit_due_amount-t.remainCredit(e)))]),a("td",{staticClass:"text-center"},[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",icon:"credit_score",dense:"",size:"0.8rem"},on:{click:function(a){return t.sendCredit(e)}}},[a("q-tooltip",[t._v("Pay Credit")])],1)],1),a("span",{staticClass:"q-ml-sm"},[a("q-btn",{staticClass:"bg-delete",attrs:{push:"",icon:"receipt_long",dense:"",size:"0.8rem"},on:{click:function(a){return t.showLog(e)}}},[a("q-tooltip",[t._v("Show Credit Log")])],1)],1)])])})),0),a("tbody",{directives:[{name:"show",rawName:"v-show",value:t.customerId,expression:"customerId"}]},[a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.getTotalAmt()))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.getTotalCreditAmt()))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.getTotalRemainAmt()))]),a("td",{staticClass:"text-center"})])])],1)]),a("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down","full-width":"","full-height":""},model:{value:t.showInvoice,callback:function(e){t.showInvoice=e},expression:"showInvoice"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId},on:{invoiceStatus:t.invoiceStatus}})],1),a("q-dialog",{model:{value:t.creditDialog,callback:function(e){t.creditDialog=e},expression:"creditDialog"}},[a("CreditInfo",{attrs:{credit:t.credit,customerId:t.customerId,remainingCreditAmount:t.remainingCreditAmount,payAll:t.payAll},on:{closeForm:t.closeForm}})],1),a("q-dialog",{model:{value:t.customerStatus,callback:function(e){t.customerStatus=e},expression:"customerStatus"}},[a("CustomerList",{staticClass:"q-pa-sm",attrs:{select:!0},on:{selectedCustomer:t.selectedCustomer}})],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.log,callback:function(e){t.log=e},expression:"log"}},[a("CreditLog",{attrs:{logInfo:t.logInfo}})],1)],1)},An=[],Fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-sm"},[a("h6",{staticClass:"q-ma-none"},[t._v("Credit Details")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("div",{staticClass:"row"},[t.payAll?a("div",{staticClass:"col-12"},[a("p",[t._v("Customer Name:\n                    "),a("span",[t._v("\n                        "+t._s(t.customerDetail.name)+"\n                    ")])]),a("p",[a("span",[t._v("\n                        Due Amount: Rs."+t._s(t.remainingCreditAmount)+"\n                    ")])])]):a("div",{staticClass:"col-12"},[a("p",[t._v("Customer Name:\n                    "),t.credit.invoice.membership?a("span",[t._v("\n                        "+t._s(t.credit.invoice.membership.name)+"\n                    ")]):t.credit.invoice.order?a("span",[t._v("\n                        "+t._s(t.credit.invoice.order.customer.name)+"\n                    ")]):t.credit.invoice.merged_order?a("span",[t._v("\n                        "+t._s(t.credit.invoice.merged_order.customer.name)+"\n                    ")]):t._e(),t.credit.credit?a("span",{staticClass:"float-right q-ml-xl"},[t._v("\n                        Due Date: "),t.credit.credit.due_date?a("div",[t._v(t._s(t.credit.credit.due_date.substring(0,10)))]):t._e()]):t.credit.merge_credit?a("span",{staticClass:"float-right q-ml-xl"},[t._v("\n                        Due Date: "),t.credit.merge_credit.due_date?a("div",[t._v("\n                            "+t._s(t.credit.merge_credit.due_date.substring(0,10))+"\n                        ")]):t._e()]):t._e()]),a("p",[t.credit.credit?a("span",[t._v("\n                        Due Amount: Rs."+t._s(t.credit.credit.credit_due_amount-t.clearenceAmt)+"\n                    ")]):t.credit.merge_credit?a("span",[t._v("\n                        Due Amount: Rs."+t._s(t.credit.merge_credit.credit_due_amount-t.clearenceAmt)+"\n                    ")]):t._e()])]),a("div",{staticClass:"col-12"},[a("q-select",{ref:"mySelect",attrs:{dense:"",filled:"",options:t.paymentModeOptions,label:"Select Payment Mode","max-values":"2",multiple:"","stack-label":"","use-chips":"","map-options":"","emit-value":""},on:{input:function(e){return t.handleSelect()}},model:{value:t.paymentMode,callback:function(e){t.paymentMode=e},expression:"paymentMode"}})],1),a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[t.paymentMode.length>0?a("div",{staticClass:"col-6"},[a("q-input",{directives:[{name:"show",rawName:"v-show",value:1===t.paymentMode[0],expression:"paymentMode[0] === 1"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cash Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:2===t.paymentMode[0],expression:"paymentMode[0] === 2"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cheque Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:3===t.paymentMode[0],expression:"paymentMode[0] === 3"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"E-sewa Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:4===t.paymentMode[0],expression:"paymentMode[0] === 4"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"FonePay Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:5===t.paymentMode[0],expression:"paymentMode[0] === 5"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Khalti Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:6===t.paymentMode[0],expression:"paymentMode[0] === 6"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Card Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}})],1):t._e(),2===t.paymentMode.length?a("div",{staticClass:"col-6"},[1===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cash Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),2===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cheque Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),3===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"E-sewa Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),4===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"FonePay Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),5===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Khalti Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),6===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Card Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e()],1):t._e()]),a("div",{staticClass:"col-12 flex flex-center"},[a("q-img",{staticClass:"q-mt-md",attrs:{src:"https://www.uia.no/var/uia/storage/images/media/images/2021-nyhetsbilder-1-vaar/qr-code-1500-q/2018792-1-nor-NO/qr-code-1500-q_fullwidth.jpg",width:"250px",height:"250px"}})],1),t.payAll?a("div",{staticClass:"col-12 q-mt-xl flex flex-center"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.paymentMode.length>=1,expression:"paymentMode.length >= 1"}],staticClass:"bg-payment",attrs:{label:"Confirm Payment"},on:{click:function(e){return t.paymentAllBtn()}}})],1):a("div",{staticClass:"col-12 q-mt-xl flex flex-center"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.paymentMode.length>=1,expression:"paymentMode.length >= 1"}],staticClass:"bg-payment",attrs:{label:"Confirm Payment"},on:{click:function(e){return t.paymentBtn()}}})],1)])])],1)},Tn=[],On={props:{credit:{type:Object,required:!0},customerId:{required:!0},payAll:{required:!0},remainingCreditAmount:{required:!0}},created(){this.payAll&&this.fetchCustomer()},computed:{clearenceAmt(){return this.credit.credit?0!==this.credit.credit.credit_payment_method.length?this.credit.credit.credit_payment_method.reduce(((t,e)=>t+parseFloat(e.clearance_amount)),0):0:this.credit.merge_credit?0!==this.credit.merge_credit.credit_payment_method.length?this.credit.merge_credit.credit_payment_method.reduce(((t,e)=>t+parseFloat(e.clearance_amount)),0):0:void 0}},data:()=>({customerDetail:{},paymentMode:[],paymentModeOptions:[{label:"Cash",value:1},{label:"Cheque",value:2},{label:"E-sewa",value:3},{label:"Fonepay",value:4},{label:"Khalti",value:5},{label:"Card",value:6}],paymentAmount:[],paymentArray:[],mergeStatus:!1}),methods:{async fetchCustomer(){const t=await ns(this.customerId);this.customerDetail=t.data},handleSelect(){this.$nextTick((()=>{this.$refs.mySelect.$refs.menu.hide()}))},async paymentBtn(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:100,message:"Processing Payment !",messageColor:"white"});var t={};if(this.paymentMode[1])for(var e=0;e<2;e++)this.$set(t,"type",this.paymentMode[e]),this.$set(t,"split_pay",this.paymentAmount[e]),this.paymentArray.push(t),t={};else this.$set(t,"type",this.paymentMode[0]),this.$set(t,"split_pay",this.paymentAmount[0]),this.paymentArray.push(t);var a={paymentmethod:this.paymentArray};this.credit.invoice.order?this.mergeStatus=!1:this.credit.invoice.merged_order&&(this.mergeStatus=!0);try{await bt(this.credit.id,a,{merge:this.mergeStatus}),this.$q.notify({message:"Credit Payed",color:"green-5",icon:"info"}),this.$q.loading.hide(),this.$emit("closeForm")}catch(s){this.$q.notify({message:"Unable",color:"red-5",icon:"warning"}),this.$q.loading.hide()}},async paymentAllBtn(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:100,message:"Processing Payment !",messageColor:"white"});var t={};if(this.paymentMode[1])for(var e=0;e<2;e++)this.$set(t,"type",this.paymentMode[e]),this.$set(t,"split_pay",this.paymentAmount[e]),this.paymentArray.push(t),t={};else this.$set(t,"type",this.paymentMode[0]),this.$set(t,"split_pay",this.paymentAmount[0]),this.paymentArray.push(t);var a={customer:this.customerId,paymentmethod:this.paymentArray};try{await gt(a),this.$q.notify({message:"Credit Payed",color:"green-5",icon:"info"}),this.$q.loading.hide(),this.$emit("closeForm")}catch(s){this.$q.notify({message:"Unable",color:"red-5",icon:"warning"}),this.$q.loading.hide()}}},watch:{payAll(){this.fetchCustomer()}}},$n=On,Qn=Object(p["a"])($n,Fn,Tn,!1,null,null,null),Mn=Qn.exports;kt()(Qn,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QBtn:xt["a"],QSeparator:Bt["a"],QSelect:ae["a"],QInput:Et["a"],QImg:oe["a"]}),kt()(Qn,"directives",{ClosePopup:le["a"]});var En=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-sm"},[a("h6",{staticClass:"q-ma-none"},[t._v("Credit Log ("),t.logInfo.invoice.membership?a("span",[t._v("\n                "+t._s(t.logInfo.invoice.membership.name)+"\n            ")]):t.logInfo.invoice.order?a("span",[t._v("\n                "+t._s(t.logInfo.invoice.order.customer.name)+"\n            ")]):t.logInfo.invoice.merged_order?a("span",[t._v("\n                "+t._s(t.logInfo.invoice.merged_order.customer.name)+"\n            ")]):t._e(),t._v(")\n        ")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[t.logInfo.credit?a("div",[0!==t.logInfo.credit.credit_payment_method.length?a("q-markup-table",{attrs:{separator:"vertical"}},[a("thead",[a("tr",[a("th",[t._v("S.N.")]),a("th",[t._v("Payment Date")]),a("th",[t._v("Payment Method")]),a("th",[t._v("Amount Payed")])])]),a("tbody",t._l(t.logInfo.credit.credit_payment_method,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center"},[t._v(t._s(s+1))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.payment_date.substring(0,10)))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.payment_method))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.clearance_amount))])])})),0)]):a("div",[a("p",{staticClass:"q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"octicon:log-16",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("\n                        No previous credit payment recorded !!\n                    ")])])])],1):t._e(),t.logInfo.merge_credit?a("div",[0!==t.logInfo.merge_credit.credit_payment_method.length?a("q-markup-table",{attrs:{separator:"vertical"}},[a("thead",[a("tr",[a("th",[t._v("S.N.")]),a("th",[t._v("Payment Date")]),a("th",[t._v("Payment Method")]),a("th",[t._v("Amount Payed")])])]),a("tbody",t._l(t.logInfo.merge_credit.credit_payment_method,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center"},[t._v(t._s(s+1))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.payment_date.substring(0,10)))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.payment_method))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.clearance_amount))])])})),0)]):a("div",[a("p",{staticClass:"q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"octicon:log-16",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("\n                        No previous credit payment recorded !!\n                    ")])])])],1):t._e()])],1)},Rn=[],Bn={props:{logInfo:{}},created(){}},Pn=Bn,Nn=Object(p["a"])(Pn,En,Rn,!1,null,null,null),jn=Nn.exports;kt()(Nn,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QBtn:xt["a"],QSeparator:Bt["a"],QMarkupTable:Te["a"]}),kt()(Nn,"directives",{ClosePopup:le["a"]});var Ln={data(){return{fromDate:null,toDate:null,search:"",bsToDate:"",bsFromDate:"",customerId:null,propSinglePayment:{},propSingleId:"",propMergeId:"",dateType:"A.D",propMergePayment:{},credit:{},logInfo:{},creditDialog:!1,showInvoice:!1,showMergeInvoice:!1,customerStatus:!1,log:!1,creditArray:[],payAll:!1,remainingCreditAmount:null}},components:{FinalBill:St,CreditInfo:Mn,CustomerList:fs,CreditLog:jn},created(){this.fetchPayment()},methods:{async fetchPayment(){const t=await rt({credit:!0,search:this.customerId,from_date:this.fromDate,to_date:this.toDate});this.creditArray=t.data.payment_data},changeStatus(){this.customerStatus=!0},detailBilling(t){this.propSinglePayment=t,this.propSingleId=t.id,this.showInvoice=!0},detailMergeBilling(t){this.propMergePayment=t,this.propMergeId=t.id,this.showMergeInvoice=!0},invoiceStatus(){this.showInvoice=!1},sendCredit(t){this.payAll=!1,this.credit=t,this.creditDialog=!0},closeForm(){this.creditDialog=!1,this.payAll=!1,this.fetchPayment()},selectedCustomer(t){this.search=t.name,this.customerId=t.id,this.customerStatus=!1},searchData(){this.fetchPayment()},clear(){this.fromDate=null,this.toDate=null,this.search="",this.customerId=null,this.fetchPayment()},showLog(t){this.logInfo=t,this.log=!0},convertEnglishDate(t){let e,a;if(new I["a"](t).getAD().date<10){const a=0;e=a.toString()+new I["a"](t).getAD().date.toString()}else e=new I["a"](t).getAD().date.toString();if(new I["a"](t).getAD().month<10){const e=0;a=e.toString()+(new I["a"](t).getAD().month+1).toString()}else a=(new I["a"](t).getAD().month+1).toString();return"010"===a&&(a="10"),new I["a"](t).getAD().year.toString()+"-"+a+"-"+e},getTotalAmt(){var t=0;return this.creditArray.data.forEach((e=>{t+=parseFloat(e.invoice.net_price)})),t},getTotalCreditAmt(){var t=0;return this.creditArray.data.forEach((e=>{t+=parseFloat(e.credit.credit_due_amount)})),t},getTotalRemainAmt(){var t=0;return this.creditArray.data.forEach((e=>{t+=parseFloat(e.credit.credit_due_amount-this.remainCredit(e))})),this.remainingCreditAmount=t,t},remainCredit(t){var e=t.credit.credit_payment_method,a=0;return e.forEach((t=>{a+=parseFloat(t.clearance_amount)})),a},payAllCredit(){this.creditDialog=!0,this.payAll=!0}},watch:{async bsFromDate(){this.fromDate=this.convertEnglishDate(this.bsFromDate)},async bsToDate(){this.toDate=this.convertEnglishDate(this.bsToDate)},customerId(){this.fetchPayment()}}},zn=Ln,Un=Object(p["a"])(zn,Dn,An,!1,null,null,null),Vn=Un.exports;kt()(Un,"components",{QInput:Et["a"],QRadio:Mt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QBadge:ke["a"],QTooltip:we["a"],QDialog:Nt["a"]});var Wn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Select Customer",readonly:""},on:{click:function(e){return t.changeStatus()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-md-4"},[a("q-radio",{attrs:{val:"A.D",label:"English"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}}),a("q-radio",{attrs:{val:"B.S",label:"Nepali"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-md-4"},[a("q-input",{ref:"fromDate",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"From Date",type:"date"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1):a("div",{staticClass:"col-md-4"},[a("v-nepalidatepicker",{attrs:{placeholder:"From Date",classValue:"datepicker form-control"},model:{value:t.bsFromDate,callback:function(e){t.bsFromDate=e},expression:"bsFromDate"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-md-4"},[a("q-input",{ref:"pdate",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"To Date",type:"date"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1):a("div",{staticClass:"col-md-4"},[a("v-nepalidatepicker",{attrs:{placeholder:"To Date",classValue:"datepicker form-control",label:"Date"},model:{value:t.bsToDate,callback:function(e){t.bsToDate=e},expression:"bsToDate"}})],1)])]),a("div",{staticClass:"col-12 q-mt-xs"},[a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.8rem",label:"Search"},on:{click:function(e){return t.searchData()}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:this.search,expression:"this.search"}],staticClass:"q-ml-sm bg-delete",attrs:{push:"",size:"0.8rem",label:"Clear"},on:{click:function(e){return t.clear()}}})],1)]),0===t.creditArray.data.length?a("div",[a("p",{staticClass:"q-mt-lg q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"ic:outline-credit-card-off",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("\n                No Credit Record\n            ")])])]):a("div",{staticClass:"row q-mt-sm q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("q-markup-table",{attrs:{bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Invoice No.")]),a("th",{staticClass:"text-center"},[t._v("Order Type")]),a("th",{staticClass:"text-center"},[t._v("Table No.")]),a("th",{staticClass:"text-center"},[t._v("Customer")]),a("th",{staticClass:"text-center"},[t._v("Contact No.")]),a("th",{staticClass:"text-center"},[t._v("Order Time")]),a("th",{staticClass:"text-center"},[t._v("Total Amount")]),a("th",{staticClass:"text-center"},[t._v("Credit Amount")]),a("th",{staticClass:"text-center"},[t._v("Action")])])]),a("tbody",{directives:[{name:"show",rawName:"v-show",value:0!==t.creditArray.data.length,expression:"creditArray.data.length !== 0"}]},t._l(t.creditArray.data,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.detailBilling(e.payment)}}},[t._v(t._s(e.payment.id))])]),e.payment.invoice.order?a("td",{staticClass:"text-center"},["Sit & Eat"===e.payment.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Dine\n                                In")]):t._e(),"Take Away"===e.payment.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Takeaway")]):t._e(),"Online"===e.payment.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Online")]):t._e()],1):a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Dine In")])],1),e.payment.invoice.order&&e.payment.invoice.order.table?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.payment.invoice.order.table.number)+"\n                        ")]):e.payment.invoice.merged_order?a("td",{staticClass:"text-center"},t._l(e.payment.invoice.merged_order.merged_table.table,(function(s,n){return a("span",{key:s.id},[t._v("\n                                "+t._s(s.number)),n!==e.payment.invoice.merged_order.merged_table.table.length-1?a("span",[t._v(",\n                                ")]):t._e()])})),0):a("td",{staticClass:"text-center"},[t._v("-")]),e.payment.invoice.membership?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.payment.invoice.membership.customer.name)+"\n                        ")]):e.payment.invoice.order&&e.payment.invoice.order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.payment.invoice.order.customer.name)+"\n                        ")]):e.payment.invoice.merged_order&&e.payment.invoice.merged_order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.payment.invoice.merged_order.customer.name)+"\n                        ")]):a("td",{staticClass:"text-center"},[t._v("-")]),e.payment.invoice.membership?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.payment.invoice.membership.customer.phone_no.substring(4,14))+"\n                        ")]):e.payment.invoice.order&&e.payment.invoice.order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.payment.invoice.order.customer.phone_no.substring(4,14))+"\n                        ")]):e.payment.invoice.merged_order&&e.payment.invoice.merged_order.customer?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.payment.invoice.merged_order.customer.phone_no.substring(4,14))+"\n                        ")]):a("td",{staticClass:"text-center"},[t._v("-")]),e.payment.invoice.order?a("td",{staticClass:"text-center"},[t._v(t._s(e.payment.invoice.order.time))]):a("td",{staticClass:"text-center"},[t._v(t._s(e.payment.invoice.time))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.payment.invoice.net_price))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.credit_due_amount))]),a("td",{staticClass:"text-center"},[a("span",{staticClass:"q-ml-sm"},[a("q-btn",{staticClass:"bg-delete",attrs:{push:"",icon:"receipt_long",dense:"",size:"0.8rem"},on:{click:function(a){return t.showLog(e.payment)}}},[a("q-tooltip",[t._v("Show Credit Log")])],1)],1)])])})),0),a("tbody",{directives:[{name:"show",rawName:"v-show",value:t.customerId,expression:"customerId"}]},[a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.getTotalAmt()))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.getTotalCreditAmt()))]),a("td",{staticClass:"text-center"})])])],1)]),a("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down","full-width":"","full-height":""},model:{value:t.showInvoice,callback:function(e){t.showInvoice=e},expression:"showInvoice"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId},on:{invoiceStatus:t.invoiceStatus}})],1),a("q-dialog",{model:{value:t.customerStatus,callback:function(e){t.customerStatus=e},expression:"customerStatus"}},[a("CustomerList",{staticClass:"q-pa-sm",attrs:{select:!0},on:{selectedCustomer:t.selectedCustomer}})],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.log,callback:function(e){t.log=e},expression:"log"}},[a("CreditLog",{attrs:{logInfo:t.logInfo}})],1)],1)},Yn=[],Gn={data(){return{fromDate:null,toDate:null,search:"",bsToDate:"",bsFromDate:"",customerId:null,propSinglePayment:{},propSingleId:"",propMergeId:"",dateType:"A.D",propMergePayment:{},credit:{},logInfo:{},creditDialog:!1,showInvoice:!1,showMergeInvoice:!1,customerStatus:!1,log:!1,creditArray:[],payAll:!1,remainingCreditAmount:null}},components:{FinalBill:St,CreditInfo:Mn,CustomerList:fs,CreditLog:jn},created(){this.fetchPayment()},methods:{async fetchPayment(){const t=await lt({search:this.customerId,from_date:this.fromDate,to_date:this.toDate});this.creditArray=t.data},changeStatus(){this.customerStatus=!0},detailBilling(t){this.propSinglePayment=t,this.propSingleId=t.id,this.showInvoice=!0},invoiceStatus(){this.showInvoice=!1},selectedCustomer(t){this.search=t.name,this.customerId=t.id,this.customerStatus=!1},searchData(){this.fetchPayment()},clear(){this.fromDate=null,this.toDate=null,this.search="",this.customerId=null,this.fetchPayment()},showLog(t){this.logInfo=t,this.log=!0},convertEnglishDate(t){let e,a;if(new I["a"](t).getAD().date<10){const a=0;e=a.toString()+new I["a"](t).getAD().date.toString()}else e=new I["a"](t).getAD().date.toString();if(new I["a"](t).getAD().month<10){const e=0;a=e.toString()+(new I["a"](t).getAD().month+1).toString()}else a=(new I["a"](t).getAD().month+1).toString();return"010"===a&&(a="10"),new I["a"](t).getAD().year.toString()+"-"+a+"-"+e},getTotalAmt(){var t=0;return this.creditArray.data.forEach((e=>{t+=parseFloat(e.payment.invoice.net_price)})),t},getTotalCreditAmt(){var t=0;return this.creditArray.data.forEach((e=>{t+=parseFloat(e.credit_due_amount)})),t},payAllCredit(){this.creditDialog=!0,this.payAll=!0}},watch:{async bsFromDate(){this.fromDate=this.convertEnglishDate(this.bsFromDate)},async bsToDate(){this.toDate=this.convertEnglishDate(this.bsToDate)},customerId(){this.fetchPayment()}}},Hn=Gn,Jn=Object(p["a"])(Hn,Wn,Yn,!1,null,null,null),Kn=Jn.exports;kt()(Jn,"components",{QInput:Et["a"],QRadio:Mt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QBadge:ke["a"],QTooltip:we["a"],QDialog:Nt["a"]});var Zn={data(){return{tab:"remain"}},components:{CreditOrderList:Vn,CompletedCredit:Kn}},Xn=Zn,ti=Object(p["a"])(Xn,In,Sn,!1,null,null,null),ei=ti.exports;kt()(ti,"components",{QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var ai=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[a("div",{staticClass:"col-8"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-md-4"},[a("q-radio",{attrs:{val:"A.D",label:"English"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}}),a("q-radio",{attrs:{val:"B.S",label:"Nepali"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-md-4"},[a("q-input",{ref:"fromDate",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"From Date",type:"date"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1):a("div",{staticClass:"col-md-4"},[a("v-nepalidatepicker",{attrs:{placeholder:"From Date",classValue:"datepicker form-control"},model:{value:t.bsFromDate,callback:function(e){t.bsFromDate=e},expression:"bsFromDate"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-md-4"},[a("q-input",{ref:"pdate",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"To Date",type:"date"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1):a("div",{staticClass:"col-md-4"},[a("v-nepalidatepicker",{attrs:{placeholder:"To Date",classValue:"datepicker form-control",label:"Date"},model:{value:t.bsToDate,callback:function(e){t.bsToDate=e},expression:"bsToDate"}})],1)])]),a("div",{staticClass:"col-12 q-mt-xs"},[a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.8rem",label:"Search"},on:{click:function(e){return t.searchData()}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:this.search,expression:"this.search"}],staticClass:"q-ml-sm bg-delete",attrs:{push:"",size:"0.8rem",label:"Clear"},on:{click:function(e){return t.clear()}}})],1)]),0===t.refundArray.data.length?a("div",[a("p",{staticClass:"q-mt-lg q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"ic:outline-refund-card-off",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("\n                    No Refunds Recorded\n                ")])])]):a("div",{staticClass:"row q-mt-sm q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("q-markup-table",{attrs:{bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Return Invoice No.")]),a("th",{staticClass:"text-left"},[t._v("Invoice No.")]),a("th",{staticClass:"text-center"},[t._v("Order Type")]),a("th",{staticClass:"text-center"},[t._v("Table No.")]),a("th",{staticClass:"text-center"},[t._v("Customer")]),a("th",{staticClass:"text-center"},[t._v("Contact No.")]),a("th",{staticClass:"text-center"},[t._v("Order Time")]),a("th",{staticClass:"text-center"},[t._v("Total Amount")]),a("th",{staticClass:"text-center"},[t._v("Action")])])]),a("tbody",{directives:[{name:"show",rawName:"v-show",value:0!==t.refundArray.data.length,expression:"refundArray.data.length !== 0"}]},t._l(t.refundArray.data,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.detailReturnBilling(e)}}},[t._v(t._s(e.id))])]),a("td",{staticClass:"text-left"},[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.detailBilling(e.payment)}}},[t._v(t._s(e.payment.id))])]),e.payment.invoice.order?a("td",{staticClass:"text-center"},["Sit & Eat"===e.payment.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Dine\n                                    In")]):t._e(),"Take Away"===e.payment.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Takeaway")]):t._e(),"Online"===e.payment.invoice.order.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Online")]):t._e()],1):a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Dine In")])],1),e.payment.invoice.order&&e.payment.invoice.order.table?a("td",{staticClass:"text-center"},[t._v("\n                                "+t._s(e.payment.invoice.order.table.number)+"\n                            ")]):e.payment.invoice.merged_order?a("td",{staticClass:"text-center"},t._l(e.payment.invoice.merged_order.merged_table.table,(function(s,n){return a("span",{key:s.id},[t._v("\n                                    "+t._s(s.number)),n!==e.payment.invoice.merged_order.merged_table.table.length-1?a("span",[t._v(",\n                                    ")]):t._e()])})),0):a("td",{staticClass:"text-center"},[t._v("-")]),e.payment.invoice.membership?a("td",{staticClass:"text-center"},[t._v("\n                                "+t._s(e.payment.invoice.membership.customer.name)+"\n                            ")]):e.payment.invoice.order&&e.payment.invoice.order.customer?a("td",{staticClass:"text-center"},[t._v("\n                                "+t._s(e.payment.invoice.order.customer.name)+"\n                            ")]):e.payment.invoice.merged_order&&e.invoice.merged_order.customer?a("td",{staticClass:"text-center"},[t._v("\n                                "+t._s(e.payment.invoice.merged_order.customer.name)+"\n                            ")]):a("td",{staticClass:"text-center"},[t._v("-")]),e.payment.invoice.membership?a("td",{staticClass:"text-center"},[t._v("\n                                "+t._s(e.payment.invoice.membership.customer.phone_no.substring(4,14))+"\n                            ")]):e.payment.invoice.order&&e.payment.invoice.order.customer?a("td",{staticClass:"text-center"},[t._v("\n                                "+t._s(e.payment.invoice.order.customer.phone_no.substring(4,14))+"\n                            ")]):e.payment.invoice.merged_order&&e.payment.invoice.merged_order.customer?a("td",{staticClass:"text-center"},[t._v("\n                                "+t._s(e.payment.invoice.merged_order.customer.phone_no.substring(4,14))+"\n                            ")]):a("td",{staticClass:"text-center"},[t._v("-")]),e.payment.invoice.order?a("td",{staticClass:"text-center"},[t._v(t._s(e.payment.invoice.order.time))]):a("td",{staticClass:"text-center"},[t._v(t._s(e.payment.invoice.time))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.payment.invoice.net_price))]),a("td",{staticClass:"text-center"},[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",icon:"visibility",dense:"",size:"0.8rem"},on:{click:function(a){return t.viewRefund(e)}}},[a("q-tooltip",[t._v("View Refunded Item")])],1)],1)])])})),0)])],1)]),a("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down","full-width":"","full-height":""},model:{value:t.showInvoice,callback:function(e){t.showInvoice=e},expression:"showInvoice"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId},on:{invoiceStatus:t.invoiceStatus}})],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.refundBill,callback:function(e){t.refundBill=e},expression:"refundBill"}},[a("RefundBill",{attrs:{refundVal:t.refundVal}})],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.viewRefundItem,callback:function(e){t.viewRefundItem=e},expression:"viewRefundItem"}},[a("q-card",{staticClass:"q-pa-xl"},[a("q-btn",{staticClass:"q-mb-md",attrs:{label:"Go Back",color:"green-5"},on:{click:function(e){t.viewRefundItem=!1}}}),a("q-markup-table",{attrs:{bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("S.N.")]),a("th",{staticClass:"text-left"},[t._v("Item")]),a("th",{staticClass:"text-center"},[t._v("Quantity")])])]),a("tbody",t._l(t.refundItems,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left"},[t._v(t._s(s+1))]),a("td",{staticClass:"text-left"},[t._v(t._s(e.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))])])})),0)])],1)],1)],1)},si=[],ni={data(){return{fromDate:null,toDate:null,search:"",bsToDate:"",bsFromDate:"",propSinglePayment:{},propSingleId:"",dateType:"A.D",refund:{},showInvoice:!1,refundArray:[],refundBill:!1,refundVal:[],viewRefundItem:!1,refundItems:[],needed:{name:"",quantity:null,rate:null,amount:null}}},components:{FinalBill:St,CustomerList:fs,RefundBill:qn},created(){this.fetchRefundPayment()},methods:{async fetchRefundPayment(){const t=await ht();this.refundArray=t.data},viewRefund(t){this.viewRefundItem=!0,this.refundItems=[],t.refund_food&&t.refund_food.forEach((t=>{this.needed={name:t.food.food.detail.name,quantity:t.return_quantity,amount:t.return_amount,rate:t.food.food.detail.price},this.refundItems.push(this.needed),this.needed={name:"",quantity:null,amount:null,rate:null}})),t.refund_beverage&&t.refund_beverage.forEach((t=>{this.needed={name:t.beverage.beverage.detail.name,quantity:t.return_quantity,amount:t.return_amount,rate:t.beverage.beverage.detail.price},this.refundItems.push(this.needed),this.needed={name:"",quantity:null,amount:null,rate:null}})),t.refund_addons&&t.refund_addons.forEach((t=>{this.needed={name:t.addons.addons.detail.name,quantity:t.return_quantity,amount:t.return_amount,rate:t.addons.addons.detail.price},this.refundItems.push(this.needed),this.needed={name:"",quantity:null,amount:null,rate:null}})),t.refund_inventory_item&&t.refund_inventory_item.forEach((t=>{this.needed={name:t.inventory_item.inventory_item.item.name,quantity:t.return_quantity,amount:t.return_amount,rate:t.inventory_item.inventory_item.sales_price},this.refundItems.push(this.needed),this.needed={name:"",quantity:null,amount:null,rate:null}}))},detailReturnBilling(t){this.refundVal=t,this.refundBill=!0},detailBilling(t){this.propSinglePayment=t,this.propSingleId=t.id,this.showInvoice=!0},invoiceStatus(){this.showInvoice=!1},searchData(){this.fetchPayment()},clear(){this.fromDate=null,this.toDate=null,this.search="",this.fetchPayment()},convertEnglishDate(t){let e,a;if(new I["a"](t).getAD().date<10){const a=0;e=a.toString()+new I["a"](t).getAD().date.toString()}else e=new I["a"](t).getAD().date.toString();if(new I["a"](t).getAD().month<10){const e=0;a=e.toString()+(new I["a"](t).getAD().month+1).toString()}else a=(new I["a"](t).getAD().month+1).toString();return"010"===a&&(a="10"),new I["a"](t).getAD().year.toString()+"-"+a+"-"+e}},watch:{async bsFromDate(){this.fromDate=this.convertEnglishDate(this.bsFromDate)},async bsToDate(){this.toDate=this.convertEnglishDate(this.bsToDate)}}},ii=ni,oi=Object(p["a"])(ii,ai,si,!1,null,null,null),ri=oi.exports;kt()(oi,"components",{QRadio:Mt["a"],QInput:Et["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QBadge:ke["a"],QTooltip:we["a"],QDialog:Nt["a"],QCard:Ct["a"]});var li={components:{CompletedOrderList:kn,Credit:ei,RefundOrderList:ri},data:()=>({tab:"completed"})},ci=li,di=Object(p["a"])(ci,on,rn,!1,null,null,null),mi=di.exports;kt()(di,"components",{QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var ui=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Customer Search",type:"text",readonly:""},on:{click:function(e){t.customerStatus=!0}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"col-8"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-md-4"},[a("q-radio",{attrs:{val:"A.D",label:"English"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}}),a("q-radio",{attrs:{val:"B.S",label:"Nepali"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-md-4"},[a("q-input",{ref:"fromDate",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"From Date",type:"date"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1):a("div",{staticClass:"col-md-4"},[a("v-nepalidatepicker",{attrs:{placeholder:"From Date",classValue:"datepicker form-control"},model:{value:t.bsFromDate,callback:function(e){t.bsFromDate=e},expression:"bsFromDate"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-md-4"},[a("q-input",{ref:"pdate",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"To Date",type:"date"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1):a("div",{staticClass:"col-md-4"},[a("v-nepalidatepicker",{attrs:{placeholder:"To Date",classValue:"datepicker form-control",label:"Date"},model:{value:t.bsToDate,callback:function(e){t.bsToDate=e},expression:"bsToDate"}})],1)])]),a("div",{staticClass:"col-12 q-mt-xs"},[a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.8rem",label:"Search"},on:{click:function(e){return t.searchData()}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:this.search,expression:"this.search"}],staticClass:"q-ml-sm bg-delete",attrs:{push:"",size:"0.8rem",label:"Clear"},on:{click:function(e){return t.clear()}}})],1)]),0===t.orderList.length&&0===t.mergeOrders.length?a("div",[a("p",{staticClass:"q-mt-lg q-mb-none alert-style"},[a("span",{staticClass:"q-ml-md"},[a("iconify-icon",{attrs:{icon:"ic:outline-credit-card-off",width:"28"}})],1),a("span",{staticClass:"q-ml-sm",staticStyle:{"vertical-align":"top"}},[t._v("\n                No Completed Order\n            ")])])]):a("div",{staticClass:"row q-mt-sm q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("q-markup-table",{attrs:{bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Order No.")]),a("th",[t._v("Order Type")]),a("th",[t._v("Table No.")]),a("th",[t._v("Order Date")]),a("th",[t._v("Order TIme")]),a("th",[t._v("Action")])])]),a("tbody",[t._l(t.orderList,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[a("span",{staticStyle:{color:"orange"}},[t._v(t._s(e.id))])]),a("td",{staticClass:"text-center"},["Sit & Eat"===e.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Dine\n                                In")]):t._e(),"Take Away"===e.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Takeaway")]):t._e(),"Online"===e.order_type?a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Online")]):t._e()],1),e&&e.table?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.table.number)+"\n                        ")]):a("td",{staticClass:"text-center"},[t._v("-")]),a("td",{staticClass:"text-center"},[t._v(t._s(e.order_date.substring(0,10)))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.time))]),a("td",{staticClass:"text-center"},[a("q-btn",{staticClass:"bg-delete",attrs:{size:"0.65rem",padding:"sm sm",dense:"",push:"",icon:"visibility"},on:{click:function(a){return t.viewUnsettledOrder(e)}}})],1)])})),t._l(t.mergeOrders,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[a("span",{staticStyle:{color:"orange"}},[t._v(t._s(e.id))])]),a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"orange"}},[t._v("Dine\n                                In")])],1),e&&e.table?a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.table.number)+"\n                        ")]):a("td",{staticClass:"text-center"},[t._v("-")]),a("td",{staticClass:"text-center"},[t._v(t._s(e.date.substring(11,19)))]),a("td",{staticClass:"text-center"},[a("q-btn",{staticClass:"bg-delete",attrs:{size:"0.65rem",padding:"sm sm",dense:"",push:"",icon:"visibility"},on:{click:function(a){return t.viewUnsettledMergeOrder(e)}}})],1)])}))],2)])],1),a("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down","full-width":"","full-height":""},model:{value:t.showUO,callback:function(e){t.showUO=e},expression:"showUO"}},[a("ViewUnsettledOrderVue",{attrs:{unsettledOrder:t.unsettledOrder,mergeUnSettledOrder:t.mergeUnSettledOrder}})],1),a("q-dialog",{model:{value:t.customerStatus,callback:function(e){t.customerStatus=e},expression:"customerStatus"}},[a("CustomerList",{staticClass:"q-pa-sm",attrs:{select:!0},on:{selectedCustomer:t.selectedCustomer}})],1)],1)])},pi=[],hi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row q-col-gutter-md"},[t._l(t.orderList,(function(e){return a("div",{key:e.id,staticClass:"col-12"},[a("q-card-section",{staticClass:"q-pa-none q-ma-none",staticStyle:{"min-height":"250px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-6"},[a("p",{staticClass:"text-subtitle2 q-mt-none q-mb-none q-pt-sm"},[t._v("\n                      Order Id:\n                      "),a("span",{staticStyle:{"font-weight":"800","font-size":"14px"}},[t._v("#"+t._s(e.id)+"\n                          "),a("span",{directives:[{name:"show",rawName:"v-show",value:"Complementary"===e.detail.order_status,expression:"order.detail.order_status === 'Complementary'"}]},[t._v("\n                          (Complementary Order)\n                          ")])])])]),a("div",{staticClass:"col-6"},[a("p",{staticClass:" text-subtitle2 q-mt-none q-mb-none float-right q-pt-sm"},[t._v("\n                      Order Time: "+t._s(e.time)+"\n                      ")])])]),a("q-separator"),a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-12"},[e.table?a("p",{staticClass:"text-subtitle2 q-mt-md q-mb-md"},[t._v("\n                      Table Number:\n                      "),a("q-chip",{staticClass:"table-no-chip",attrs:{color:"white"}},[a("q-avatar",{staticClass:"avatar-border",staticStyle:{border:"1px solid #f3f2f2"},attrs:{color:"orange-3","text-color":"white",size:"1.8rem"}},[a("iconify-icon",{attrs:{icon:"material-symbols:table-bar",width:"18"}})],1),t._v("\n                          "+t._s(e.table.number)+"\n                      ")],1)],1):e.customer?a("p",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("\n                      Name: "+t._s(e.customer.name)+"\n                      ")]):t._e()]),e.customer?a("div",{staticClass:"col-12 q-mb-sm"},[a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                      Contact No: "+t._s(e.customer.phone_no)+"\n                      ")])]):t._e(),e.customer?a("div",{staticClass:"col-12 q-mb-sm"},[a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                      Location: "+t._s(e.customer.address)+"\n                      ")])]):t._e(),a("div",{staticClass:"col-12"},[0!==e.orderfood.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                      Food:\n                      "),t._l(e.orderfood.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.food.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v(t._s(e.food.detail.name)+" -\n                          "),e.complementary.complementary_quantity?a("span",[t._v("\n                          "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                          ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderbeverage.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                      Beverages:\n                      "),t._l(e.orderbeverage.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.beverage.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                          "+t._s(e.beverage.detail.name)+" -\n                          "),e.complementary.complementary_quantity?a("span",[t._v("\n                          "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                          ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.order_inventory_item.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                      Inventory:\n                      "),t._l(e.order_inventory_item.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v(t._s(e.inventory_item.item.name)+" -\n                          "),e.complementary.complementary_quantity?a("span",[t._v("\n                          "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                          ")]):a("span",[t._v(" "+t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderaddons.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                      Add-ons:\n                      "),t._l(e.orderaddons.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.addons.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                          "+t._s(e.addons.detail.name)+" -\n                          "),e.complementary.complementary_quantity?a("span",[t._v("\n                          "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                          ")]):a("span",[t._v(t._s(e.quantity))])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.order_combo_offer.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                      Combo:\n                      "),t._l(e.order_combo_offer.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                          "+t._s(e.combo_offer.name)+" -\n                          "),a("span",[t._v("\n                          "+t._s(e.quantity)+"\n                          ")])])}))],2):t._e()])])],1)])]),a("q-separator"),a("q-card-actions",{staticClass:"q-pa-sm"},["Complementary"!==e.detail.order_status?a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelDialog(e.id)}}}):a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel Complementary","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelComplementary(e.id)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:"Complementary"!==e.detail.order_status,expression:"order.detail.order_status !== 'Complementary'"}],staticClass:"bg-confirm",attrs:{push:"",label:"Edit Order","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.editOrderBtn(e)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:"Complementary"!==e.detail.order_status&&"Sit & Eat"===e.order_type,expression:"order.detail.order_status !== 'Complementary' && order.order_type === 'Sit & Eat'"}],staticClass:"bg-delete",attrs:{push:"",label:"Transfer","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.transfer(e)}}}),"Complementary"===e.detail.order_status?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Give Complementary"},on:{click:function(a){return t.complementaryDone(e.id)}}}):e.invoice?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Payment"},on:{click:function(a){return t.fetchSingleOrder(e.id)}}}):a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"View Order"},on:{click:function(a){return t.fetchSingleOrder(e.id)}}})],1)],1)})),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-md"},t._l(t.mergeOrders,(function(e){return a("div",{key:e.id,staticClass:"col-6"},[a("q-card",{staticClass:"my-card ongoing-bg",staticStyle:{"border-radius":"8px"},attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"q-pa-none q-ma-none",staticStyle:{"min-height":"250px"}},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-12"},[a("p",{staticClass:" text-subtitle2 q-mt-none q-mb-none q-pt-sm"},[t._v("\n                          Merge Order Number:\n                          "),a("span",{staticStyle:{"font-weight":"800","font-size":"14px"}},[t._v("#"+t._s(e.id)+"\n                              "),a("span",{directives:[{name:"show",rawName:"v-show",value:5===e.order_status,expression:"merge.order_status === 5"}]},[t._v("\n                              (Complementary Order)\n                              ")])])])])]),a("q-separator"),a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-12"},[a("p",{staticClass:"text-subtitle2 q-mt-md q-mb-md"},[t._v("\n                          Tables Merged :\n                          "),t._l(e.merged_table.table,(function(e){return a("q-chip",{key:e.id,staticClass:"table-no-chip",attrs:{color:"white"}},[a("q-avatar",{staticClass:"avatar-border",staticStyle:{border:"1px solid #f3f2f2"},attrs:{color:"orange-3","text-color":"white",size:"1.8rem"}},[a("iconify-icon",{attrs:{icon:"material-symbols:table-bar",width:"18"}})],1),t._v("\n                              "+t._s(e.number)+"\n                          ")],1)}))],2)]),a("div",{staticClass:"col-12"},[0!==e.orderfood.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Food:\n                          "),t._l(e.orderfood.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                              "+t._s(e.food.detail.name)+" -\n                              "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                              ")]):a("span",[t._v("\n                              "+t._s(e.quantity)+"\n                              ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderbeverage.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Beverages:\n                          "),t._l(e.orderbeverage.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                              "+t._s(e.beverage.detail.name)+" -\n                              "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                              ")]):a("span",[t._v("\n                              "+t._s(e.quantity)+"\n                              ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.merge_order_inventory_item.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Inventory:\n                          "),t._l(e.merge_order_inventory_item.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                              "+t._s(e.inventory_item.item.name)+" -\n                              "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                              ")]):a("span",[t._v("\n                              "+t._s(e.quantity)+"\n                              ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.orderaddons.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Addons:\n                          "),t._l(e.orderaddons.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                              "+t._s(e.addons.detail.name)+" -\n                              "),e.complementary.complementary_quantity?a("span",[t._v("\n                              "+t._s(e.quantity+e.complementary.complementary_quantity)+"\n                              ")]):a("span",[t._v("\n                              "+t._s(e.quantity)+"\n                              ")])])}))],2):t._e()]),a("div",{staticClass:"col-12"},[0!==e.merge_order_combo_offer.filter((function(t){return"Canceled"!==t.status})).length?a("p",{staticClass:"text-subtitle2 q-mb-xs"},[t._v("\n                          Combo:\n                          "),t._l(e.merge_order_combo_offer.filter((function(t){return"Canceled"!==t.status})),(function(e){return a("q-badge",{key:e.id,staticClass:"q-mr-xs q-mb-sm",staticStyle:{padding:"8px"},attrs:{color:"light-green-1","text-color":"black"}},[t._v("\n                              "+t._s(e.combo_offer.name)+" -\n                              "),a("span",[t._v("\n                              "+t._s(e.quantity)+"\n                              ")])])}))],2):t._e()])])],1)])]),a("q-separator"),a("q-card-actions",{staticClass:"q-pa-sm",attrs:{align:"left"}},[1===e.order_status||6===e.order_status?a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelDialog(e.id)}}}):a("q-btn",{staticClass:"bg-delete",attrs:{push:"",label:"Cancel Complementary","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.cancelComplementary(e.id)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:1===e.order_status||6===e.order_status,expression:"merge.order_status === 1 || merge.order_status === 6"}],staticClass:"bg-confirm",attrs:{push:"",label:"Edit Order","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.editMergeOrder(e)}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:1===e.order_status||6===e.order_status,expression:"merge.order_status === 1 || merge.order_status === 6"}],staticClass:"bg-delete",attrs:{push:"",label:"Split","text-color":"black",size:"0.8rem"},on:{click:function(a){return t.splitDialog(e.merged_table.id)}}}),5===e.order_status?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Give Complementary"},on:{click:function(e){return t.complementaryDone(t.order.id)}}}):e.invoice?a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"Payment"},on:{click:function(a){return t.fetchSingleMergedOrder(e.id)}}}):a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:"0.8rem",label:"View Order"},on:{click:function(a){return t.fetchSingleMergedOrder(e.id)}}})],1)],1)],1)})),0)]),a("q-dialog",{model:{value:t.canc,callback:function(e){t.canc=e},expression:"canc"}},[a("DeleteLayout",{on:{deleteItem:t.deleteItem}})],1),a("q-dialog",{attrs:{"full-width":""},model:{value:t.tableShow,callback:function(e){t.tableShow=e},expression:"tableShow"}},[a("TransferTable",{attrs:{orderId:t.orderId},on:{closeTab:t.closeTab}})],1)],2)},vi=[],bi={components:{MergeTable:Ns,TransferTable:Xs,DeleteLayout:_e,ConfirmLayout:Hs},props:{unsettledOrder:{required:!0},mergeUnSettledOrder:{required:!0}},data(){return{ongoingSub:"all",orderList:[],quantity:1,discount:0,mergeDialog:!1,options:{page:1,itemsPerPage:14},singleOrder:{},maximizedToggle:!0,mergeOrders:[],orderId:null,tableShow:!1,splitId:null,cancelId:null,split:!1,canc:!1,compCancel:!1,compId:null,confirmDialog:!1,orderDict:{}}},created(){this.setOrder()},computed:{},methods:{setOrder(){this.mergeUnSettledOrder?this.mergeOrders.push(this.unsettledOrder):this.orderList.push(this.unsettledOrder)},fetchSingleOrder(t){var e=this.$router.resolve({path:"paymentinvoice",query:{id:t}});window.open(e.href,"_blank")},complementaryDone(t){this.compId=t,this.confirmDialog=!0},async freeItem(){if(this.compId.startsWith("O"))try{await et(this.compId,{complementary:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Complementary Given!"}),this.confirmDialog=!1,this.compId=null,this.fetchOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Error when giving Complementary!"}),this.confirmDialog=!1,this.compId=null}else if(this.compId.startsWith("M"))try{await nt(this.compId,{complementary:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Complementary Given!"}),this.confirmDialog=!1,this.compId=null,this.fetchMergeOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Error when giving Complementary!"}),this.confirmDialog=!1,this.compId=null}},cancelDialog(t){this.canc=!0,this.cancelId=t},cancelComplementary(t){this.compCancel=!0,this.cancelId=t},async compDelete(){if(this.cancelId.startsWith("O"))try{await et(this.cancelId,{cancel:!0,complementary:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Complementary Cancelled"}),this.cancelId=null,this.compCancel=!1,this.fetchOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable To Cancel Order"}),this.cancelId=null,this.compCancel=!1}else if(this.cancelId.startsWith("M"))try{await nt(this.cancelId,{cancel:!0,complementary:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Complementary Cancelled"}),this.cancelId=null,this.compCancel=!1,this.fetchMergeOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable To Cancel Order"}),this.cancelId=null,this.compCancel=!1}},async deleteItem(){if(this.cancelId.startsWith("O"))try{await et(this.cancelId,{cancel:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Order Cancelled"}),this.cancelId=null,this.canc=!1,this.fetchOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable To Cancel Order"}),this.cancelId=null,this.canc=!1}else if(this.cancelId.startsWith("M"))try{await nt(this.cancelId,{cancel:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Order Cancelled"}),this.cancelId=null,this.canc=!1,this.fetchMergeOrder()}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable To Cancel Order"}),this.cancelId=null,this.canc=!1}},transfer(t){t.invoice?this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Invoice for Order Already Exist! Cancel Current Invoice to Proceed"}):(this.tableShow=!0,this.orderId=t.id)},closeTab(){this.tableShow=!1,this.fetchOrder(),this.fetchMergeOrder()},fetchSingleMergedOrder(t){var e=this.$router.resolve({path:"mergepaymentinvoice",query:{id:t}});window.open(e.href,"_blank")},splitDialog(t){this.splitId=t,this.split=!0},confirmItem(){const t={status:3};dt(this.splitId,t).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Split Successful"}),this.split=!1,this.splitId=!1,this.fetchOrder(),this.fetchMergeOrder()})).catch((t=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response.data[0]}),this.split=!1,this.splitId=!1}))},editMergeOrder(t){var e=this.$router.resolve({path:"editmergeorder",query:{merge_id:t.id}});window.open(e.href,"_blank")},editOrderBtn(t){if(t.invoice)this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Invoice for Order Already Created! Cancel Current Invoice to Proceed"});else{var e=this.$router.resolve({path:"currentorder",query:{id:t.id}});window.open(e.href,"_blank")}}}},gi=bi,_i=Object(p["a"])(gi,hi,vi,!1,null,null,null),fi=_i.exports;kt()(_i,"components",{QCardSection:Rt["a"],QSeparator:Bt["a"],QChip:Ie["a"],QAvatar:xe["a"],QBadge:ke["a"],QCardActions:an["a"],QBtn:xt["a"],QCard:Ct["a"],QDialog:Nt["a"]});var yi={data(){return{last_page:"",current_page:1,next_page:"",previous_page:"",options:{page:1,itemsPerPage:6},fromDate:null,toDate:null,bsToDate:"",bsFromDate:"",search:"",customerId:null,propSinglePayment:{},propSingleId:null,propMergeId:null,propMergePayment:{},credit:{},payment:{},refundResponse:{},creditDialog:!1,showInvoice:!1,showMergeInvoice:!1,customerStatus:!1,dateType:"A.D",payArray:[],orderList:[],mergeOrders:[],showUO:!1,unsettledOrder:{},mergeUnSettledOrder:!1}},components:{FinalBill:St,CustomerList:fs,RefundMenu:vn,RefundBill:qn,ViewUnsettledOrderVue:fi},created(){this.fetchOrder(),this.fetchMergeOrder()},methods:{viewUnsettledOrder(t){this.showUO=!0,this.unsettledOrder=t},viewUnsettledMergeOrder(t){this.showUO=!0,this.unsettledOrder=t,this.mergeUnSettledOrder=!0},async fetchOrder(){const{page:t,itemsPerPage:e}=this.options;await Z({page:t,page_size:e,unsettled:!0,merge:1}).then((t=>{this.orderList=t.data.order.data}))},async fetchMergeOrder(){const t=await st({unsettled:!0});this.mergeOrders=t.data.data},detailBilling(t){this.propSinglePayment=t,this.propSingleId=t.id,this.showInvoice=!0},detailMergeBilling(t){this.propMergePayment=t,this.propMergeId=t.id,this.showMergeInvoice=!0},invoiceStatus(){this.showInvoice=!1},selectedCustomer(t){this.search=t.name,this.customerId=t.id,this.customerStatus=!1},searchData(){this.fetchPayment()},clear(){this.fromDate=null,this.toDate=null,this.search="",this.customerId=null,this.fetchPayment()},convertEnglishDate(t){let e,a;if(new I["a"](t).getAD().date<10){const a=0;e=a.toString()+new I["a"](t).getAD().date.toString()}else e=new I["a"](t).getAD().date.toString();if(new I["a"](t).getAD().month<10){const e=0;a=e.toString()+(new I["a"](t).getAD().month+1).toString()}else a=(new I["a"](t).getAD().month+1).toString();return"010"===a&&(a="10"),new I["a"](t).getAD().year.toString()+"-"+a+"-"+e}},watch:{async bsFromDate(){this.fromDate=this.convertEnglishDate(this.bsFromDate)},async bsToDate(){this.toDate=this.convertEnglishDate(this.bsToDate)},current_page(){this.options.page=this.current_page,this.fetchPayment()}}},qi=yi,Ci=Object(p["a"])(qi,ui,pi,!1,null,null,null),xi=Ci.exports;kt()(Ci,"components",{QInput:Et["a"],QRadio:Mt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QBadge:ke["a"],QDialog:Nt["a"]});var wi={components:{NewOrder:Ts,OnGoingOrder:nn,AllOrders:mi,UnsettledOrders:xi},created(){this.checkQuery()},methods:{checkQuery(){"payed"===this.$route.query.type?this.tab="allorders":"ongoing"===this.$route.query.type&&(this.tab="ongoingorder")}},data(){return{tab:"neworder",tabs:"all"}}},ki=wi,Ii=(a("80f8"),Object(p["a"])(ki,za,Ua,!1,null,null,null)),Si=Ii.exports;kt()(Ii,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var Di=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none q-pa-lg"},[t._v("Choose Items To Order")])])])])],1)]),a("div",{staticClass:"col-lg-12 col-md-12 q-pa-sm"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-lg-7 col-md-7"},[a("MenuList",{attrs:{lockItems:t.lockItems,unlock:t.unlock},on:{emitAllItems:t.emitAllItems,emitFoodItem:t.emitFoodItem,emitBeverageItem:t.emitBeverageItem,emitInventoryItem:t.emitInventoryItem,emitAddonsItem:t.emitAddonsItem,emitComboItem:t.emitComboItem}})],1),a("div",{staticClass:"col-lg-5 col-md-5 col-sm-12"},[a("OrderList",{attrs:{food:t.food,sendAll:t.sendAll,sendFood:t.sendFood,sendBeverage:t.sendBeverage,propInventory:t.propInventory,propBeverage:t.propBeverage,propAll:t.propAll,propAddons:t.propAddons,sendInventory:t.sendInventory,sendAddons:t.sendAddons,sendCombo:t.sendCombo,propCombo:t.propCombo},on:{totalPass:t.totalPass,submitStatus:t.submitStatus,emitLock:t.emitLock,reverseLock:t.reverseLock}})],1)]),a("div",{staticClass:"col-12 q-mt-xs"},[a("TotalBar",{attrs:{propAllItem:t.propAllItem,stat:t.stat,unlock:t.unlock}})],1)])])},Ai=[],Fi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12 col-sm-12"},[a("q-input",{attrs:{type:"text",filled:"",dense:"",placeholder:"Search","bg-color":"amber-2"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticStyle:{cursor:"pointer"},attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),a("q-card",{staticClass:"my-card card-shadow q-mt-sm",attrs:{bordered:""}},[a("q-splitter",{staticStyle:{height:"65vh"},scopedSlots:t._u([{key:"before",fn:function(){return[a("q-tabs",{staticStyle:{padding:"0!important"},attrs:{vertical:""},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("q-tab",{attrs:{name:"featured",label:"Top Selling"}}),a("q-tab",{attrs:{name:"all",label:"All"}}),a("q-tab",{attrs:{name:"food",label:"Food"}}),a("q-tab",{attrs:{name:"beverage",label:"Beverage"}}),a("q-tab",{attrs:{name:"addons",label:"Add-ons"}}),a("q-tab",{attrs:{name:"inventory",label:"Inventory"}})],1)]},proxy:!0},{key:"after",fn:function(){return[a("q-tab-panels",{attrs:{animated:"",swipeable:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[a("q-tab-panel",{staticClass:"q-pa-md",attrs:{name:"featured"}},[a("div",{staticClass:"row q-pa-md q-col-gutter-xs"},t._l(t.filterFeatured,(function(e){return a("div",{key:e.id,staticClass:"col-3 q-mb-lg"},[a("q-card",{directives:[{name:"show",rawName:"v-show",value:!1===t.itemsLocked,expression:"itemsLocked === false"}],staticClass:"q-pa-sm q-mt-lg",staticStyle:{"box-shadow":"none",border:"none"}},[a("q-card-section",{staticClass:"q-pa-md relative-position text-center shape-css"},[a("div",{staticClass:"text-h8 q-mt-md font-bold"},[t._v("\n                      "+t._s(e.name)+"\n                    ")])]),a("q-card-section",{staticClass:"q-pa-none text-center absolute-top",on:{click:function(a){return t.allImageSend(e)}}},[e.image?a("span",[a("q-img",{staticClass:"order-img",staticStyle:{cursor:"pointer"},attrs:{src:e.image}})],1):a("span",[a("q-avatar",{staticClass:"order-img bg-delete",staticStyle:{cursor:"pointer"},attrs:{"text-color":"white"}},[t._v("\n                        "+t._s(e.name[0].toUpperCase())+"\n                      ")])],1)])],1)],1)})),0)]),a("q-tab-panel",{staticClass:"q-pa-md",attrs:{name:"all"}},[a("div",{staticClass:"row q-pa-md q-col-gutter-xs"},t._l(t.filteredList,(function(e){return a("div",{key:e.id,staticClass:"col-3 q-mb-lg",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.allImageSend(e)}}},[a("q-card",{directives:[{name:"show",rawName:"v-show",value:!1===t.itemsLocked,expression:"itemsLocked === false"}],staticClass:"q-pa-sm q-mt-lg",staticStyle:{"box-shadow":"none",border:"none"}},[a("q-card-section",{staticClass:"q-pa-md relative-position text-center shape-css"},[a("div",{staticClass:"text-h8 q-mt-md font-bold"},[t._v("\n                      "+t._s(e.name)+"\n                    ")])]),a("q-card-section",{staticClass:"q-pa-none text-center absolute-top"},[e.image?a("span",[a("q-img",{staticClass:"order-img",staticStyle:{cursor:"pointer"},attrs:{src:e.image}})],1):a("span",[a("q-avatar",{staticClass:"order-img bg-delete",staticStyle:{cursor:"pointer"},attrs:{"text-color":"white"}},[t._v("\n                        "+t._s(e.name[0].toUpperCase())+"\n                      ")])],1)])],1)],1)})),0)]),a("q-tab-panel",{staticClass:"q-pa-md",attrs:{name:"food"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.itemsLocked,expression:"itemsLocked === false"}],staticClass:"row q-pa-md q-col-gutter-xs"},t._l(t.filteredFood,(function(e){return a("div",{key:e.id,staticClass:"col-3 q-mb-lg",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.foodImageSend(e)}}},[a("q-card",{staticClass:"q-pa-sm q-mt-lg",staticStyle:{"box-shadow":"none",border:"none"}},[a("q-card-section",{staticClass:"q-pa-md relative-position text-center shape-css"},[a("div",{staticClass:"text-h8 q-mt-md font-bold"},[t._v("\n                      "+t._s(e.name)+"\n                    ")])]),a("q-card-section",{staticClass:"q-pa-none text-center absolute-top"},[e.image?a("span",[a("q-img",{staticClass:"order-img",staticStyle:{cursor:"pointer"},attrs:{src:e.image}})],1):a("span",[a("q-avatar",{staticClass:"order-img bg-delete",staticStyle:{cursor:"pointer"},attrs:{"text-color":"white"}},[t._v("\n                        "+t._s(e.name[0].toUpperCase())+"\n                      ")])],1)])],1)],1)})),0)]),a("q-tab-panel",{staticClass:"q-pa-md",attrs:{name:"beverage"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.itemsLocked,expression:"itemsLocked === false"}],staticClass:"row q-pa-md q-col-gutter-xs"},t._l(t.filteredBev,(function(e){return a("div",{key:e.id,staticClass:"col-3 q-mb-lg",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.beverageImageSend(e)}}},[a("q-card",{staticClass:"q-pa-sm q-mt-lg",staticStyle:{"box-shadow":"none",border:"none"}},[a("q-card-section",{staticClass:"q-pa-md relative-position text-center shape-css"},[a("div",{staticClass:"text-h8 q-mt-md font-bold"},[t._v("\n                      "+t._s(e.name)+"\n                    ")])]),a("q-card-section",{staticClass:"q-pa-none text-center absolute-top"},[e.image?a("span",[a("q-img",{staticClass:"order-img",staticStyle:{cursor:"pointer"},attrs:{src:e.image}})],1):a("span",[a("q-avatar",{staticClass:"order-img bg-delete",staticStyle:{cursor:"pointer"},attrs:{"text-color":"white"}},[t._v("\n                        "+t._s(e.name[0].toUpperCase())+"\n                      ")])],1)])],1)],1)})),0)]),a("q-tab-panel",{staticClass:"q-pa-md",attrs:{name:"addons"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.itemsLocked,expression:"itemsLocked === false"}],staticClass:"row q-pa-md q-col-gutter-xs"},t._l(t.filteredAddons,(function(e){return a("div",{key:e.id,staticClass:"col-3 q-mb-lg",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.addonsImageSend(e)}}},[a("q-card",{staticClass:"q-pa-sm q-mt-lg",staticStyle:{"box-shadow":"none",border:"none"}},[a("q-card-section",{staticClass:"q-pa-md relative-position text-center shape-css"},[a("div",{staticClass:"text-h8 q-mt-md font-bold"},[t._v("\n                      "+t._s(e.name)+"\n                    ")])]),a("q-card-section",{staticClass:"q-pa-none text-center absolute-top"},[e.image?a("span",[a("q-img",{staticClass:"order-img",staticStyle:{cursor:"pointer"},attrs:{src:e.image}})],1):a("span",[a("q-avatar",{staticClass:"order-img bg-delete",staticStyle:{cursor:"pointer"},attrs:{"text-color":"white"}},[t._v("\n                        "+t._s(e.name[0].toUpperCase())+"\n                      ")])],1)])],1)],1)})),0)]),a("q-tab-panel",{staticClass:"q-pa-md",attrs:{name:"inventory"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.itemsLocked,expression:"itemsLocked === false"}],staticClass:"row q-pa-md q-col-gutter-xs"},t._l(t.filteredInventory,(function(e){return a("div",{key:e.id,staticClass:"col-3 q-mb-lg",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.inventoryImageSend(e)}}},[a("q-card",{staticClass:"q-pa-sm q-mt-lg",staticStyle:{"box-shadow":"none",border:"none"}},[a("q-card-section",{staticClass:"q-pa-md relative-position text-center shape-css"},[a("div",{staticClass:"text-h8 q-mt-md font-bold"},[t._v("\n                      "+t._s(e.name)+"\n                    ")])]),a("q-card-section",{staticClass:"q-pa-none text-center absolute-top"},[e.image?a("span",[a("q-img",{staticClass:"order-img",staticStyle:{cursor:"pointer"},attrs:{src:e.image}})],1):a("span",[a("q-avatar",{staticClass:"order-img bg-delete",staticStyle:{cursor:"pointer"},attrs:{"text-color":"white"}},[t._v("\n                        "+t._s(e.name[0].toUpperCase())+"\n                      ")])],1)])],1)],1)})),0)])],1)]},proxy:!0}]),model:{value:t.qsplit,callback:function(e){t.qsplit=e},expression:"qsplit"}})],1)],1)},Ti=[];const Oi=`${A["a"]}/api/v1/addons/`;function $i(t={}){return Object(D["a"])().get(Oi,{params:t})}function Qi(t){return Object(D["a"])().post(Oi,t)}function Mi(t){return Object(D["a"])().delete(`${Oi}${t}/`)}function Ei(t,e){return Object(D["a"])().put(`${Oi}${t}/`,e)}const Ri=`${A["a"]}/api/v1/combo/offer/`;function Bi(t){return Object(D["a"])().post(Ri,t)}function Pi(t={}){return Object(D["a"])().get(Ri,{params:t})}function Ni(t,e){return Object(D["a"])().put(`${Ri}${t}`,e)}const ji=`${A["a"]}/api/v1/inventory/`,Li=`${A["a"]}/api/v1/inventory/exchange/`;A["a"];function zi(t){return Object(D["a"])().post(ji,t)}function Ui(t,e){return Object(D["a"])().put(`${ji}purchase/${t}/`,e)}function Vi(t={}){return Object(D["a"])().get(ji,{params:t})}function Wi(t,e){return Object(D["a"])().put(`${ji}${t}/`,e)}function Yi(t){return Object(D["a"])().get(`${Li}${t}/`)}function Gi(t){return Object(D["a"])().post(`${ji}activity/`,{stocks:t})}function Hi(t={}){return Object(D["a"])().get(`${ji}activity/`,{params:t})}function Ji(t={}){return Object(D["a"])().get(`${ji}purchase/`,{params:t})}var Ki={data(){return{qsplit:20,last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1},foodItems:[],allItems:[],beverageItems:[],tabs:"all",search:"",itemsLocked:!1,search:"",addonsItems:[],inventoryItems:[],featured:{},featuredItems:[],comboItems:[]}},props:{lockItems:{}},created(){this.fetchFoodItem(),this.fetchBeverage(),this.fetchAddons(),this.fetchFeatured(),this.fetchCombo(),this.fetchInventory()},methods:{async fetchFeatured(){const t=await _t({set_featured:!1});this.featured=t.data,this.compareItems()},compareItems(){this.foodItems.forEach((t=>{this.featured.food.forEach((e=>{t.id===e.id&&this.featuredItems.push(t)}))})),this.beverageItems.forEach((t=>{this.featured.beverage.forEach((e=>{t.id===e.id&&this.featuredItems.push(t)}))})),this.addonsItems.forEach((t=>{this.featured.addons.forEach((e=>{t.id===e.id&&this.featuredItems.push(t)}))}))},async fetchInventory(){const t=await Vi({menu:!0});this.inventoryItems=t.data,this.inventoryItems&&this.inventoryItems.forEach((t=>{this.allItems.push(t)}))},async fetchFoodItem(){const{page:t}=this.options,e=await Ht({page:t,page_size:1e3});this.foodItems=e.data.food.data,this.foodItems&&this.foodItems.forEach((t=>{this.allItems.push(t)}))},fetchBeverage:async function(){const{page:t}=this.options,e=await Je({page:t,page_size:1e3});this.beverageItems=e.data.beverage.data,this.beverageItems&&this.beverageItems.forEach((t=>{this.allItems.push(t)}))},async fetchAddons(){const{page:t}=this.options,e=await $i({page:t,page_size:1e3});if(this.addonsItems=e.data.addons.data,this.addonsItems)for(var a=0;a<this.addonsItems.length;a++)this.allItems.push(this.addonsItems[a])},async fetchCombo(){const{page:t}=this.options,e=await Pi({page:t,page_size:1e3});this.comboItems=e.data.combo_offer.data,this.comboItems&&this.comboItems.forEach((t=>{this.allItems.push(t)}))},allImageSend(t){this.$emit("emitAllItems",t)},foodImageSend(t){this.$emit("emitFoodItem",t)},beverageImageSend(t){this.$emit("emitBeverageItem",t)},addonsImageSend(t){this.$emit("emitAddonsItem",t)},comboImageSend(t){this.$emit("emitComboItem",t)},inventoryImageSend(t){this.$emit("emitInventoryItem",t)}},computed:{filteredList(){return this.allItems.filter((t=>t.name.toLowerCase().includes(this.search.toLowerCase())))},filteredFood(){return this.foodItems?this.foodItems.filter((t=>t.name.toLowerCase().includes(this.search.toLowerCase()))):[]},filteredAddons(){return this.addonsItems?this.addonsItems.filter((t=>t.name.toLowerCase().includes(this.search.toLowerCase()))):[]},filteredBev(){return this.beverageItems?this.beverageItems.filter((t=>t.name.toLowerCase().includes(this.search.toLowerCase()))):[]},filteredInventory(){return this.inventoryItems?this.inventoryItems.filter((t=>t.name.toLowerCase().includes(this.search.toLowerCase()))):[]},filterFeatured(){return this.featuredItems?this.featuredItems.filter((t=>t.name.toLowerCase().includes(this.search.toLowerCase()))):[]},filteredCombo(){return this.comboItems?this.comboItems.filter((t=>t.name.toLowerCase().includes(this.search.toLowerCase()))):[]}},watch:{lockItems(){this.itemsLocked=!this.itemsLocked}}},Zi=Ki,Xi=a("8562"),to=Object(p["a"])(Zi,Fi,Ti,!1,null,null,null),eo=to.exports;kt()(to,"components",{QInput:Et["a"],QIcon:ne["a"],QCard:Ct["a"],QSplitter:Xi["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"],QCardSection:Rt["a"],QImg:oe["a"],QAvatar:xe["a"]});var ao=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12 ",staticStyle:{height:"66vh","overflow-x":"scroll"}},[a("q-markup-table",{attrs:{flat:"",bordered:""}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Item")]),a("th",{staticClass:"text-center"},[t._v("Unit Price")]),a("th",{staticClass:"text-left"},[t._v("Qty.")]),a("th",{staticClass:"text-center"},[t._v("Total")]),a("th",{staticClass:"text-center"},[t._v("Action")])])]),a("tbody",t._l(t.filterItem,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[t._v(t._s(e.name.substring(0,14)))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(e.price))]),t.disableBtn?a("td",[t._v(t._s(e.quantity))]):a("td",{staticClass:"text-center"},[a("q-input",{staticStyle:{"max-width":"60px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-1",min:"1"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",t._n(a))},expression:"item.quantity"}})],1),a("td",{staticClass:"text-center"},[t._v("\n              Rs. "+t._s(t.total(e))+"\n            ")]),a("td",{staticClass:"text-center"},[t.disableBtn?a("q-btn",{attrs:{disable:"",size:"0.7rem",title:"Remove",round:"",color:"red-5",icon:"delete"}}):a("q-btn",{attrs:{size:"0.7rem",title:"Remove",round:"",color:"red-5",icon:"delete"},on:{click:function(a){return t.deleteItems(e.name)}}})],1)])})),0)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.allItem.length,expression:"allItem.length !== 0"}],staticClass:"col-3"},[t.disableBtn?a("q-btn",{staticClass:"bg-delete",attrs:{padding:"sm",label:"Edit Order",size:"0.8rem",push:"",dense:""},on:{click:function(e){return t.editOrderBtn()}}}):a("q-btn",{staticClass:"bg-payment",attrs:{label:"Confirm Order",padding:"sm",size:"0.8rem",push:"",dense:""},on:{click:function(e){return t.orderBtn(t.allItem)}}})],1)])])},so=[],no=(a("e01a"),{data(){return{allItem:[],foodName:"",items:{},orderButton:!1,orderStatus:!1,disableBtn:!1,propOrder:{},orderId:null,orders:{},sendItems:{},mergeOrderId:null,mergeOrders:{},propMergeOrder:{},singleOrders:{},foods:[],beverages:[],addons:[],mergedFoods:[],mergedBeverages:[],mergedAddons:[]}},props:{food:{},propAll:{},propBeverage:{},sendAll:{},propAddons:{},sendBeverage:{},sendFood:{},sendAddons:{},propCombo:{},sendCombo:{},propInventory:{},sendInventory:{}},created(){this.$route.query.id&&this.fetchSingleOrder(),this.$route.query.merge_id&&this.fetchMergeOrder()},watch:{sendAll(){this.items=this.propAll,this.computeAll()},sendFood(){this.items=this.food,this.computeAll()},sendInventory(){this.items=this.propInventory,this.computeAll()},sendBeverage(){this.items=this.propBeverage,this.computeAll()},sendAddons(){this.items=this.propAddons,this.computeAll()},sendCombo(){this.items=this.propCombo,this.computeAll()}},methods:{onInput(t){this.model=t,t&&t<1&&(this.model=1)},keyHandler(t){this.model<2&&"ArrowDown"===t.key&&t.preventDefault(),"-"===t.key&&t.preventDefault()},total(t){return t.total=(t.quantity*t.price).toFixed(2),t.total},deleteItems(t){var e=this.allItem.findIndex((e=>e.name===t));-1!==e&&this.allItem.splice(e,1)},fetchSingleOrder(){this.orderId=this.$route.query.id,X(this.orderId).then((t=>{this.singleOrders=t.data.order,this.propOrder=this.singleOrders,this.propOrder.orderfood.map((t=>{this.allItem.push({id:t.food.id,name:t.food.detail.name,quantity:t.quantity,price:t.food.detail.price,category:t.food.category})})),this.propOrder.orderbeverage.map((t=>{this.allItem.push({id:t.beverage.id,name:t.beverage.detail.name,quantity:t.quantity,price:t.beverage.detail.price})})),this.propOrder.orderaddons.map((t=>{this.allItem.push({id:t.addons.id,name:t.addons.detail.name,quantity:t.quantity,price:t.addons.detail.price,description:t.addons.detail.description})})),this.propOrder.order_combo_offer.map((t=>{this.allItem.push({id:t.combo_offer.id,name:t.combo_offer.name,quantity:t.quantity,price:t.combo_offer.price})})),this.propOrder.order_inventory_item.map((t=>{this.allItem.push({id:t.inventory_item.id,name:t.inventory_item.item.name,quantity:t.quantity,price:t.inventory_item.sales_price})}))}))},async fetchMergeOrder(){this.mergeOrderId=this.$route.query.merge_id;const t=await mt(this.mergeOrderId);this.mergeOrders=t.data,this.calculateDuplicate()},computeAll(){if(0===this.allItem.length)this.$set(this.items,"quantity",1),this.allItem.push(this.items),this.allItem.map((t=>k()(k()({},t),{},{total:null}))),this.items={};else{let t=this.allItem.find((t=>t.name===this.items["name"]));if(t)for(let e=0;e<this.allItem.length;e++)this.items["name"]===this.allItem[e]["name"]&&(this.allItem[e]["quantity"]=this.allItem[e]["quantity"]+1,this.$set(this.allItem[e],"quantity",this.allItem[e]["quantity"]),this.items={});else this.$set(this.items,"quantity",1),this.allItem.push(this.items),this.allItem.map((t=>k()(k()({},t),{},{total:null}))),this.items={}}},editOrderBtn(){this.disableBtn=!1,this.$emit("reverseLock")},orderBtn(t){this.disableBtn=!0,this.$emit("totalPass",t),this.$emit("submitStatus",this.orderButton),this.$emit("emitLock")},calculateDuplicate(){this.mergeOrders.orderfood.forEach((t=>{this.foods.push(t)})),this.mergeOrders.orderbeverage.forEach((t=>{this.beverages.push(t)})),this.mergeOrders.orderaddons.forEach((t=>{this.addons.push(t)})),this.mergedFoods=Object.values(this.foods.reduce(((t,e)=>{const a=`${e.food.detail.name}`;return t[a]||(t[a]={complementary:e.complementary,discount:e.discount,food:e.food,id:[],quantity:0,status:e.status,subtotal:0}),t[a].id.push(e.id),t[a].quantity=t[a].quantity+e.quantity,t[a].subtotal=t[a].subtotal+parseFloat(e.subtotal),t}),{})),this.mergedBeverages=Object.values(this.beverages.reduce(((t,e)=>{const a=`${e.beverage.detail.name}`;return t[a]||(t[a]={complementary:e.complementary,discount:e.discount,beverage:e.beverage,id:[],quantity:0,status:e.status,subtotal:0}),t[a].id.push(e.id),t[a].quantity=t[a].quantity+e.quantity,t[a].subtotal=t[a].subtotal+parseFloat(e.subtotal),t}),{})),this.mergedAddons=Object.values(this.addons.reduce(((t,e)=>{const a=`${e.addons.detail.name}`;return t[a]||(t[a]={complementary:e.complementary,discount:e.discount,addons:e.addons,id:[],quantity:0,status:e.status,subtotal:0}),t[a].id.push(e.id),t[a].quantity=t[a].quantity+e.quantity,t[a].subtotal=t[a].subtotal+parseFloat(e.subtotal),t}),{})),this.mergedFoods.map((t=>{this.allItem.push({id:t.food.id,name:t.food.detail.name,quantity:t.quantity,price:t.food.detail.price,category:t.food.category})})),this.mergedBeverages.map((t=>{this.allItem.push({id:t.beverage.id,name:t.beverage.detail.name,quantity:t.quantity,price:t.beverage.detail.price})})),this.mergedAddons.map((t=>{this.allItem.push({id:t.addons.id,name:t.addons.detail.name,quantity:t.quantity,price:t.addons.detail.price,description:t.addons.detail.description})}))}},computed:{filterItem(){return this.allItem.filter((t=>!(0===t.quantity)))}}}),io=no,oo=Object(p["a"])(io,ao,so,!1,null,null,null),ro=oo.exports;kt()(oo,"components",{QMarkupTable:Te["a"],QInput:Et["a"],QBtn:xt["a"]});var lo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-toolbar",{staticClass:"orange-1 fixed-bottom",staticStyle:{height:"10vh"}},[a("q-toolbar-title",[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-6"},[t._v("\n           \n        ")]),a("div",{staticClass:"col-2 flex flex-center"},[a("h6",{staticClass:"text-black"},[t._v("Total:Rs."+t._s(t.confirmTotal))])]),t.$route.query.id||t.$route.query.merge_id?t._e():a("div",{staticClass:"col-2 q-mt-sm",attrs:{flex:"","flex-center":""}},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.stat,expression:"stat"}],staticClass:"bg-confirm float-right",attrs:{label:"Quick Payment",padding:"sm sm",push:"",dense:"",size:".8rem",icon:"done_all"},on:{click:function(e){t.pay=!0}}})],1),t.$route.query.id||t.$route.query.merge_id?a("div",{staticClass:"col-2 flex flex-center"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.stat,expression:"stat"}]},[a("q-btn",{staticClass:"bg-confirm",attrs:{padding:"sm sm",push:"",dense:"",size:".8rem",label:"Update Order",icon:"done_all"},on:{click:function(e){return t.updateOrderBtn()}}})],1)]):a("div",{staticClass:"col-2 q-mt-sm"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.stat,expression:"stat"}],staticClass:"bg-confirm float-right",attrs:{label:"Order Now",padding:"sm sm",push:"",dense:"",size:".8rem",icon:"done_all"},on:{click:function(e){return t.orderConfirm()}}})],1)]),a("q-dialog",{model:{value:t.pay,callback:function(e){t.pay=e},expression:"pay"}},[a("q-card",[a("div",{staticClass:"row q-col-gutter-md q-pa-xl"},[t._v("\n            Payment Detail("+t._s(t.confirmTotal)+"):\n            "),a("div",{staticClass:"col-12 q-mt-sm"},[a("q-select",{ref:"mySelect",attrs:{"bg-color":"orange-1",dense:"",filled:"",options:t.paymentModeOptions,label:"Select Payment Mode","max-values":"2",multiple:"","stack-label":"","use-chips":"","map-options":"","emit-value":""},on:{input:function(e){return t.handleSelect()}},model:{value:t.paymentMode,callback:function(e){t.paymentMode=e},expression:"paymentMode"}})],1),a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[t.paymentMode.length>0?a("div",{staticClass:"col-6"},[a("p",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[1],expression:"paymentMode[1] === 7"}],staticClass:"text-h7"},[t._v("Payment Details")]),a("q-input",{directives:[{name:"show",rawName:"v-show",value:1===t.paymentMode[0],expression:"paymentMode[0] === 1"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cash Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:2===t.paymentMode[0],expression:"paymentMode[0] === 2"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cheque Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:3===t.paymentMode[0],expression:"paymentMode[0] === 3"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"E-sewa Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:4===t.paymentMode[0],expression:"paymentMode[0] === 4"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"FonePay Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:5===t.paymentMode[0],expression:"paymentMode[0] === 5"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Khalti Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:6===t.paymentMode[0],expression:"paymentMode[0] === 6"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Card Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}})],1):t._e(),2===t.paymentMode.length?a("div",{staticClass:"col-6"},[a("p",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[0],expression:"paymentMode[0] === 7"}],staticClass:"text-h7"},[t._v("Payment Details")]),1===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cash Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),2===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cheque Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),3===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"E-sewa Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),4===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"FonePay Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),5===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Khalti Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),6===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Card Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e()],1):t._e()]),a("div",{staticClass:"col-12 q-mt-md"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.paymentMode.length>=1,expression:"paymentMode.length >= 1"}],staticClass:"bg-payment",attrs:{size:"0.8rem",push:"",label:"Confirm Payment"},on:{click:function(e){return t.billConfirm()}}})],1)])]),a("q-dialog",{attrs:{persistent:"","full-height":"","full-width":""},model:{value:t.billStatus,callback:function(e){t.billStatus=e},expression:"billStatus"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId}})],1)],1)],1)],1)],1)},co=[],mo={components:{FinalBill:St},data(){return{dueDate:"",billStatus:!1,propSingleId:null,paymentAmount:[],paymentArray:[],paymentMode:[1],paymentModeOptions:[{label:"Cash",value:1},{label:"Cheque",value:2},{label:"E-sewa",value:3},{label:"Fonepay",value:4},{label:"Khalti",value:5},{label:"Card",value:6}],pay:!1,totalItems:[],confirmTotal:0,sendFoods:[],sendBeverages:[],sendAddons:[],sendCombo:[],sendInventory:[],orderfood:{},orderbeverage:{},orderaddons:{},ordercombo:{},orderinventory:{},refresh:!1}},props:{propAllItem:{},stat:{},unlock:{}},created(){Ja.$on("message",this.handleSignal)},methods:{handleSelect(){this.$nextTick((()=>{this.$refs.mySelect.$refs.menu.hide()}))},handleSignal(t){switch(t=JSON.parse(t.data),t.type){case"update_order":this.closeWindow();break;case"order_complete":this.closeWindow();break}},calculateTotal(){var t=0;this.totalItems.forEach((e=>{e.complementary||(e.total&&(t+=parseFloat(e.total)),e.total)})),this.confirmTotal=t.toFixed(2)},delay(t){return new Promise((e=>setTimeout(e,t)))},async closeWindow(){await this.delay(1e3),window.close()},async orderConfirm(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:100,message:"Ordering Items !",messageColor:"white"}),this.sendAllItems();const t={table_id:this.$route.query.table_no,order_type:this.$route.query.type,orderfood:this.sendFoods,orderbeverage:this.sendBeverages,orderaddons:this.sendAddons,ordercombooffer:this.sendCombo,orderinventoryitem:this.sendInventory,total:this.confirmTotal,customer:this.$route.query.customer_id,time:this.$route.query.time,num_of_customer:this.$route.query.num_cust};await K(t).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Order Added Successfully"});const e=sessionStorage.getItem("res_name");Ja.send(JSON.stringify({type:"order_complete",res_name:e})),this.$q.loading.hide(),this.closeWindow()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response.data||"Unable to Add Order"})}))},async billConfirm(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:100,message:"Ordering Items !",messageColor:"white"}),this.paymentArray=[],this.sendAllItems();var t={};if(this.paymentMode[1])for(var e=0;e<2;e++)this.$set(t,"type",this.paymentMode[e]),this.$set(t,"split_pay",this.paymentAmount[e]),this.paymentArray.push(t),t={};else this.$set(t,"type",this.paymentMode[0]),this.$set(t,"split_pay",this.paymentAmount[0]),this.paymentArray.push(t);const a={paymentmethod:this.paymentArray,table_id:this.$route.query.table_no,order_type:this.$route.query.type,orderfood:this.sendFoods,orderbeverage:this.sendBeverages,orderaddons:this.sendAddons,ordercombooffer:this.sendCombo,orderinventoryitem:this.sendInventory,total:this.confirmTotal,customer:this.$route.query.customer_id,time:this.$route.query.time,num_of_customer:this.$route.query.num_cust};await J(a).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Order Added Successfully"}),this.propSingleId=t.data.payment.id,this.billStatus=!0,this.$q.loading.hide()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response.data||"Unable to Add Order"})}))},updateOrderBtn(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:100,message:"Updating Order !",messageColor:"white"}),this.sendAllItems();const t={orderfood:this.sendFoods,orderbeverage:this.sendBeverages,orderaddons:this.sendAddons,orderinventoryitem:this.sendInventory};tt(this.$route.query.id,t).then((t=>{this.$q.loading.hide(),this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Order Updated Successfully"});const e=sessionStorage.getItem("res_name");Ja.send(JSON.stringify({type:"update_order",res_name:e}))})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",icon:"warning",message:"Unable to Order"})}))},sendAllItems(){this.sendAddons=[],this.sendFoods=[],this.sendBeverages=[],this.sendInventory=[],this.sendCombo=[],this.totalItems.forEach((t=>{t.id.startsWith("F")?(this.$set(this.orderfood,"food",t.id),this.$set(this.orderfood,"quantity",t.quantity),this.sendFoods.push(this.orderfood),this.orderfood={}):t.id.startsWith("A")?(this.$set(this.orderaddons,"addons",t.id),this.$set(this.orderaddons,"quantity",t.quantity),this.sendAddons.push(this.orderaddons),this.orderaddons={}):t.id.startsWith("B")?(this.$set(this.orderbeverage,"beverage",t.id),this.$set(this.orderbeverage,"quantity",t.quantity),this.sendBeverages.push(this.orderbeverage),this.orderbeverage={}):t.id.startsWith("I")?(this.$set(this.orderinventory,"inventory_item",t.id),this.$set(this.orderinventory,"quantity",t.quantity),this.sendInventory.push(this.orderinventory),this.orderinventory={}):t.id.startsWith("C")&&(this.$set(this.ordercombo,"combo_offer",t.id),this.$set(this.ordercombo,"quantity",t.quantity),this.sendCombo.push(this.ordercombo),this.ordercombo={})}))}},watch:{paymentMode(){this.paymentAmount[0]=null,this.paymentAmount[1]=null},propAllItem(){this.totalItems=this.propAllItem,this.calculateTotal()},unlock(){this.calculateTotal()}}},uo=mo,po=a("65c6"),ho=a("6ac5"),vo=Object(p["a"])(uo,lo,co,!1,null,null,null),bo=vo.exports;kt()(vo,"components",{QToolbar:po["a"],QToolbarTitle:ho["a"],QBtn:xt["a"],QDialog:Nt["a"],QCard:Ct["a"],QSelect:ae["a"],QInput:Et["a"]});var go={components:{TotalBar:bo,OrderList:ro,MenuList:eo},data(){return{sendFood:1,sendBeverage:1,sendAll:1,sendAddons:1,sendInventory:1,food:{},propAll:{},propBeverage:{},propAllItem:{},propAddons:{},propInventory:{},stat:!1,lockItems:!1,status:0,searchItem:"",unlock:!0,propCombo:{},sendCombo:1}},methods:{emitAllItems(t){this.propAll=t,this.sendAll=this.sendAll+1},emitFoodItem(t){this.food=t,this.sendFood=this.sendFood+1},emitBeverageItem(t){this.propBeverage=t,this.sendBeverage=this.sendBeverage+1},emitInventoryItem(t){this.propInventory=t,this.sendInventory=this.sendInventory+1},emitAddonsItem(t){this.propAddons=t,this.sendAddons=this.sendAddons+1},emitComboItem(t){this.propCombo=t,this.sendCombo=this.sendCombo+1},totalPass(t){this.propAllItem=t},submitStatus(){this.stat=!0},emitLock(){this.lockItems=!0,this.unlock=!0},search(t){this.searchItem=t},reverseLock(){this.propAllItem={},this.lockItems=!1,this.stat=!1,this.unlock=!1}}},_o=go,fo=Object(p["a"])(_o,Di,Ai,!1,null,null,null),yo=fo.exports;kt()(fo,"components",{QCard:Ct["a"]});var qo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Inventory Items")])])])])],1)]),a("q-card",[a("q-tabs",{staticClass:"text-grey q-mb-md",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"add",label:"Add Items"}}),a("q-tab",{attrs:{name:"list",label:"Items List"}})],1),a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"add"}},[a("AddInventoryItems")],1),a("q-tab-panel",{attrs:{name:"list"}},[a("InventoryItemsList")],1)],1)],1)],1)},Co=[],xo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-form",[a("ValidationObserver",[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Item Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Item Name",dense:""},model:{value:t.itemName,callback:function(e){t.itemName=e},expression:"itemName"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Unit",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Unit"},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1)])]),a("p",{staticClass:"q-mb-none"},[t.edit?a("q-btn",{staticClass:"q-mt-md",attrs:{push:"",color:"orange-3",size:"0.8rem","text-color":"black",label:"Update Item",type:"button"},on:{click:t.update}}):a("q-btn",{staticClass:"q-mt-md",attrs:{push:"",color:"orange-3","text-color":"black",size:"0.8rem",label:"Add Item",type:"button"},on:{click:t.add}})],1)],1)},wo=[];const ko=`${A["a"]}/api/v1/inventory/item/`;A["a"];function Io(t){return Object(D["a"])().post(ko,t)}function So(t={}){return Object(D["a"])().get(ko,{params:t})}function Do(t,e){return Object(D["a"])().put(`${ko}${t}/`,e)}function Ao(t){return Object(D["a"])().delete(`${ko}${t}/`)}Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"}));var Fo={data(){return{last_page:"",current_page:"",next_page:"",previous_page:"",itemName:"",itemCategoryOption:[],unit:"",options:{page:1},itemCategory:null,unitPrice:null}},props:{edit:{required:!0},inv:{required:!0}},components:{ValidationObserver:Zt["a"],ValidationProvider:Zt["b"]},beforeMount(){this.checkEdit()},methods:{checkEdit(){this.edit&&(this.itemName=this.inv.name,this.unit=this.inv.unit.unit)},add(){const t={name:this.itemName,unit:this.unit};Io(t).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Item Added Successfully"}),this.itemName=null,this.unit=null,this.$emit("closeAdd")})).catch((({response:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Update "+t.data[0]})}))},update(){const t={name:this.itemName,unit:this.unit};Do(this.inv.id,t).then((({res:t})=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Item Updated Successfully"}),this.$emit("closeForm")})).catch((({response:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Update "+t.data[0]})}))}}},To=Fo,Oo=Object(p["a"])(To,xo,wo,!1,null,null,null),$o=Oo.exports;kt()(Oo,"components",{QForm:Oa["a"],QInput:Et["a"],QBtn:xt["a"]});var Qo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"col-6"},[a("span",{staticClass:"q-mb-md pointer float-right",on:{click:function(e){t.add=!0}}},[a("q-chip",{staticClass:"menu-chip",attrs:{color:"orange-1"}},[a("q-avatar",{staticClass:"b-r-8",attrs:{push:"",icon:"add",padding:"md md",type:"button",color:"orange-3",size:"2.5rem","text-color":"black"}}),t._v("\n          Add Item\n        ")],1)],1)]),a("q-dialog",{model:{value:t.add,callback:function(e){t.add=e},expression:"add"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-md"},[a("h6",{staticClass:"q-ma-none"},[t._v("Add Details")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("AddInventoryItems",{on:{closeAdd:t.closeAdd}})],1)],1)],1)],1),a("div",{staticClass:"q-mt-md"},[a("q-markup-table",{attrs:{flat:"",bordered:""}},[a("thead",[a("tr",[a("th",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-left"},[t._v("Select")]),a("th",{staticClass:"text-left"},[t._v("Name")]),a("th",{staticClass:"text-left"},[t._v("Unit")]),a("th",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}]},[t._v("Action")])])]),a("tbody",t._l(t.inventoryItem,(function(e){return a("tr",{key:e.id},[a("td",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-left"},[a("q-checkbox",{attrs:{color:"orange-3"},on:{input:function(a){return t.selectItem(e)}},model:{value:e.choice,callback:function(a){t.$set(e,"choice",a)},expression:"item.choice"}})],1),a("td",{staticClass:"text-left"},[t._v(t._s(e.name))]),a("td",{staticClass:"text-left"},[t._v(t._s(e.unit.unit))]),a("td",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"text-center"},[a("span",[a("q-btn",{staticClass:"bg-confirm",attrs:{title:"edit",padding:"xs xs","text-color":"black",icon:"edit"},on:{click:function(a){return t.update(e)}}})],1),a("span",{staticClass:"q-ml-sm"},[a("q-btn",{staticClass:"bg-delete",attrs:{title:"delete",padding:"xs xs","text-color":"black",icon:"delete"},on:{click:function(a){return t.deleteItemBtn(e.id)}}})],1)])])})),0)]),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1),a("q-dialog",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-sm"},[a("h6",{staticClass:"q-ma-none"},[t._v("Edit Inventory Details")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("AddInventoryItems",{attrs:{edit:!0,inv:t.inv},on:{closeForm:t.closeForm}})],1)],1)],1)],1)},Mo=[],Eo={data(){return{last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1},inventoryItem:{},inv:{},status:!1,search:"",add:!1}},props:{select:{required:!0}},methods:{async fetchInventoryItem(){const{page:t}=this.options,e=await So({page:t,page_size:20,search:this.search});this.inventoryItem=e.data.inventory_item.data,this.inventoryItem=this.inventoryItem.map((t=>k()(k()({},t),{},{choice:!1}))),this.current_page=e.data.inventory_item.meta.current_page,this.previous_page=e.data.inventory_item.meta.previous_page,this.last_page=e.data.inventory_item.meta.last_page,this.next_page=e.data.inventory_item.meta.next_page},deleteItemBtn(t){Ao(t).then((()=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Item Deleted"}),this.fetchInventoryItem()})).catch((t=>{this.$q.notify({color:"red-5",textColor:"white",icon:"info",message:t.response.data||"Unable To Delete Item"})}))},update(t){this.status=!0,this.inv=t},closeForm(){this.status=!1,this.fetchInventoryItem()},closeAdd(){this.add=!1,this.fetchInventoryItem()},selectItem(t){this.$emit("selectedItem",t)}},beforeMount(){this.fetchInventoryItem()},activated(){this.fetchInventoryItem()},components:{AddInventoryItems:$o},watch:{search(){this.fetchInventoryItem()},current_page(){this.options.page=this.current_page,this.fetchInventoryItem()}}},Ro=Eo,Bo=Object(p["a"])(Ro,Qo,Mo,!1,null,null,null),Po=Bo.exports;kt()(Bo,"components",{QInput:Et["a"],QIcon:ne["a"],QChip:Ie["a"],QAvatar:xe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QBtn:xt["a"],QSeparator:Bt["a"],QMarkupTable:Te["a"],QCheckbox:ie["a"],QPagination:Oe["a"]}),kt()(Bo,"directives",{ClosePopup:le["a"]});var No={data:()=>({tab:"add"}),components:{AddInventoryItems:$o,InventoryItemsList:Po}},jo=No,Lo=Object(p["a"])(jo,qo,Co,!1,null,null,null),zo=Lo.exports;kt()(Lo,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var Uo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Inventory Detail")])])])])],1)]),a("q-card",{staticClass:"q-mt-lg"},[a("q-tabs",{staticClass:"text-grey q-mb-md",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"add",label:"Goods Received"}}),a("q-tab",{attrs:{name:"gRecord",label:"Goods Received Record"}}),a("q-tab",{attrs:{name:"list",label:"Inventory List"}}),a("q-tab",{attrs:{name:"stock",label:"Stock Report"}})],1),a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"add"}},[a("AddInventory")],1),a("q-tab-panel",{attrs:{name:"gRecord"}},[a("StockOut")],1),a("q-tab-panel",{attrs:{name:"list"}},[a("InventoryList")],1),a("q-tab-panel",{attrs:{name:"stock"}},[a("StockRecord")],1)],1)],1)],1)},Vo=[],Wo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.edit?a("h6",{staticClass:"q-ma-none q-mb-md"},[t._v("Edit Items")]):t._e(),a("q-card",[a("form",[a("ValidationObserver",{ref:"inventoryForm"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Supplier",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{readonly:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Select Supplier"},on:{click:function(e){t.vendorDialog=!0}},model:{value:t.vendor,callback:function(e){t.vendor=e},expression:"vendor"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])}),a("q-dialog",{model:{value:t.vendorDialog,callback:function(e){t.vendorDialog=e},expression:"vendorDialog"}},[a("VendorList",{staticClass:"q-pa-md",attrs:{select:!0},on:{selectVendor:t.selectVendor}})],1)],1),a("div",{staticClass:"col-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5"},[a("q-radio",{attrs:{val:"A.D",label:"English"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}}),a("q-radio",{attrs:{val:"B.S",label:"Nepali"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}})],1),"A.D"===t.dateType?a("div",{staticClass:"col-md-7"},[a("q-input",{ref:"pdate",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Select Purchased Date",type:"date"},model:{value:t.pDate,callback:function(e){t.pDate=e},expression:"pDate"}})],1):a("div",{staticClass:"col-md-7"},[a("v-nepalidatepicker",{attrs:{classValue:"datepicker form-control",placeholder:"Select Purchase Date"},model:{value:t.bsDate,callback:function(e){t.bsDate=e},expression:"bsDate"}})],1)])]),a("div",{staticClass:"col-12 q-ml-sm q-mt-md",staticStyle:{"border-top":"1px solid rgba(0, 0, 0, 0.12)"}}),t.edit?a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Item Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{readonly:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Item Name",dense:""},on:{click:function(e){t.itemDialog=!0}},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])}),a("q-dialog",{attrs:{"full-width":"","full-height":""},model:{value:t.itemDialog,callback:function(e){t.itemDialog=e},expression:"itemDialog"}},[a("InventoryItemsList",{staticClass:"q-pa-md",attrs:{select:!0},on:{selectedItem:t.selectedItem}})],1)],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Purchase Rate",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Purchase Rate"},model:{value:t.rate,callback:function(e){t.rate=t._n(e)},expression:"rate"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Quantity",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Quantity",dense:""},model:{value:t.quantity,callback:function(e){t.quantity=t._n(e)},expression:"quantity"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Unit",dense:"",readonly:""},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Purchase Price",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Purchase Amount"},model:{value:t.pPrice,callback:function(e){t.pPrice=t._n(e)},expression:"pPrice"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-12"},[a("label",{attrs:{for:"sellable"}},[t._v("Sellable")]),a("q-toggle",{attrs:{color:"orange-5"},model:{value:t.sellable,callback:function(e){t.sellable=e},expression:"sellable"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.sellable,expression:"sellable"}],staticClass:"col-6"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Sales Price"},model:{value:t.sPrice,callback:function(e){t.sPrice=t._n(e)},expression:"sPrice"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.sellable,expression:"sellable"}],staticClass:"col-6"},[a("q-select",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Item Type",options:t.itemTypeOptions},model:{value:t.item_type,callback:function(e){t.item_type=e},expression:"item_type"}})],1)]):a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Item Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{readonly:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Item Name",dense:""},on:{click:function(e){t.itemDialog=!0}},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}],null,!1,1826484060)}),a("q-dialog",{attrs:{"full-width":"","full-height":""},model:{value:t.itemDialog,callback:function(e){t.itemDialog=e},expression:"itemDialog"}},[a("InventoryItemsList",{staticClass:"q-pa-md",attrs:{select:!0},on:{selectedItem:t.selectedItem}})],1)],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Purchase Rate",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Purchase Rate"},model:{value:t.rate,callback:function(e){t.rate=t._n(e)},expression:"rate"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}],null,!1,496993070)})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Quantity",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Quantity",dense:""},model:{value:t.quantity,callback:function(e){t.quantity=t._n(e)},expression:"quantity"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}],null,!1,1165209029)})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Unit",dense:"",readonly:""},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Purchase Price",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Purchase Amount"},model:{value:t.pPrice,callback:function(e){t.pPrice=t._n(e)},expression:"pPrice"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}],null,!1,2114492735)})],1),a("div",{staticClass:"col-12"},[a("label",{attrs:{for:"sellable"}},[t._v("Sellable")]),a("q-toggle",{attrs:{color:"orange-5"},model:{value:t.sellable,callback:function(e){t.sellable=e},expression:"sellable"}})],1),a("div",{staticClass:"col-6"},[t.sellable?a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Sales Price"},model:{value:t.sPrice,callback:function(e){t.sPrice=t._n(e)},expression:"sPrice"}}):a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",disable:"",label:"Sales Price"},model:{value:t.sPrice,callback:function(e){t.sPrice=t._n(e)},expression:"sPrice"}})],1),a("div",{staticClass:"col-6"},[t.sellable?a("q-select",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Item Type",options:t.itemTypeOptions},model:{value:t.item_type,callback:function(e){t.item_type=e},expression:"item_type"}}):a("q-select",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Item Type",disable:"",options:t.itemTypeOptions},model:{value:t.item_type,callback:function(e){t.item_type=e},expression:"item_type"}})],1)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",{staticClass:"q-mb-none"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.sellable,expression:"sellable"}]},[a("q-checkbox",{staticClass:"q-mt-sm",attrs:{label:"isTaxable?",color:"orange-3"},model:{value:t.taxable,callback:function(e){t.taxable=e},expression:"taxable"}})],1)])]),a("div",{staticClass:"col-12"},[a("p",{staticClass:"q-mb-none"},[a("span",[a("q-btn",{staticClass:"q-mt-md q-mb-md",attrs:{"text-color":"black",label:"Add To List",type:"button",push:"",color:"orange-3",size:"0.8rem"},on:{click:function(e){return t.addToArray()}}})],1)])])])],1)]),a("div",{staticClass:"q-mt-md"},[a("q-markup-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Name")]),a("th",{staticClass:"text-left"},[t._v("Unit")]),a("th",{staticClass:"text-left"},[t._v("Quantity")]),a("th",{staticClass:"text-left"},[t._v("Purchase Rate")]),a("th",{staticClass:"text-left"},[t._v("Purchase Price")]),a("th",{staticClass:"text-left"},[t._v("Sales Price")]),a("th",[t._v("Taxable")]),a("th",[t._v("Action")])])]),a("tbody",t._l(t.sendArray,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.itemName))]),a("td",[t._v(t._s(e.unit))]),a("td",[t._v(t._s(e.quantity))]),a("td",[t._v(t._s(e.purchase_rate))]),a("td",[t._v(t._s(e.purchase_price))]),e.is_sellable?a("td",[t._v(t._s(e.sales_price))]):a("td",{staticClass:"text-center"},[t._v("-")]),e.is_sellable?e.is_taxable?a("td",[t._v("True")]):a("td",[t._v("False")]):a("td",{staticClass:"text-center"},[t._v("-")]),a("td",{staticClass:"text-center"},[a("q-btn",{attrs:{dense:"",icon:"delete","text-color":"black",color:"red-4",padding:"xs xs",size:"0.8rem"},on:{click:function(e){return t.removeItem(s)}}},[a("q-tooltip",[t._v("\n                Remove Item\n              ")])],1)],1)])})),0)]),a("p",{staticClass:"q-mb-none"},[t.edit?a("q-btn",{staticClass:"q-ml-xs ",attrs:{label:"Update Item",type:"button",push:"",color:"orange-3","text-color":"black",size:"0.8rem"},on:{click:function(e){return t.updateBtn(t.propId)}}}):a("q-btn",{staticClass:"q-mt-md",attrs:{"text-color":"black",label:"Add Item",type:"button",push:"",color:"orange-3",size:"0.8rem"},on:{click:t.add}})],1)],1)],1)},Yo=[],Go=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"col-6"},[t._v("\n       \n    ")])]),a("div",{staticClass:"q-mt-md"},[a("q-markup-table",{attrs:{flat:"",bordered:""}},[a("thead",[a("tr",[a("th",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-left"},[t._v("Select")]),a("th",{staticClass:"text-left"},[t._v("Name")]),a("th",{staticClass:"text-left"},[t._v("Email")]),a("th",{staticClass:"text-left"},[t._v("Address")]),a("th",{staticClass:"text-left"},[t._v("Phone")]),a("th",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}]},[t._v("Action")])])]),a("tbody",t._l(t.vendorList,(function(e){return a("tr",{key:e.id},[a("td",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-left"},[a("q-checkbox",{attrs:{color:"orange-3"},on:{input:function(a){return t.selectedVendor(e)}},model:{value:e.choice,callback:function(a){t.$set(e,"choice",a)},expression:"vendor.choice"}})],1),a("td",{staticClass:"text-left"},[t._v(t._s(e.name))]),e.contact?a("td",{staticClass:"text-left"},[t._v(t._s(e.contact))]):a("td",{staticClass:"text-center"},[t._v("-")]),e.address?a("td",{staticClass:"text-left"},[t._v(t._s(e.address))]):a("td",{staticClass:"text-center"},[t._v("-")]),e.number?a("td",{staticClass:"text-left"},[t._v(t._s(e.number))]):a("td",{staticClass:"text-center"},[t._v("-")]),a("td",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"text-center"},[a("span",[a("q-btn",{staticClass:"bg-confirm",attrs:{padding:"xs xs","text-color":"black",icon:"edit"},on:{click:function(a){return t.update(e)}}},[a("q-tooltip",[t._v("Edit")])],1)],1),a("span",{staticClass:"q-ml-sm"},[a("q-btn",{staticClass:"bg-delete",attrs:{title:"delete",padding:"xs xs","text-color":"black",icon:"delete"},on:{click:function(a){return t.deleteBtn(e.id)}}},[a("q-tooltip",[t._v("Delete")])],1)],1)])])})),0)]),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{staticClass:"text-black",attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1),a("q-dialog",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-sm"},[a("h6",{staticClass:"q-ma-none"},[t._v("Edit Vendor Details")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("AddVendor",{attrs:{edit:!0,sender:t.sender},on:{closeForm:t.closeForm}})],1)],1)],1)],1)])},Ho=[];const Jo=`${A["a"]}/api/v1/inventory/vendor/`;function Ko(t={}){return Object(D["a"])().get(Jo,{params:t})}function Zo(t){return Object(D["a"])().delete(`${Jo}${t}`)}function Xo(t){return Object(D["a"])().post(Jo,t)}function tr(t,e){return Object(D["a"])().put(`${Jo}${t}`,e)}var er=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-form",[a("ValidationObserver",{ref:"vendorForm"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-4"},[a("validation-provider",{attrs:{name:"Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-standout","bg-color":"orange-2",label:"Name",dense:""},model:{value:t.vendor.name,callback:function(e){t.$set(t.vendor,"name",e)},expression:"vendor.name"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-standout","bg-color":"orange-2",label:"Email",dense:""},model:{value:t.vendor.contact,callback:function(e){t.$set(t.vendor,"contact",e)},expression:"vendor.contact"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-standout","bg-color":"orange-2",label:"Phone",dense:""},model:{value:t.vendor.number,callback:function(e){t.$set(t.vendor,"number",e)},expression:"vendor.number"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-standout","bg-color":"orange-2",label:"Address",dense:""},model:{value:t.vendor.address,callback:function(e){t.$set(t.vendor,"address",e)},expression:"vendor.address"}})],1)])]),a("div",{staticClass:"col-12 q-mb-none"},[t.edit?a("q-btn",{staticClass:"q-mt-md",attrs:{push:"","text-color":"black",size:"0.8rem",label:"Update",type:"button"},on:{click:t.update}}):a("q-btn",{staticClass:"q-mt-md",attrs:{color:"orange-3",push:"","text-color":"black",size:"0.8rem",label:"Add",type:"button"},on:{click:t.add}})],1)],1)},ar=[];Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"})),Object(Zt["c"])("min",k()(k()({},Xt["f"]),{},{message:"{_field_} may not be less than {length} numbers"})),Object(Zt["c"])("max",k()(k()({},Xt["e"]),{},{message:"{_field_} may not be greater than {length} numbers"})),Object(Zt["c"])("double",k()(k()({},Xt["c"]),{},{message:"{_field_} must have decimal"}));var sr={components:{ValidationObserver:Zt["a"],ValidationProvider:Zt["b"]},props:{sender:{required:!0},edit:{required:!0}},created(){this.checkEdit()},data(){return{vendor:{name:"",address:"",contact:"",number:""}}},methods:{checkEdit(){this.edit&&(this.vendor.name=this.sender.name,this.vendor.address=this.sender.address,this.vendor.contact=this.sender.contact,this.vendor.number=this.sender.number)},removeEmpty(t){for(var e in t)null!==t[e]&&void 0!==t[e]&&""!==t[e]||delete t[e];return t},add(){this.$refs.vendorForm.validate().then((t=>{t&&(this.vendor=this.removeEmpty(this.vendor),Xo(this.vendor).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Vendor Added Successfully"}),this.vendor.name="",this.vendor.address="",this.vendor.contact="",this.vendor.number=""})).catch((t=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Add Vendor"})})))}))},update(){this.$refs.vendorForm.validate().then((t=>{t&&(this.vendor=this.removeEmpty(this.vendor),tr(this.sender.id,this.vendor).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Vendor Updated Successfully"}),this.$emit("closeForm")})).catch((t=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Update Vendor"})})))}))}}},nr=sr,ir=Object(p["a"])(nr,er,ar,!1,null,null,null),or=ir.exports;kt()(ir,"components",{QForm:Oa["a"],QInput:Et["a"],QBtn:xt["a"]});var rr={data(){return{last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1},vendorList:{},search:"",sender:{},status:!1}},props:{select:{required:!0}},created(){this.fetchVendor()},activated(){this.fetchVendor()},methods:{async fetchVendor(){const{page:t}=this.options;try{const e=await Ko({page:t,page_size:10,search:this.search});this.vendorList=e.data.vendors.data,this.vendorList=this.vendorList.map((t=>k()(k()({},t),{},{choice:!1}))),this.current_page=e.data.vendors.meta.current_page,this.previous_page=e.data.vendors.meta.previous_page,this.last_page=e.data.vendors.meta.last_page,this.next_page=e.data.vendors.meta.next_page}catch(error){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:error.response.data.error})}},deleteBtn(t){return Zo(t).then((()=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Vendor Deleted"}),this.fetchVendor()}))},update(t){this.sender=t,this.status=!0},closeForm(){this.status=!1,this.fetchVendor()},selectedVendor(t){this.$emit("selectVendor",t)}},watch:{current_page(){this.options.page=this.current_page,this.fetchVendor()},search(){this.fetchVendor()}},components:{AddVendor:or}},lr=rr,cr=Object(p["a"])(lr,Go,Ho,!1,null,null,null),dr=cr.exports;kt()(cr,"components",{QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QCheckbox:ie["a"],QBtn:xt["a"],QTooltip:we["a"],QPagination:Oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QSeparator:Bt["a"]}),kt()(cr,"directives",{ClosePopup:le["a"]}),Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"})),Object(Zt["c"])("min",k()(k()({},Xt["f"]),{},{message:"{_field_} may not be less than {length} numbers"})),Object(Zt["c"])("max",k()(k()({},Xt["e"]),{},{message:"{_field_} may not be greater than {length} numbers"}));var mr={components:{ValidationObserver:Zt["a"],ValidationProvider:Zt["b"],VendorList:dr,InventoryItemsList:Po},data:()=>({sendArray:[],vendor:"",pDate:"",bsDate:"",item:"",mDate:"",eDate:"",unit:"",item_type:"",quantity:null,pPrice:null,sPrice:null,rate:null,vendorId:null,itemId:null,vendorDialog:!1,itemDialog:!1,taxable:!1,dateType:"A.D",sellable:!1,validation:!1,sellOptions:[{label:"Yes",value:!0},{label:"No",value:!1}],edit:!1,itemTypeOptions:["Food","Beverage","Addons"]}),methods:{selectVendor(t){this.vendorId=t.id,this.vendor=t.name,this.vendorDialog=!1},selectedItem(t){this.item=t.name,this.itemId=t.id,this.unit=t.unit.unit,this.itemDialog=!1},async addToArray(){const t=await this.$refs.inventoryForm.validate();if(!t)return;if(this.sellable&&(this.sPrice&&this.item_type?this.validation=!1:this.validation=!0),this.validation)return void this.$q.notify({message:"Item Type and Sales Price are required",color:"red-5",icon:"warning"});const e={item:this.itemId,itemName:this.item,quantity:this.quantity,purchase_price:this.pPrice,purchase_rate:this.rate,sales_price:this.sPrice,is_sellable:this.sellable,is_taxable:this.taxable,unit:this.unit,item_type:this.item_type};this.sendArray.push(e),this.itemId=null,this.item="",this.quantity=null,this.pPrice=null,this.sPrice=null,this.rate=null,this.sellable=!1,this.taxable=!1,this.unit="",this.item_type=""},async add(){if(!this.vendor)return void this.$q.notify({message:"No Supplier Specified",color:"red-5",icon:"warning"});""==this.pDate&&(this.pDate=null);const t={vendor:this.vendorId,purchase_date:this.pDate,items:this.sendArray};try{await zi(t);this.$q.notify({message:"Item Added In Inventory",color:"green-5",icon:"info"}),this.vendor="",this.pDate="",this.bsDate="",this.sendArray=[]}catch(error){this.$q.notify({message:"Unable to add Item",color:"red-5",icon:"warning"})}},removeItem(t){-1!==t&&this.sendArray.splice(t,1)},convertEnglishDate(t){let e,a;if(new I["a"](t).getAD().date<10){const a=0;e=a.toString()+new I["a"](t).getAD().date.toString()}else e=new I["a"](t).getAD().date.toString();if(new I["a"](t).getAD().month<10){const e=0;a=e.toString()+(new I["a"](t).getAD().month+1).toString()}else a=(new I["a"](t).getAD().month+1).toString();return"010"===a&&(a="10"),new I["a"](t).getAD().year.toString()+"-"+a+"-"+e}},watch:{rate(){this.pPrice=this.rate*this.quantity},quantity(){this.pPrice=this.rate*this.quantity},async bsDate(){this.pDate=this.convertEnglishDate(this.bsDate)},sellable(){this.sPrice=null}}},ur=mr,pr=Object(p["a"])(ur,Wo,Yo,!1,null,null,null),hr=pr.exports;kt()(pr,"components",{QCard:Ct["a"],QInput:Et["a"],QDialog:Nt["a"],QRadio:Mt["a"],QToggle:$e["a"],QSelect:ae["a"],QCheckbox:ie["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QTooltip:we["a"]});var vr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"col-6"},[t._v("\n       \n    ")])]),a("div",{staticClass:"q-mt-md"},[a("q-markup-table",{attrs:{flat:"",bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-center"},[t._v("Select")]),a("th",{staticClass:"text-left"},[t._v("Name")]),a("th",[t._v("Unit")]),a("th",[t._v("Quantity")]),a("th",[t._v("Purchase Rate")]),a("th",[t._v("Sellable")]),a("th",[t._v("Selling Rate")]),a("th",{directives:[{name:"show",rawName:"v-show",value:1===t.$store.state.user.user.role,expression:"$store.state.user.user.role === 1"}],staticClass:"text-center"},[t._v("Action")])])]),a("tbody",t._l(t.inventoryStorage,(function(e){return a("tr",{key:e.id},[a("th",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-3"},on:{input:function(a){return t.selectItem(e)}},model:{value:e.choice,callback:function(a){t.$set(e,"choice",a)},expression:"storage.choice"}})],1),a("td",{staticClass:"text-left"},[t._v(t._s(e.item.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.item.unit.unit))]),!1===e.edit?a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{dense:"",filled:"","bg-color":"amber-3",type:"number"},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",a)},expression:"storage.quantity"}})],1),a("td",{staticClass:"text-center"},[t._v(t._s(e.purchase_rate))]),a("td",{staticClass:"text-center"},[!1===e.edit?a("span",[e.is_sellable?a("span",[t._v("\n                Yes\n              ")]):a("span",[t._v("\n                No\n              ")])]):a("span",[a("q-select",{staticStyle:{"max-width":"50%"},attrs:{filled:"",options:t.options,"emit-value":"","map-options":""},model:{value:e.is_sellable,callback:function(a){t.$set(e,"is_sellable",a)},expression:"storage.is_sellable"}})],1)]),e.is_sellable&&!1===e.edit?a("td",{staticClass:"text-center"},[t._v(t._s(e.sales_price))]):e.is_sellable&&!0===e.edit?a("td",{staticClass:"text-center"},[a("q-input",{staticStyle:{width:"120px"},attrs:{dense:"",filled:"","bg-color":"amber-3",type:"number"},model:{value:e.sales_price,callback:function(a){t.$set(e,"sales_price",a)},expression:"storage.sales_price"}})],1):a("td",{staticClass:"text-center"},[t._v("-")]),a("td",{directives:[{name:"show",rawName:"v-show",value:1===t.$store.state.user.user.role,expression:"$store.state.user.user.role === 1"}],staticClass:"text-center"},[!1===e.edit?a("span",[a("q-btn",{staticClass:"bg-confirm",attrs:{"text-color":"black",icon:"edit",padding:"xs",size:"0.8rem"},on:{click:function(t){e.edit=!0}}},[a("q-tooltip",[t._v("\n                  Edit Inventory\n                ")])],1)],1):a("span",[a("q-btn",{staticClass:"bg-delete",attrs:{"text-color":"black",icon:"done",padding:"xs",size:"0.8rem"},on:{click:function(a){return t.done(e)}}},[a("q-tooltip",[t._v("\n                  Save Changes\n                ")])],1),a("q-btn",{staticClass:"bg-delete q-ml-sm",attrs:{"text-color":"black",icon:"cancel",padding:"xs",size:"0.8rem"},on:{click:function(t){e.edit=!1}}},[a("q-tooltip",[t._v("\n                  Cancel\n                ")])],1)],1)])])})),0)])],1),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{staticClass:"text-black",attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1),a("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-up"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("StockOut",{attrs:{stock:t.stock},on:{closeForm:t.closeForm}})],1),a("q-dialog",{attrs:{"full-height":"","full-width":"","transition-show":"slide-up","transition-hide":"slide-up"},model:{value:t.display,callback:function(e){t.display=e},expression:"display"}},[a("StockDetails",{attrs:{detail:t.detail}})],1)],1)},br=[],gr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-pt-none q-pa-xs q-pl-md"},[a("div",{staticClass:"text-h6"},[t._v("\n            Inventory Item Details ("+t._s(t.detail.item.name)+")\n        ")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-separator"),a("q-card-section",[a("q-tabs",{staticClass:"text-grey-7",attrs:{dense:"","active-color":"primary",align:"justify"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"stockin",label:"Stock In"}}),a("q-tab",{attrs:{name:"stockout",label:"Stock Out"}})],1),a("q-tab-panels",{staticClass:"text-white",attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"stockin"}},[a("div",{staticClass:"q-mt-sm q-mb-sm"},[a("q-markup-table",{attrs:{bordered:""}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Vendor Name")]),a("th",{staticClass:"text-left"},[t._v("Quantity")]),a("th",{staticClass:"text-left"},[t._v("Unit Price")]),a("th",{staticClass:"text-left"},[t._v("Date Added")])])]),a("tbody",t._l(t.detail.vendor_detail,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[t._v("\n                                    "+t._s(e.vendor.name)+"\n                                ")]),a("td",{staticClass:"text-left"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-left"},[t._v(t._s(e.unit_price))]),a("td",{staticClass:"text-left"},[t._v("\n                                    "+t._s(e.recent_date.substring(0,10))+"\n                                ")])])})),0)])],1)]),a("q-tab-panel",{attrs:{name:"stockout"}},[a("div",{staticClass:"q-pa-sm"},[a("q-markup-table",{attrs:{bordered:""}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Updated By")]),a("th",{staticClass:"text-left"},[t._v("Out Quantity")]),a("th",{staticClass:"text-left"},[t._v("Date Updated")]),a("th",{staticClass:"text-left"},[t._v("Description")])])]),a("tbody",t._l(t.stockDetails,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[t._v("\n                                    "+t._s(e.updated_by.username)+"\n                                ")]),a("td",{staticClass:"text-left"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-left"},[t._v(t._s(e.date))]),a("td",{staticClass:"text-left"},[t._v(t._s(e.description))])])})),0)])],1)])],1)],1)],1)},_r=[],fr={data:()=>({tab:"stockin",stockDetails:{}}),props:{detail:{required:!0}},created(){this.fetch()},methods:{async fetch(){const t=await Yi(this.detail.id);this.stockDetails=t.data}}},yr=fr,qr=Object(p["a"])(yr,gr,_r,!1,null,null,null),Cr=qr.exports;kt()(qr,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QBtn:xt["a"],QSeparator:Bt["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"],QMarkupTable:Te["a"]}),kt()(qr,"directives",{ClosePopup:le["a"]});var xr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"From Date",type:"date"},model:{value:t.from_date,callback:function(e){t.from_date=e},expression:"from_date"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"To Date",type:"date"},model:{value:t.to_date,callback:function(e){t.to_date=e},expression:"to_date"}})],1),a("div",{staticClass:"col-4"},[t._v(" ")]),a("div",{staticClass:"col-2"},[a("validation-provider",{attrs:{name:"Item Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{readonly:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Item Name",dense:""},on:{click:function(e){t.itemDialog=!0}},model:{value:t.inventoryItem,callback:function(e){t.inventoryItem=e},expression:"inventoryItem"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])}),a("q-dialog",{attrs:{"full-width":"","full-height":""},model:{value:t.itemDialog,callback:function(e){t.itemDialog=e},expression:"itemDialog"}},[a("InventoryItemsList",{staticClass:"q-pa-md",attrs:{select:!0},on:{selectedItem:t.selectedItem}})],1)],1),a("div",{staticClass:"col-2"},[a("validation-provider",{attrs:{name:"Supplier",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{readonly:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Select Supplier"},on:{click:function(e){t.vendorDialog=!0}},model:{value:t.vendor,callback:function(e){t.vendor=e},expression:"vendor"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])}),a("q-dialog",{model:{value:t.vendorDialog,callback:function(e){t.vendorDialog=e},expression:"vendorDialog"}},[a("VendorList",{staticClass:"q-pa-md",attrs:{select:!0},on:{selectVendor:t.selectVendor}})],1)],1),a("div",{staticClass:"col-4 q-mt-xs"},[t.inventoryItem||t.vendor?a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.8rem",label:"Clear"},on:{click:function(e){return t.clearData()}}}):t._e()],1),a("div",{staticClass:"col-4"},[t._v(" ")]),a("div",{staticClass:"col-4 q-mt-xs"},[a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.8rem",label:"Generate"},on:{click:function(e){return t.searchData()}}})],1),a("div",{staticClass:"col-8"},[t._v(" ")]),a("div",{staticClass:"col-4 q-mt-xs"},[t.show?a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.8rem",label:"Go Back"},on:{click:function(e){t.show=!t.show}}}):t._e()],1)]),t.show?t._e():a("div",{staticClass:"row q-mt-sm q-col-gutter-md"},[0===t.records.length?a("div",{staticClass:"col-12 q-ml-sm"},[t._v("\n            No rows to display!\n        ")]):t.searchItem?a("div",{staticClass:"col-12"},[a("q-markup-table",{attrs:{bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",[t._v("S.N.")]),a("th",[t._v("Suppliers")]),a("th",[t._v("Date")]),a("th",[t._v("Quantity")]),a("th",[t._v("Purchase Total")])])]),a("tbody",t._l(t.records,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(s+1))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.vendor.name))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.purchase_date.substring(0,10)))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(t.getSingleQuantity(e)))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(t.getSinglePurchaseTotal(e)))])])})),0),a("thead",[a("tr",[a("th"),a("th"),a("th",[t._v("Total")]),a("th",[t._v(t._s(t.getTotalItemQuantity()))]),a("th",[t._v("Rs."+t._s(t.getItemNetTotal()))])])])]),t.searchItem?t._e():a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1):a("div",{staticClass:"col-12"},[a("q-markup-table",{attrs:{bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",[t._v("S.N.")]),a("th",[t._v("Suppliers")]),a("th",[t._v("Date")])])]),a("tbody",t._l(t.records,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(s+1))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.vendor.name))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.purchase_date.substring(0,10)))])])})),0)]),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1)]),t.show?a("div",{staticClass:"row q-mt-sm q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("q-markup-table",{attrs:{bordered:"",separator:"vertical"}},[a("caption",[a("h5",{staticClass:"q-pa-sm"},[t._v("DETAIL VIEW("+t._s(t.supplier.vendor.name)+")")]),a("h6",[t._v("\n                        Purchase Date: "+t._s(t.supplier.purchase_date.substring(0,10))+"\n                    ")])]),a("thead",[a("tr",[a("th",[t._v("S.N.")]),a("th",[t._v("Item")]),a("th",[t._v("Unit")]),a("th",[t._v("Purchase Rate")]),a("th",[t._v("Quantity")]),a("th",[t._v("Purchase Price")]),a("th",[t._v("Action")])])]),a("tbody",t._l(t.inventoryItems,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center"},[t._v(t._s(s+1))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.item.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.item.unit.unit))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.purchase_rate))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.purchase_price))]),a("td",{staticClass:"text-center"},[a("span",[a("q-btn",{staticClass:"edit-btn",attrs:{size:"0.65rem",padding:"sm sm",dense:"",push:"",color:"green-5",icon:"edit"},on:{click:function(a){return t.editItem(e)}}},[a("q-tooltip",[t._v("Edit")])],1)],1)])])})),0),a("thead",[a("tr",[a("th"),a("th"),a("th"),a("th",[t._v("Total")]),a("th",[t._v(t._s(t.getTotalQuantity()))]),a("th",[t._v("Rs."+t._s(t.getNetTotal()))]),a("th")])])]),a("q-dialog",{model:{value:t.edit,callback:function(e){t.edit=e},expression:"edit"}},[a("q-card",[a("div",{staticClass:"row q-col-gutter-md q-pa-xl"},[a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Item Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{disable:"",readonly:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Item Name",dense:""},model:{value:t.item.item.name,callback:function(e){t.$set(t.item.item,"name",e)},expression:"item.item.name"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}],null,!1,2589634886)})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Purchase Rate",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Purchase Rate"},on:{input:function(e){return t.change()}},model:{value:t.item.purchase_rate,callback:function(e){t.$set(t.item,"purchase_rate",e)},expression:"item.purchase_rate"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}],null,!1,1662029848)})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Quantity",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Quantity",dense:""},on:{input:function(e){return t.change()}},model:{value:t.item.quantity,callback:function(e){t.$set(t.item,"quantity",e)},expression:"item.quantity"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}],null,!1,317870759)})],1),a("div",{staticClass:"col-6"},[t.item.item?a("span",[a("q-input",{attrs:{disable:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Unit",dense:"",readonly:""},model:{value:t.item.item.unit.unit,callback:function(e){t.$set(t.item.item.unit,"unit",e)},expression:"item.item.unit.unit"}})],1):a("span",[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Unit",dense:"",readonly:""}})],1)]),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Purchase Price",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",disable:"",label:"Purchase Amount"},model:{value:t.item.purchase_price,callback:function(e){t.$set(t.item,"purchase_price",e)},expression:"item.purchase_price"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}],null,!1,3351062854)})],1)]),a("q-btn",{staticClass:"edit-btn q-ma-sm",attrs:{size:"0.65rem",padding:"sm sm",dense:"",push:"",color:"green-5",label:"Update"},on:{click:function(e){return t.editThisItem()}}})],1)],1)],1)]):t._e()])},wr=[];Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"})),Object(Zt["c"])("min",k()(k()({},Xt["f"]),{},{message:"{_field_} may not be less than {length} numbers"})),Object(Zt["c"])("max",k()(k()({},Xt["e"]),{},{message:"{_field_} may not be greater than {length} numbers"}));var kr={components:{ValidationObserver:Zt["a"],ValidationProvider:Zt["b"],InventoryItemsList:Po,VendorList:dr},data:()=>({searchItem:!1,vendorId:null,itemId:null,inventoryItem:"",itemDialog:!1,vendor:"",vendorDialog:!1,sellable:!1,edit:!1,item:{},last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:10},show:!1,from_date:"",to_date:"",records:"",supplier:null,inventoryItems:[]}),created(){this.searchData()},methods:{clearData(){this.vendorId=null,this.itemId=null,this.inventoryItem="",this.vendor="",this.searchItem=!1,this.searchData()},getTotalItemQuantity(){var t=0;return this.records.forEach((e=>{const a=e.stock_purchase_item.reduce(((t,e)=>this.itemId?e.item.id===this.itemId?t+parseFloat(e.quantity):t:t+parseFloat(e.quantity)),0);t+=parseFloat(a)})),t},getItemNetTotal(){var t=0;return this.records.forEach((e=>{const a=e.stock_purchase_item.reduce(((t,e)=>this.itemId?e.item.id===this.itemId?t+parseFloat(e.purchase_price):t:t+parseFloat(e.purchase_price)),0);t+=parseFloat(a)})),t},getSinglePurchaseTotal(t){var e=0;return t.stock_purchase_item.forEach((t=>{this.itemId?t.item.id===this.itemId&&(e+=parseFloat(t.purchase_price)):e+=parseFloat(t.purchase_price)})),e},getSingleQuantity(t){var e=0;return t.stock_purchase_item.forEach((t=>{this.itemId?t.item.id===this.itemId&&(e+=t.quantity):e+=t.quantity})),e},selectVendor(t){this.vendorId=t.id,this.vendor=t.name,this.vendorDialog=!1},selectedItem(t){this.inventoryItem=t.name,this.itemId=t.id,this.unit=t.unit.unit,this.itemDialog=!1},change(){this.item.purchase_price=this.item.purchase_rate*this.item.quantity},editItem(t){this.edit=!0,this.item=t},async editThisItem(){const t={item:this.item.item.id,quantity:this.item.quantity,purchase_rate:this.item.purchase_rate,purchase_price:this.item.purchase_price};try{await Ui(this.item.id,t);this.edit=!1,this.item={},this.$q.notify({message:"Item Updated",color:"green-5",icon:"info"})}catch(e){console.log("error")}},async searchData(){const{page:t,itemsPerPage:e}=this.options,a=await Ji({page:t,page_size:e,from_date:this.from_date,to_date:this.to_date,item:this.itemId,supplier:this.vendorId});this.records=a.data.data,this.itemId|this.vendorId?this.searchItem=!0:(this.searchItem=!1,this.current_page=a.data.meta.current_page,this.previous_page=a.data.meta.previous_page,this.last_page=a.data.meta.last_page,this.next_page=a.data.meta.next_page)},detail(t){this.supplier=t,this.inventoryItems=t.stock_purchase_item,this.show=!0},getTotalQuantity(){const t=this.inventoryItems.reduce(((t,e)=>t+parseFloat(e.quantity)),0);return t},getNetTotal(){const t=this.inventoryItems.reduce(((t,e)=>t+parseFloat(e.purchase_price)),0);return t}},watch:{current_page(){this.options.page=this.current_page,this.searchData()},search(){this.searchData()}}},Ir=kr,Sr=Object(p["a"])(Ir,xr,wr,!1,null,null,null),Dr=Sr.exports;kt()(Sr,"components",{QInput:Et["a"],QDialog:Nt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QPagination:Oe["a"],QTooltip:we["a"],QCard:Ct["a"]});var Ar={components:{StockDetails:Cr,StockOut:Dr},data(){return{last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1},options:[{label:"Yes",value:!0},{label:"No",value:!1}],inventoryStorage:[],show:!1,display:!1,search:"",stock:{},detail:{}}},props:{select:{required:!0}},created(){this.fetchInventory()},watch:{current_page(){this.options.page=this.current_page,this.fetchInventory()},search(){this.fetchInventory()}},methods:{async fetchInventory(){const{page:t}=this.options,e=await Vi({page:t,search:this.search,page_size:20});try{this.inventoryStorage=e.data.inventory.data,this.inventoryStorage=this.inventoryStorage.map((t=>k()(k()({},t),{},{choice:!1,edit:!1}))),this.current_page=e.data.inventory.meta.current_page,this.previous_page=e.data.inventory.meta.previous_page,this.last_page=e.data.inventory.meta.last_page,this.next_page=e.data.inventory.meta.next_page}catch(a){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:a.result.error})}},itemDetailBtn(t){this.detail=t,this.display=!0},closeForm(){this.show=!1,this.fetchInventory()},selectItem(t){this.$emit("selectedItem",t)},async done(t){const e={quantity:t.quantity,is_sellable:t.is_sellable,sales_price:t.sales_price};try{await Wi(t.id,e),this.$q.notify({message:"Quantity Updated",color:"green-5",icon:"info"}),this.fetchInventory()}catch(a){this.$q.notify({message:"Unable to Update",color:"red-5",icon:"warning"})}}}},Fr=Ar,Tr=Object(p["a"])(Fr,vr,br,!1,null,null,null),Or=Tr.exports;kt()(Tr,"components",{QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QCheckbox:ie["a"],QSelect:ae["a"],QBtn:xt["a"],QTooltip:we["a"],QPagination:Oe["a"],QDialog:Nt["a"]});var $r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-tabs",{staticClass:"text-grey ",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"add",label:"Add Report"}}),a("q-tab",{attrs:{name:"view",label:"Show Reports"}})],1),a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"add"}},[a("div",[a("div",{staticClass:"row q-mt-xs q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("q-markup-table",{staticClass:"my-sticky-header-table",attrs:{bordered:"",separator:"vertical"}},[a("caption",[a("h5",{staticClass:"q-mb-none q-mt-sm"},[t._v(t._s(t.resDetail.name))]),a("p",{staticClass:"q-mb-none q-mt-sm"},[t._v(t._s(t.resDetail.address))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.resDetail.vat_number,expression:"resDetail.vat_number"}],staticClass:"q-mb-none"},[t._v("PAN No: "+t._s(t.resDetail.vat_number))]),a("p",{staticClass:"q-mb-none"},[t._v(" 15 DAYS ALL STOCK REPORT OF STORE")]),a("p",[t._v("DATE: "+t._s(t.date))])]),a("thead",[a("tr",[a("th",[t._v("S.N.")]),a("th",[t._v("Items")]),a("th",[t._v("Unit")]),a("th",[t._v("Opening Stock")]),a("th",[t._v("Used Amount")]),a("th",[t._v("Wastage")]),a("th",[t._v("New Stock")]),a("th",[t._v("Actual Stock")]),a("th",[t._v("Closing Stock")]),a("th",[t._v("Variance")]),a("th",[t._v("By")])])]),a("tbody",t._l(t.inventoryItems,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center"},[t._v(t._s(s+1))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.item.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.item.unit.unit))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity-e.restock_amount))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.used))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.waste))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.restock_amount))]),e.quantity-e.used-e.waste<=0?a("td",{staticClass:"text-center"},[t._v("0")]):a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity-e.used-e.waste))]),a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",dense:"","bg-color":"amber-3",filled:"",min:"0"},model:{value:e.close,callback:function(a){t.$set(e,"close",a)},expression:"inv.close"}})],1),a("td",{staticClass:"text-center"},[t._v(t._s(Math.abs(e.quantity-e.used-e.waste-e.close)))]),e.quantity-e.used-e.waste-e.close!=0?a("td",{attrs:{align:"center"}},[a("validation-provider",{attrs:{name:"Description",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var n=s.errors;return[a("q-input",{staticStyle:{width:"100px"},attrs:{dense:"","bg-color":"amber-3",filled:""},model:{value:e.by,callback:function(a){t.$set(e,"by",a)},expression:"inv.by"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(n[0]))])]}}],null,!0)})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"100px"},attrs:{dense:"","bg-color":"amber-3",filled:""},model:{value:e.by,callback:function(a){t.$set(e,"by",a)},expression:"inv.by"}})],1)])})),0)]),a("q-btn",{staticClass:"bg-confirm q-mt-sm float-right",attrs:{label:"done",push:""},on:{click:function(e){return t.sendStock()}}})],1)])])]),a("q-tab-panel",{attrs:{name:"view"}},[a("StockList")],1)],1)],1)},Qr=[],Mr=a("e74a"),Er=a.n(Mr),Rr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"From Date",type:"date"},model:{value:t.from_date,callback:function(e){t.from_date=e},expression:"from_date"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"To Date",type:"date"},model:{value:t.to_date,callback:function(e){t.to_date=e},expression:"to_date"}})],1),a("div",{staticClass:"col-4 q-mt-xs"},[a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.8rem",label:"Generate"},on:{click:function(e){return t.searchData()}}})],1),a("div",{staticClass:"col-4 q-mt-xs"},[t.show?a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.8rem",label:"Go Back"},on:{click:function(e){t.show=!t.show}}}):t._e()],1)]),t.show?t._e():a("div",{staticClass:"row q-mt-sm q-col-gutter-md"},[0===t.records.length?a("div",{staticClass:"col-12 q-ml-sm"},[t._v("\n            No rows to display!\n        ")]):a("div",{staticClass:"col-12"},[a("q-markup-table",{attrs:{bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",[t._v("S.N.")]),a("th",[t._v("Date")])])]),a("tbody",t._l(t.records,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(s+1))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.date))])])})),0)]),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1)]),t.show?a("div",{staticClass:"row q-mt-sm q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("q-markup-table",{staticClass:"my-sticky-header-table",attrs:{bordered:"",separator:"vertical"}},[a("caption",[a("h5",{staticClass:"q-mb-none q-mt-sm"},[t._v(t._s(t.resDetail.name))]),a("p",{staticClass:"q-mb-none q-mt-sm"},[t._v(t._s(t.resDetail.address))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.resDetail.vat_number,expression:"resDetail.vat_number"}],staticClass:"q-mb-none"},[t._v("PAN No: "+t._s(t.resDetail.vat_number))]),a("p",{staticClass:"q-mb-none"},[t._v(" 15 DAYS ALL STOCK REPORT OF STORE")]),a("p",[t._v("DATE: "+t._s(t.inventoryItems.report_date.substring(0,10)))])]),a("thead",[a("tr",[a("th",[t._v("S.N.")]),a("th",[t._v("Items")]),a("th",[t._v("Unit")]),a("th",[t._v("Opening Stock")]),a("th",[t._v("Wastage")]),a("th",[t._v("Used Quantity")]),a("th",[t._v("New Stock")]),a("th",[t._v("Closing Stock")]),a("th",[t._v("Variance")]),a("th",[t._v("By")])])]),a("tbody",t._l(t.inventoryItems.inventory_report,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center"},[t._v(t._s(s+1))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.inventory_item))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.unit))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.opening_stock))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.waste_quantity))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.used_quantity))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.restock_quantity))]),a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.closing_stock)+"\n                        ")]),a("td",{staticClass:"text-center"},[t._v(t._s(Math.abs(e.closing_stock-e.opening_stock+e.restock_quantity-e.waste_quantity-e.used_quantity)))]),a("td",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.requested_by)+"\n                        ")])])})),0)])],1)]):t._e()])},Br=[],Pr={data:()=>({last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:7},show:!1,from_date:"",to_date:"",records:"",inventoryItems:[],resDetail:{}}),created(){this.fetchRestaurant(),this.searchData()},methods:{async fetchRestaurant(){const t=await $();this.resDetail=t.data},async searchData(){const{page:t,itemsPerPage:e}=this.options,a=await Hi({page:t,page_size:e,from_date:this.from_date,to_date:this.to_date});this.records=a.data.data,this.current_page=a.data.meta.current_page,this.previous_page=a.data.meta.previous_page,this.last_page=a.data.meta.last_page,this.next_page=a.data.meta.next_page},detail(t){this.inventoryItems=t,this.show=!0}},watch:{current_page(){this.options.page=this.current_page,this.searchData()},search(){this.searchData()}}},Nr=Pr,jr=(a("3de2"),a("eaac")),Lr=Object(p["a"])(Nr,Rr,Br,!1,null,null,null),zr=Lr.exports;kt()(Lr,"components",{QInput:Et["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QPagination:Oe["a"],QTable:jr["a"]});const Ur=`${A["a"]}/api/v1/inventory/waste/`;function Vr(t={}){return Object(D["a"])().get(Ur,{params:t})}function Wr(t){return Object(D["a"])().post(Ur,t)}function Yr(t,e){return Object(D["a"])().put(`${Ur}${t}/`,e)}Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"}));var Gr={data:()=>({tab:"add",inventoryItems:[],stocks:[],wasteList:[],used:{},date:"",back:!1,resDetail:{}}),created(){const t=new Er.a;this.date=t.year+"-"+t.month+"-"+t.day,this.fetchInventory(),this.fetchRestaurant()},methods:{async fetchRestaurant(){const t=await $();this.resDetail=t.data},async fetchInventory(){const t=await Vi({report:!0});this.inventoryItems=t.data.inventory;const e=await Vr({report:!0});this.wasteList=e.data;const a=await t.data.used_items;this.inventoryItems=this.inventoryItems.map((t=>k()(k()({},t),{},{waste:0,used:0,close:t.quantity,by:""}))),this.inventoryItems.filter((function(t){t.item.name in a&&(t.used+=a[t.item.name],t.close-=a[t.item.name])})),this.wasteList.forEach((t=>{if(t.inventory_item){var e=this.inventoryItems.find((e=>e.item.id===t.inventory_item.item.id));e&&(e.waste+=t.waste_quantity,e.close-=t.waste_quantity)}})),this.inventoryItems.forEach((t=>{t.close<=0&&(t.close=0)}))},async sendStock(){if(this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"}),this.inventoryItems.forEach((t=>{if(t.quantity-t.used-t.waste-t.close!==0&&!t.by)return this.back=!0,this.$q.notify({message:"Description Required",color:"red-5",icon:"warning"}),this.back})),this.back)return this.$q.loading.hide(),void(this.back=!1);this.inventoryItems.map((t=>{this.stocks.push({inventory_item:t.id,opening_stock:t.quantity-t.restock_amount,used_quantity:t.used,waste_quantity:t.waste,closing_stock:t.close,restock_quantity:t.restock_amount,requested_by_user:t.by,description:""})}));try{await Gi(this.stocks);this.$q.notify({message:"Record Updated",color:"green-5",icon:"info"}),this.$q.loading.hide(),this.stocks=[],this.fetchInventory()}catch(t){this.$q.notify({message:"Unable to update",color:"red-5",icon:"warning"}),this.$q.loading.hide()}}},components:{StockList:zr,ValidationObserver:Zt["a"],ValidationProvider:Zt["b"]}},Hr=Gr,Jr=(a("a558"),Object(p["a"])(Hr,$r,Qr,!1,null,null,null)),Kr=Jr.exports;kt()(Jr,"components",{QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"],QMarkupTable:Te["a"],QInput:Et["a"],QBtn:xt["a"],QTable:jr["a"]});var Zr={data:()=>({tab:"add"}),components:{AddInventory:hr,InventoryList:Or,StockRecord:Kr,StockOut:Dr}},Xr=Zr,tl=Object(p["a"])(Xr,Uo,Vo,!1,null,null,null),el=tl.exports;kt()(tl,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var al=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Inventory Settings")])])])])],1)]),a("q-card",{staticClass:"q-mt-lg"},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.mainTab,callback:function(e){t.mainTab=e},expression:"mainTab"}},[a("q-tab",{attrs:{name:"vendor",label:"Supplier"}}),a("q-tab",{attrs:{name:"item",label:"Items"}})],1),a("q-tab-panels",{staticClass:"vendor-tab",attrs:{animated:"","keep-alive":""},model:{value:t.mainTab,callback:function(e){t.mainTab=e},expression:"mainTab"}},[a("q-tab-panel",{attrs:{name:"vendor"}},[a("q-tabs",{staticClass:"text-grey q-mb-md",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"add",label:"Add Supplier"}}),a("q-tab",{attrs:{name:"list",label:"Supplier List"}})],1),a("q-tab-panels",{staticClass:"q-pl-md q-pr-md",attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"add"}},[a("AddVendor")],1),a("q-tab-panel",{attrs:{name:"list"}},[a("VendorList")],1)],1)],1),a("q-tab-panel",{attrs:{name:"item"}},[a("q-tabs",{staticClass:"text-grey q-mb-md",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.itemTab,callback:function(e){t.itemTab=e},expression:"itemTab"}},[a("q-tab",{attrs:{name:"addItem",label:"Add Items"}}),a("q-tab",{attrs:{name:"listItem",label:"Items List"}})],1),a("q-tab-panels",{staticClass:"q-px-md",attrs:{animated:"","keep-alive":""},model:{value:t.itemTab,callback:function(e){t.itemTab=e},expression:"itemTab"}},[a("q-tab-panel",{attrs:{name:"addItem"}},[a("AddInventoryItems")],1),a("q-tab-panel",{attrs:{name:"listItem"}},[a("InventoryItemsList")],1)],1)],1)],1)],1)],1)},sl=[],nl={components:{AddVendor:or,VendorList:dr,AddInventoryItems:$o,InventoryItemsList:Po},data:()=>({tab:"add",mainTab:"vendor",itemTab:"addItem"})},il=nl,ol=Object(p["a"])(il,al,sl,!1,null,null,null),rl=ol.exports;kt()(ol,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var ll=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",[a("q-page-container",[a("q-page",{staticClass:"flex flex-center"},[a("div",{staticClass:"row"},[a("q-card",{staticClass:"my-card shadow-2",staticStyle:{width:"600px"},attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"text-center",staticStyle:{"border-right":"1px solid #ddd"}},[a("p",{staticClass:"text-h6 font-bold q-mb-none"},[t._v("Register Employee")]),a("p",{staticClass:"font-semibold q-mb-md",staticStyle:{"font-size":"12px"}}),a("q-input",{staticClass:"login-input q-mb-md",attrs:{rounded:"",outlined:"",color:"deep-orange",dense:"",label:"First Name"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"house"}})]},proxy:!0}])}),a("q-input",{staticClass:"login-input q-mb-md",attrs:{rounded:"",outlined:"",color:"deep-orange",dense:"",label:"Last Name"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"house"}})]},proxy:!0}])}),a("q-input",{staticClass:"login-input q-mb-md",attrs:{rounded:"",outlined:"",color:"deep-orange",dense:"",label:"Email"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"mail"}})]},proxy:!0}]),model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("q-input",{staticClass:"login-input q-mb-md",attrs:{rounded:"",outlined:"",color:"deep-orange",dense:"",label:"Contact No."},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"call"}})]},proxy:!0}]),model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}}),a("q-input",{staticClass:"login-input q-mb-md",attrs:{rounded:"",outlined:"",color:"deep-orange",dense:"",label:"Role"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"location_on"}})]},proxy:!0}]),model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}}),a("q-input",{staticClass:"login-input q-mb-md",attrs:{rounded:"",outlined:"",color:"deep-orange",dense:"",label:"Contact No."},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"call"}})]},proxy:!0}]),model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}}),a("q-input",{staticClass:"login-input q-mb-md",attrs:{rounded:"",outlined:"",color:"deep-orange",dense:"",label:"Resturant"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"location_on"}})]},proxy:!0}]),model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}}),a("q-input",{staticClass:"login-input relative-position q-mt-sm",attrs:{label:"Password",rounded:"",outlined:"",dense:"",color:"deep-orange",type:t.isPwd?"password":"text"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("q-input",{staticClass:"login-input relative-position q-mt-sm",attrs:{label:"Confirm Password",rounded:"",outlined:"",dense:"",color:"deep-orange",type:t.isPwd?"password":"text"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"vpn_key"}})]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("div",{staticClass:"text-center q-mt-md"},[a("q-btn",{staticClass:"gradient-btn",attrs:{size:"16px",padding:"xs xl",dense:"",push:"","text-color":"orange",label:"Register"},on:{click:t.register}})],1)],1)],1)],1)])],1)],1)},cl=[],dl=a("d1dd");Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("email",k()(k()({},Xt["d"]),{},{message:"{_field_} must be a valid email"})),Object(Zt["c"])("min",k()(k()({},Xt["f"]),{},{message:"{_field_} may not be greater than {length} characters"}));var ml={components:{ValidationProvider:Zt["b"],ValidationObserver:Zt["a"]},data(){return{slide:1,autoplay:!0,loading:!1,credentials:{email:"",password:""},saveEmail:!1,isPwd:!0}},methods:{isRequired(t){return!!t||"This field is required"},login(){this.$refs.loginForm.validate().then((t=>{t&&dl["a"].attempt(this.credentials).then((t=>{t&&this.$router.push({name:"Dashboard"})})).catch((()=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Email or Password Wrong"})}))}))}}},ul=ml,pl=a("4d5a"),hl=a("09e3"),vl=Object(p["a"])(ul,ll,cl,!1,null,null,null),bl=vl.exports;kt()(vl,"components",{QLayout:pl["a"],QPageContainer:hl["a"],QPage:Qt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QImg:oe["a"],QInput:Et["a"],QIcon:ne["a"],QBtn:xt["a"]});var gl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 q-pl-sm"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",{staticClass:"q-pa-none q-mb-sm"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12 q-mb-lg"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Beverage Sales Report")])]),a("div",{staticClass:"col-12"},[a("DateBar",{attrs:{checkFiscalYearBoolean:t.checkFiscalYearBoolean},on:{thisFiscalYear:t.thisFiscalYear,dateType:t.dateType,startDateBs:t.startDateBs,endDateBs:t.endDateBs,fromDate:t.fromDate,toDate:t.toDate}})],1),a("div",{staticClass:"col-2"},[a("q-dialog",{model:{value:t.bevStatus,callback:function(e){t.bevStatus=e},expression:"bevStatus"}},[a("BeverageItemList",{staticClass:"q-pa-md",attrs:{select:!0},on:{exitBeverage:t.exitBeverage}})],1),a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Beverage Search",type:"text",readonly:""},on:{click:function(e){t.bevStatus=!0}},model:{value:t.itemName,callback:function(e){t.itemName=e},expression:"itemName"}})],1),a("div",{staticClass:"col-6"},[a("q-btn",{staticClass:"bg-delete",attrs:{push:"",size:"0.8rem",label:"Show Report"},on:{click:function(e){return t.fetchReport()}}})],1)])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-none q-mt-md"},[0===t.beverageReport.length?a("div",{staticClass:"text-center font-bold"},[t._v("\n                No Rows To Display\n            ")]):a("div",[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",label:"Export Excel",size:".8rem"},on:{click:function(e){return t.generateExcel("tbl","food-report")}}})],1)]),a("q-markup-table",{attrs:{separator:t.separator,id:"tbl"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Beverage")]),a("th",{staticClass:"text-center"},[t._v("Date")]),a("th",{staticClass:"text-center"},[t._v("Quantity")]),a("th",{staticClass:"text-center"},[t._v("Total Amount")])])]),a("tbody",[t._l(t.output,(function(e){return a("tr",{key:e.beverage.id},[a("td",{on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.beverage.name))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.date))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.quantity.reduce((function(t,e){return t+e}),0)))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v("Rs. "+t._s(e.subtotal.reduce((function(t,e){return parseFloat(t)+parseFloat(e)}),0).toFixed(2)))])])})),a("tr",[a("td"),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.calculateQuantity))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.calculateSubTotal.toFixed(2)))])])],2)])],1)])],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("BeverageDetail",{attrs:{pass:t.pass}})],1)],1)},_l=[],fl=(a("0481"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("q-radio",{attrs:{val:"A.D",label:"English(A.D)"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}}),a("q-radio",{attrs:{val:"B.S",label:"Nepali(B.S)"},model:{value:t.dateType,callback:function(e){t.dateType=e},expression:"dateType"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"B.S"==t.dateType,expression:"dateType == 'B.S'"}],staticClass:"col-md-9 q-mb-md"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-4"},[a("span",{staticClass:"text-grey-6 date-text"},[t._v("Select Starting Date")]),a("v-nepalidatepicker",{attrs:{classValue:"datepicker form-control",label:"Date"},model:{value:t.start_date_bs,callback:function(e){t.start_date_bs=e},expression:"start_date_bs"}})],1),a("div",{staticClass:"col-4"},[a("span",{staticClass:"text-grey-6 date-text"},[t._v("Select Ending Date")]),a("v-nepalidatepicker",{attrs:{classValue:"datepicker form-control",label:"Date"},model:{value:t.end_date_bs,callback:function(e){t.end_date_bs=e},expression:"end_date_bs"}})],1),t.notFiscal?a("div",{staticClass:"col-4"},[a("q-select",{staticClass:"q-mt-lg",attrs:{dense:"","stack-label":"",outlined:"",options:t.ndateOptions,"bg-color":"indigo",label:"Search","emit-value":"","map-options":""},model:{value:t.dateOpt,callback:function(e){t.dateOpt=e},expression:"dateOpt"}})],1):a("div",{staticClass:"col-4"},[a("q-select",{staticClass:"q-mt-lg",attrs:{dense:"","stack-label":"",outlined:"",options:t.dateOptions,"bg-color":"indigo",label:"Search","emit-value":"","map-options":""},model:{value:t.dateOpt,callback:function(e){t.dateOpt=e},expression:"dateOpt"}})],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"A.D"==t.dateType,expression:"dateType == 'A.D'"}],staticClass:"col-md-9 q-mt-md q-pt-xs q-mb-md"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-4"},[a("q-input",{ref:"sdate",staticClass:"q-mb-sm",attrs:{standout:"bg-indigo",outlined:"",dense:"","stack-label":"",label:"Select Starting Date",type:"date"},on:{click:function(e){return t.change()}},model:{value:t.from_date,callback:function(e){t.from_date=e},expression:"from_date"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{staticClass:"q-mb-sm",attrs:{standout:"bg-indigo",outlined:"",dense:"","stack-label":"",label:"Select Ending Date",type:"date"},on:{click:function(e){return t.change()}},model:{value:t.to_date,callback:function(e){t.to_date=e},expression:"to_date"}})],1),t.notFiscal?a("div",{staticClass:"col-4"},[a("q-select",{staticClass:"q-mb-sm",attrs:{standout:"bg-indigo",dense:"","stack-label":"",outlined:"",options:t.ndateOptions,"bg-color":"indigo",label:"Search","emit-value":"","map-options":""},model:{value:t.dateOpt,callback:function(e){t.dateOpt=e},expression:"dateOpt"}})],1):a("div",{staticClass:"col-4"},[a("q-select",{staticClass:"q-mb-sm",attrs:{standout:"bg-indigo",outlined:"",dense:"","stack-label":"",options:t.dateOptions,"bg-color":"indigo",label:"Search","emit-value":"","map-options":""},model:{value:t.dateOpt,callback:function(e){t.dateOpt=e},expression:"dateOpt"}})],1)])])])}),yl=[],ql={data(){return{dateOpt:"Today",dateType:"A.D",start_date_bs:"",end_date_bs:"",from_date:"",to_date:"",dateOptions:["Today","Last 7 Days","Last 30 Days","This Fiscal Year","-"],ndateOptions:["Today","Last 7 Days","Last 30 Days"]}},props:{notFiscal:{},checkFiscalYearBoolean:{}},methods:{change(){this.dateOpt="-"},fetchDate(t){var e=new Date,a=e.getFullYear();let s=e.getMonth()+1,n=e.getDate(),i=null,o=null;i=n<10?"0"+n:n,o=s<10?"0"+s:s;const r=a+"-"+o+"-"+i;this.to_date=r,"Last 7 Days"==t&&(e.getDate()<8?e.getMonth()+1==1&&(a=e.getFullYear()-1,s=e.getMonth()+12,n=2==s?e.getDate()-7+28:s/2!=0&s<8|(s/2==0&&s>7)?e.getDate()-7+31:e.getDate()-7+30):n=e.getDate()-7),"Last 30 Days"==t&&(e.getMonth()+1===1?(a=e.getFullYear()-1,s=e.getMonth()+12,n=2==s?e.getDate()-30+28:s/2!=0&s<8|(s/2==0&&s>7)?e.getDate()-30+31:e.getDate()-30+30):(s=e.getMonth(),n=2==s?e.getDate()-30+28:s/2!=0&s<8|(s/2==0&&s>7)?e.getDate()-30+31:e.getDate()-30+30)),n<10&&(n="0"+n),s<10&&(s="0"+s);const l=a+"-"+s+"-"+n;if(this.from_date=l,"B.S"==this.dateType){const e=new I["a"](new Date),a=e.getYear();let s=e.getMonth()+1,n=e.getDate(),i=null,o=null;i=n<10?"0"+n:n,o=s<10?"0"+s:s;const r=a+"-"+o+"-"+i;this.end_date_bs=r,"Last 7 Days"==t&&(e.getDate()<8?e.getMonth()+1==1&&(a=e.getYear()-1,s=e.getMonth()+12,n=2==s?e.getDate()-7+28:s/2!=0&s<8|(s/2==0&&s>7)?e.getDate()-7+31:e.getDate()-7+30):n=e.getDate()-7),"Last 30 Days"==t&&(e.getMonth()+1==1?(a=e.getFullYear()-1,s=e.getMonth()+12,n=2==s?e.getDate()-30+28:s/2!=0&s<8|(s/2==0&&s>7)?e.getDate()-30+31:e.getDate()-30+30):(s=e.getMonth(),n=2==s?e.getDate()-30+28:s/2!=0&s<8|(s/2==0&&s>7)?e.getDate()-30+31:e.getDate()-30+30)),n<10&&(n="0"+n),s<10&&(s="0"+s);const l=a+"-"+s+"-"+n;this.start_date_bs=l}this.$emit("dateType",this.dateType)},convertEnglishDate(t){let e,a;if(new I["a"](t).getAD().date<10){const a=0;e=a.toString()+new I["a"](t).getAD().date.toString()}else e=new I["a"](t).getAD().date.toString();if(new I["a"](t).getAD().month+1<10){const e=0;a=e.toString()+(new I["a"](t).getAD().month+1).toString()}else a=(new I["a"](t).getAD().month+1).toString();return"010"===a&&(a="10"),new I["a"](t).getAD().year.toString()+"-"+a+"-"+e}},created(){const t="Today";this.fetchDate(t)},watch:{checkFiscalYearBoolean(){"This Fiscal Year"==this.dateOpt&&this.$emit("thisFiscalYear",!0)},dateType(){this.fetchDate(this.dateOpt),this.$emit("dateType",this.dateType)},start_date_bs(){this.from_date=this.convertEnglishDate(this.start_date_bs),this.$emit("startDateBs",this.start_date_bs)},end_date_bs(){this.to_date=this.convertEnglishDate(this.end_date_bs),this.$emit("endDateBs",this.end_date_bs)},dateOpt(){"This Fiscal Year"!=this.dateOpt?(this.$emit("thisFiscalYear",!1),this.fetchDate(this.dateOpt)):this.$emit("thisFiscalYear",!0)},to_date(){this.$emit("toDate",this.to_date)},from_date(){this.$emit("fromDate",this.from_date)}}},Cl=ql,xl=Object(p["a"])(Cl,fl,yl,!1,null,null,null),wl=xl.exports;kt()(xl,"components",{QRadio:Mt["a"],QSelect:ae["a"],QInput:Et["a"]});var kl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",[a("div",{staticClass:"col-12 q-mb-sm"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Detail View ("+t._s(t.pass.beverage.name)+")")])])]),a("q-separator"),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","detail- food-report")}}})],1)]),a("p",{staticClass:"q-mb-none"},[a("span",[t._v("\n                        Ordered Date: "+t._s(t.pass.date)+"\n                    ")])])]),a("div",{staticClass:"col-12"},[a("q-markup-table",{staticClass:"q-mt-md",attrs:{separator:t.separator,id:"tbl1"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Invoice No.")]),a("th",[t._v("Quantity")]),a("th",[t._v("Purchase Price")]),a("th",[t._v("Discount")]),a("th",[t._v("Total Amount")])])]),a("tbody",t._l(t.pass.invoice_id,(function(e,s){return a("tr",{key:s},[a("td",[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.showInvoice(e)}}},[t._v("\n                                    "+t._s(e)+"\n                                ")])]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.quantity[s]))]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.beverage.price))]),t.pass.discount[s].value?a("td",{staticClass:"text-center"},[1===t.pass.discount[s].discount_in?a("span",[t._v("Rs. "+t._s(t.pass.discount[s].value))]):a("span",[t._v(t._s(t.pass.discount[s].value)+" %")])]):a("td",{staticClass:"text-center"},[t._v(" - ")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.pass.subtotal[s]))])])})),0),a("tbody",[a("tr",[a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.total.toFixed(2)))])])])])],1)])]),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.single,callback:function(e){t.single=e},expression:"single"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId}})],1)],1)},Il=[],Sl={components:{FinalBill:St},props:{pass:{required:!0}},data:()=>({merge:!1,single:!1,propSingleId:"",propMergeId:"",separator:"vertical"}),created(){},computed:{total(){return this.pass.subtotal.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{showInvoice(t){this.propSingleId=t,this.single=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},Dl=Sl,Al=Object(p["a"])(Dl,kl,Il,!1,null,null,null),Fl=Al.exports;kt()(Al,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSeparator:Bt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});const Tl=`${A["a"]}/api/v1/report/sales`,Ol=`${A["a"]}/api/v1/payment`,$l=(A["a"],`${A["a"]}/api/v1/report/foodreport`),Ql=`${A["a"]}/api/v1/report/complementary/`,Ml=`${A["a"]}/api/v1/report/refund/`,El=`${A["a"]}/api/v1/report/wastage/`;function Rl(t={}){return Object(D["a"])().get($l,{params:t})}function Bl(t={}){return Object(D["a"])().get(Tl,{params:t})}function Pl(t){return Object(D["a"])().get(`${Ol}/${t}/`)}function Nl(t={}){return Object(D["a"])().get(Ql,{params:t})}function jl(t={}){return Object(D["a"])().get(Ml,{params:t})}function Ll(t={}){return Object(D["a"])().get(El,{params:t})}var zl={components:{DateBar:wl,BeverageDetail:Fl,BeverageItemList:ha},data:()=>({beverageReport:[],separator:"vertical",from_date:"",to_date:"",thisFYear:"",billDetail:!1,bill_detail:{},start_date_bs:"",end_date_bs:"",checkFiscalYearBoolean:!1,dataStatus:!1,from_date_all:"",to_date_all:"",output:[],totalQuantity:[],totalAmount:[],pass:{},dialog:!1,bevStatus:!1,itemName:null,itemId:null}),created(){this.fetchDate()},computed:{calculateQuantity(){return this.totalQuantity=[],this.output.forEach((t=>{this.totalQuantity.push(t.quantity)})),this.totalQuantity=this.totalQuantity.flat(1/0),this.totalQuantity.reduce(((t,e)=>t+e),0)},calculateSubTotal(){return this.totalAmount=[],this.output.forEach((t=>{this.totalAmount.push(t.subtotal)})),this.totalAmount=this.totalAmount.flat(1/0),this.totalAmount.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{exitBeverage(t){this.itemId=t.id,this.itemName=t.name,this.bevStatus=!1},async fetchReport(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"});try{const t=await Rl({search:this.itemId,item:2,to_date:this.to_date,from_date:this.from_date});this.beverageReport=t.data,this.$q.loading.hide(),this.recreateApi()}catch(error){this.$q.loading.hide()}},fetchDate(){const t=new Date,e=t.getFullYear();let a=t.getMonth()+1,s=t.getDate(),n=null,i=null;n=s<10?"0"+s:s,i=a<10?"0"+a:a;const o=e+"-"+i+"-"+n;this.to_date=o,this.from_date=o},toDate(t){this.to_date=t},fromDate(t){this.from_date=t},thisFiscalYear(t){this.thisFYear=!!t},startDateBs(t){this.start_date_bs=t},endDateBs(t){this.end_date_bs=t},dateType(t){this.date_type=t},recreateApi(){this.beverageReport.forEach((t=>{t.invoice.id=t.id})),this.output=[],this.beverageReport=Object.values(this.beverageReport.reduce(((t,e)=>{const a=`${e.billing_date.substring(0,10)} + ${e.billing_date_bs}`;return t[a]||(t[a]={billing_date:e.billing_date.substring(0,10),invoice:[],billing_date_bs:e.billing_date_bs}),t[a].invoice.push(e.invoice),t}),{})),this.beverageReport.forEach((t=>{t.invoice.forEach((e=>{e.order?(e.order.orderbeverage=e.order.orderbeverage.map((a=>k()(k()({},a),{},{invoice_id:e.id,date:t.billing_date}))),this.output.push(e.order.orderbeverage),e.order.orderbeverage=[]):e.merged_order&&(e.merged_order.merge_orderbeverage=e.merged_order.merge_orderbeverage.map((a=>k()(k()({},a),{},{invoice_id:e.id,date:t.billing_date}))),this.output.push(e.merged_order.merge_orderbeverage),e.merged_order.merge_orderbeverage=[])}))})),this.output=this.output.flat(1/0),this.duplicate()},duplicate(){this.output=this.output.filter((t=>!(!0===t.complementary))),this.output=Object.values(this.output.reduce(((t,e)=>{const a=`${e.date} + ${e.beverage.id}`;return t[a]||(t[a]={discount:[],date:e.date,beverage:e.beverage,id:[],invoice_id:[],quantity:[],subtotal:[]}),t[a].discount.push(e.discount),t[a].invoice_id.push(e.invoice_id),t[a].quantity.push(e.quantity),t[a].id.push(e.id),t[a].subtotal.push(e.subtotal),t}),{}))},detail(t){this.pass=t,this.dialog=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},Ul=zl,Vl=Object(p["a"])(Ul,gl,_l,!1,null,null,null),Wl=Vl.exports;kt()(Vl,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QDialog:Nt["a"],QInput:Et["a"],QBtn:xt["a"],QSeparator:Bt["a"],QMarkupTable:Te["a"]});var Yl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 q-pl-sm"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",{staticClass:"q-pa-none q-mb-sm"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12 q-mb-lg"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Inventory Item Sales Report")])]),a("div",{staticClass:"col-12"},[a("DateBar",{attrs:{checkFiscalYearBoolean:t.checkFiscalYearBoolean},on:{thisFiscalYear:t.thisFiscalYear,dateType:t.dateType,startDateBs:t.startDateBs,endDateBs:t.endDateBs,fromDate:t.fromDate,toDate:t.toDate}})],1),a("div",{staticClass:"col-2"},[a("q-dialog",{model:{value:t.foodStatus,callback:function(e){t.foodStatus=e},expression:"foodStatus"}},[a("FoodItemList",{staticClass:"q-pa-md",attrs:{select:!0},on:{exitFood:t.exitFood}})],1),a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Inventory Item Search",type:"text",readonly:""},on:{click:function(e){t.foodStatus=!0}},model:{value:t.itemName,callback:function(e){t.itemName=e},expression:"itemName"}})],1),a("div",{staticClass:"col-6"},[a("q-btn",{staticClass:"bg-delete",attrs:{push:"",size:"0.8rem",label:"Show Report"},on:{click:function(e){return t.fetchReport()}}})],1)])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-none q-mt-md"},[0===t.foodReport.length?a("div",{staticClass:"text-center font-bold"},[t._v("\n        No Rows To Display\n      ")]):a("div",[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:".8rem",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","food-report")}}})],1)]),a("q-markup-table",{attrs:{separator:t.separator,id:"tbl"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Inventory Item")]),a("th",{staticClass:"text-center"},[t._v("Date")]),a("th",{staticClass:"text-center"},[t._v("Quantity")]),a("th",{staticClass:"text-center"},[t._v("Total Amount")])])]),a("tbody",[t._l(t.output,(function(e){return a("tr",{key:e.inventory_item.id},[a("td",{on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.inventory_item.item))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.date))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v("Rs. "+t._s(e.subtotal.reduce((function(t,e){return parseFloat(t)+parseFloat(e)}),0).toFixed(2)))])])})),a("tr",[a("td"),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.calculateQuantity))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.calculateSubTotal.toFixed(2)))])])],2)])],1)])],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("InventoryItemDetail",{attrs:{pass:t.pass}})],1)],1)},Gl=[],Hl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",[a("div",{staticClass:"col-12 q-mb-sm"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Detail View ("+t._s(t.pass.food.name)+")")])])]),a("q-separator"),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","detail- food-report")}}})],1)]),a("p",{staticClass:"q-mb-none"},[a("span",[t._v("Ordered Date: "+t._s(t.pass.date))])])]),a("div",{staticClass:"col-12"},[a("q-markup-table",{staticClass:"q-mt-md",attrs:{separator:t.separator,id:"tbl1"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Invoice No.")]),a("th",[t._v("Quantity")]),a("th",[t._v("Purchase Price")]),a("th",[t._v("Discount")]),a("th",[t._v("Total Amount")])])]),a("tbody",t._l(t.pass.invoice_id,(function(e,s){return a("tr",{key:s},[a("td",[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.showInvoice(e)}}},[t._v("\n                                    "+t._s(e)+"\n                                ")])]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.quantity[s]))]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.inventory.price))]),t.pass.discount[s].value?a("td",{staticClass:"text-center"},[1===t.pass.discount[s].discount_in?a("span",[t._v("Rs. "+t._s(t.pass.discount[s].value))]):a("span",[t._v(t._s(t.pass.discount[s].value)+" %")])]):a("td",{staticClass:"text-center"},[t._v(" - ")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.pass.subtotal[s]))])])})),0),a("tbody",[a("tr",[a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.total.toFixed(2)))])])])])],1)])]),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.single,callback:function(e){t.single=e},expression:"single"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId}})],1)],1)},Jl=[],Kl={components:{FinalBill:St},props:{pass:{required:!0}},data:()=>({merge:!1,single:!1,propSingleId:"",propMergeId:"",separator:"vertical"}),computed:{total(){return this.pass.subtotal.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{showInvoice(t){this.propSingleId=t,this.single=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},Zl=Kl,Xl=Object(p["a"])(Zl,Hl,Jl,!1,null,null,null),tc=Xl.exports;kt()(Xl,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSeparator:Bt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var ec={components:{DateBar:wl,InventoryItemDetail:tc,FoodItemList:Me},data:()=>({foodReport:[],separator:"vertical",from_date:"",to_date:"",thisFYear:"",billDetail:!1,bill_detail:{},start_date_bs:"",end_date_bs:"",checkFiscalYearBoolean:!1,dataStatus:!1,from_date_all:"",to_date_all:"",output:[],totalQuantity:[],totalAmount:[],pass:{},foodStatus:!1,dialog:!1,itemName:null,itemId:null}),created(){this.fetchDate()},computed:{calculateQuantity(){return this.totalQuantity=[],this.output.forEach((t=>{this.totalQuantity.push(t.quantity)})),this.totalQuantity=this.totalQuantity.flat(1/0),this.totalQuantity.reduce(((t,e)=>t+e),0)},calculateSubTotal(){return this.totalAmount=[],this.output.forEach((t=>{this.totalAmount.push(t.subtotal)})),this.totalAmount=this.totalAmount.flat(1/0),this.totalAmount.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{exitFood(t){this.itemId=t.id,this.itemName=t.name,this.foodStatus=!1},async fetchReport(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"});try{const t=await Rl({search:this.itemId,item:5,to_date:this.to_date,from_date:this.from_date});this.foodReport=t.data,this.$q.loading.hide(),this.recreateApi()}catch(error){this.$q.loading.hide()}},fetchDate(){const t=new Date,e=t.getFullYear();let a=t.getMonth()+1,s=t.getDate(),n=null,i=null;n=s<10?"0"+s:s,i=a<10?"0"+a:a;const o=e+"-"+i+"-"+n;this.to_date=o,this.from_date=o},toDate(t){this.to_date=t},fromDate(t){this.from_date=t},thisFiscalYear(t){this.thisFYear=!!t},startDateBs(t){this.start_date_bs=t},endDateBs(t){this.end_date_bs=t},dateType(t){this.date_type=t},recreateApi(){this.foodReport.forEach((t=>{t.invoice.id=t.id})),this.output=[],this.foodReport=Object.values(this.foodReport.reduce(((t,e)=>{const a=`${e.billing_date.substring(0,10)} + ${e.billing_date_bs}`;return t[a]||(t[a]={billing_date:e.billing_date.substring(0,10),invoice:[],billing_date_bs:e.billing_date_bs}),t[a].invoice.push(e.invoice),t}),{})),this.foodReport.forEach((t=>{t.invoice.forEach((e=>{e.order?(e.order.order_inventory_item=e.order.order_inventory_item.map((a=>k()(k()({},a),{},{invoice_id:e.id,date:t.billing_date}))),this.output.push(e.order.order_inventory_item),e.order.order_inventory_item=[]):e.merged_order&&(e.merged_order.merge_order_inventory_item=e.merged_order.merge_order_inventory_item.map((a=>k()(k()({},a),{},{invoice_id:e.id,date:t.billing_date}))),this.output.push(e.merged_order.merge_order_inventory_item),e.merged_order.merge_order_inventory_item=[])}))})),this.output=this.output.flat(1/0),this.duplicate()},duplicate(){this.output=this.output.filter((t=>!(!0===t.complementary))),this.output=Object.values(this.output.reduce(((t,e)=>{const a=`${e.date} + ${e.food.id}`;return t[a]||(t[a]={discount:[],date:e.date,food:e.food,id:[],invoice_id:[],quantity:[],subtotal:[]}),t[a].discount.push(e.discount),t[a].invoice_id.push(e.invoice_id),t[a].quantity.push(e.quantity),t[a].id.push(e.id),t[a].subtotal.push(e.subtotal),t}),{}))},detail(t){this.pass=t,this.dialog=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},ac=ec,sc=Object(p["a"])(ac,Yl,Gl,!1,null,null,null),nc=sc.exports;kt()(sc,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QDialog:Nt["a"],QInput:Et["a"],QBtn:xt["a"],QSeparator:Bt["a"],QMarkupTable:Te["a"]});var ic=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[t.invoiceDetail?a("span",{staticClass:"font-bold text-md q-mb-none q-pa-md"},[t._v("Payment Menu")]):a("span",{staticClass:"font-bold text-md q-mb-none q-pa-md"},[t._v("Invoice Menu")])])])])],1)]),a("q-card",{staticClass:"my-card q-mt-lg",staticStyle:{"box-shadow":"none"}},[a("q-card-section",[t.invoiceDetail?a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card q-pa-md",staticStyle:{"box-shadow":"none"}},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12"},[t.invoiceDetail.Invoice.membership?a("q-input",{attrs:{disable:"",dense:"",filled:"","bg-color":"orange-1",label:"Select Customer"},model:{value:t.customer.name,callback:function(e){t.$set(t.customer,"name",e)},expression:"customer.name"}}):a("q-input",{attrs:{readonly:"",dense:"",filled:"","bg-color":"orange-1",label:"Select Customer"},on:{click:function(e){t.customerDialog=!0}},model:{value:t.customer.name,callback:function(e){t.$set(t.customer,"name",e)},expression:"customer.name"}})],1),a("div",{staticClass:"col-12 q-mt-sm"},[a("q-select",{ref:"mySelect",attrs:{"bg-color":"orange-1",dense:"",filled:"",options:t.paymentModeOptions,label:"Select Payment Mode","max-values":"2",multiple:"","stack-label":"","use-chips":"","map-options":"","emit-value":""},on:{input:function(e){return t.handleSelect()}},model:{value:t.paymentMode,callback:function(e){t.paymentMode=e},expression:"paymentMode"}})],1),a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[t.paymentMode.length>0?a("div",{staticClass:"col-6"},[a("p",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[1],expression:"paymentMode[1] === 7"}],staticClass:"text-h7"},[t._v("Payment Details")]),a("q-input",{directives:[{name:"show",rawName:"v-show",value:1===t.paymentMode[0],expression:"paymentMode[0] === 1"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cash Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:2===t.paymentMode[0],expression:"paymentMode[0] === 2"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cheque Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:3===t.paymentMode[0],expression:"paymentMode[0] === 3"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"E-sewa Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:4===t.paymentMode[0],expression:"paymentMode[0] === 4"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"FonePay Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:5===t.paymentMode[0],expression:"paymentMode[0] === 5"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Khalti Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:6===t.paymentMode[0],expression:"paymentMode[0] === 6"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Card Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[0],expression:"paymentMode[0] === 7"}],staticClass:"text-h7"},[t._v("Credit Details")]),a("q-input",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[0],expression:"paymentMode[0] === 7"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Credit Amount",disable:""},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[0],expression:"paymentMode[0] === 7"}],staticClass:"q-mt-sm",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Due Date",type:"date"},model:{value:t.dueDate,callback:function(e){t.dueDate=e},expression:"dueDate"}})],1):t._e(),2===t.paymentMode.length?a("div",{staticClass:"col-6"},[a("p",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[0],expression:"paymentMode[0] === 7"}],staticClass:"text-h7"},[t._v("Payment Details")]),1===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cash Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),2===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cheque Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),3===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"E-sewa Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),4===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"FonePay Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),5===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Khalti Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),6===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Card Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),a("p",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[1],expression:"paymentMode[1] === 7"}],staticClass:"text-h7"},[t._v("Credit Details")]),a("q-input",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[1],expression:"paymentMode[1] === 7"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Credit Amount",disable:""},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[1],expression:"paymentMode[1] === 7"}],staticClass:"q-mt-sm",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Due Date",type:"date"},model:{value:t.dueDate,callback:function(e){t.dueDate=e},expression:"dueDate"}})],1):t._e()]),a("div",{staticClass:"col-12 q-mt-md"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.paymentMode.length>=1,expression:"paymentMode.length >= 1"}],staticClass:"bg-payment",attrs:{size:"0.8rem",push:"",label:"Confirm Payment"},on:{click:function(e){return t.paymentBtn()}}})],1)])])],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"q-pa-sm",staticStyle:{"box-shadow":"none"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{attrs:{id:"pos"}},[a("div",{staticClass:"header"},[a("p",{staticClass:"q-ma-none"},[t._v(t._s(t.resDetail.name))]),a("p",{staticClass:"q-ma-none"},[t._v(t._s(t.resDetail.address))]),t.resDetail.vat_number?a("p",{staticClass:"q-ma-none"},[t._v("PAN No: "+t._s(t.resDetail.vat_number))]):a("p",{staticClass:"q-ma-none"},[t._v("PAN No: -")]),a("p",{staticClass:"q-ma-none"},[t._v("PROVISIONAL BILL")])]),a("div",{staticClass:"customer-info"},[a("p",{staticClass:"q-ma-none q-mb-xs"},[a("span",[t._v("\n                        Invoice No.: "+t._s(t.invoiceDetail.Invoice.id)+"\n                      ")])]),a("p",{staticClass:"q-ma-none q-mb-xs"},[a("span",[t._v("\n                        Date : "+t._s(t.invoiceDetail.Invoice.order.order_date.substring(0,10))+"\n                      ")])]),a("p",{staticClass:"q-ma-none q-mb-xs"},[t._v("\n                      Table: "),t.invoiceDetail.Invoice.order.table?a("span",[t._v(t._s(t.invoiceDetail.Invoice.order.table.number))]):t._e()])]),a("div",{staticClass:"items"},[a("table",[a("tr",[a("th",{staticClass:"left"},[t._v("PARTICULARS")]),a("th",[t._v("QTY")]),a("th",[t._v("RATE")]),a("th",[t._v("AMOUNT")])]),t._l(t.filterFood,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.food.detail.name.toUpperCase()))]),a("td",{staticClass:"center-text"},[t._v(t._s(e.quantity))]),(e.food.is_taxable,a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(e.food.detail.price)+"\n\n                        ")])),a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(t.amtWTax(e,e.food.detail.price).toFixed(2))+"\n                        ")])])})),t._l(t.filterBeverage,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.beverage.detail.name.toUpperCase()))]),a("td",{staticClass:"center-text"},[t._v(t._s(e.quantity))]),(e.beverage.is_taxable,a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(e.beverage.detail.price)+"\n\n                        ")])),a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(t.amtWTax(e,e.beverage.detail.price).toFixed(2))+"\n\n                        ")])])})),t._l(t.filterAddons,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.addons.detail.name.toUpperCase()))]),a("td",{staticClass:"center-text"},[t._v(t._s(e.quantity))]),(e.addons.is_taxable,a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(e.addons.detail.price)+"\n\n                        ")])),a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(t.amtWTax(e,e.addons.detail.price).toFixed(2))+"\n                        ")])])})),t._l(t.filterInventory,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.inventory_item.item.name.toUpperCase()))]),a("td",{staticClass:"center-text"},[t._v(t._s(e.quantity))]),e.inventory_item.is_taxable?a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(e.inventory_item.sales_price)+"\n                        ")]):a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(e.inventory_item.sales_price)+"\n\n                        ")]),a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(t.amtWTax(e,e.inventory_item.sales_price).toFixed(2))+"\n                        ")])])})),t._l(t.filterCombo,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.combo_offer.name.toUpperCase()))]),a("td",{staticClass:"center-text"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(e.combo_offer.price)+"\n\n                        ")]),a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(t.amtWTax(e,e.combo_offer.price).toFixed(2))+"\n                        ")])])})),a("tr",{staticStyle:{"border-bottom":".5px dashed black","border-top":".5px dashed black"}},[a("td"),a("td"),a("td",{staticClass:"center-text"},[t._v("Total")]),a("td",{staticClass:"center-text"},[t._v("\n                          Rs."+t._s(t.totalAmtWTax.toFixed(2))+"\n                        ")])])],2)]),a("div",{staticClass:"q-mt-xs"},[a("p",{staticClass:"q-ma-none"},[a("span",[t._v("Total Qty.: "+t._s(t.itemCount))]),a("span",{staticClass:"float-right"},[t._v("Discount Amount :\n                        "+t._s(t.invoiceDetail.Invoice.discount_amount))])])]),a("div",{staticClass:"q-mt-xs q-pb-xs totals"},[a("p",{staticClass:"q-ma-none"},[t._v("Grand Total : "+t._s(t.invoiceDetail.Invoice.net_price))])]),a("div",{staticClass:"q-mt-xs q-pb-xs words"},[a("p",{staticClass:"q-ma-none"},[a("span",[t._v("In Words: "+t._s(t.amountWords))])])]),a("div",{staticClass:"change q-mt-xs q-pb-xs"},[a("p",{staticClass:"q-ma-none"},[a("span",[t._v("Cashier: "+t._s(t.$store.state.user.user.user.toUpperCase()))])])]),a("div",{staticClass:"q-mt-xs",staticStyle:{"text-align":"center"}},[a("p",{staticClass:"q-ma-none"},[t._v("Thank You, Enjoy Your Meal :)")])])])])])]),a("div",{staticClass:"col-12"},[a("q-btn",{staticClass:"q-ml-sm q-mt-sm bg-delete",attrs:{label:"Cancel Invoice",padding:"sm",push:"",size:"0.8rem"},on:{click:function(e){return t.cancelDialog(t.invoiceDetail.id)}}}),a("q-btn",{staticClass:"bg-confirm q-ml-md  q-mt-sm",attrs:{label:"Print",dense:"",push:"",size:"0.8rem",padding:"sm sm"},on:{click:function(e){return t.printInvoice()}}})],1)],1)]):a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12"},[a("InvoiceGeneration",{on:{invoiceGenerated:t.invoiceGenerated}})],1)])])],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.customerDialog,callback:function(e){t.customerDialog=e},expression:"customerDialog"}},[a("CustomerList",{staticClass:"q-pa-sm",attrs:{select:!0},on:{selectedCustomer:t.selectedCustomer}})],1),a("q-dialog",{attrs:{persistent:"","full-height":"","full-width":""},model:{value:t.billStatus,callback:function(e){t.billStatus=e},expression:"billStatus"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId}})],1),a("q-dialog",{model:{value:t.cancel,callback:function(e){t.cancel=e},expression:"cancel"}},[a("DeleteLayout",{on:{deleteItem:t.deleteItem}})],1)],1)},oc=[],rc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-sm"},["Sit & Eat"==t.orders.order_type?a("p",{staticClass:"text-h7"},[t._v("Order Type: Dine In")]):a("p",{staticClass:"text-h7"},[t._v("Order Type: "+t._s(t.orders.order_type))]),a("p",{staticClass:"text-h7"},[t._v("Order Id: #"+t._s(t.orders.id))]),a("p",{staticClass:"text-h7"},[t._v("Table No: "),t.orders.table?a("span",[t._v(t._s(t.orders.table.number))]):t._e()]),a("q-markup-table",{attrs:{flat:"",bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("Complementary")]),a("th",{staticClass:"text-center"},[t._v("Comp. Qty.")]),a("th",{staticClass:"text-center"},[t._v("Taxable ?")]),a("th",{staticClass:"text-center"},[t._v("Items")]),a("th",{staticClass:"text-center"},[t._v("Qty.")]),a("th",{staticClass:"text-center"},[t._v("Price")]),a("th",{staticClass:"text-center"},[t._v("Discount")]),a("th",{staticClass:"text-center"},[t._v("Amt")]),a("th",{staticClass:"text-center"},[t._v("Type")]),a("th",{staticClass:"text-center"},[t._v("Total")])])]),a("tbody",[t._l(t.filterFood,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5"},model:{value:e.comp,callback:function(a){t.$set(e,"comp",a)},expression:"food.comp"}})],1),e.comp?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.complementary.complementary_quantity,callback:function(a){t.$set(e.complementary,"complementary_quantity",a)},expression:"food.complementary.complementary_quantity"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{disable:"",type:"number",filled:"",dense:"","bg-color":"amber-2",min:"0"},on:{input:t.onInput,keydown:t.keyHandler}})],1),!0===e.food.is_taxable?a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"green-4"}},[t._v(t._s(e.food.is_taxable))])],1):a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"red-4"}},[t._v(t._s(e.food.is_taxable))])],1),a("td",{staticClass:"text-center"},[t._v(t._s(e.food.detail.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.food.detail.price)+"\n                ")]),a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5"},model:{value:e.discount_status,callback:function(a){t.$set(e,"discount_status",a)},expression:"food.discount_status"}})],1),e.discount_status?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.discount.value,callback:function(a){t.$set(e.discount,"value",a)},expression:"food.discount.value"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),e.discount.value&&e.discount_status?a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"orange-3",options:t.discountOptions,"emit-value":"","map-options":""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"food.discount.discount_in"}})],1):a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"amber-2",options:t.discountOptions,"emit-value":"","map-options":"",disable:""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"food.discount.discount_in"}})],1),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.calculate(e)))])])})),t._l(t.filterBeverage,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5"},model:{value:e.comp,callback:function(a){t.$set(e,"comp",a)},expression:"beverage.comp"}})],1),e.comp?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.complementary.complementary_quantity,callback:function(a){t.$set(e.complementary,"complementary_quantity",a)},expression:"beverage.complementary.complementary_quantity"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{disable:"",type:"number",filled:"",dense:"","bg-color":"amber-2",min:"0"},on:{input:t.onInput,keydown:t.keyHandler}})],1),!0===e.beverage.is_taxable?a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"green-4"}},[t._v(t._s(e.beverage.is_taxable))])],1):a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"red-4"}},[t._v(t._s(e.beverage.is_taxable))])],1),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.beverage.detail.name)+"\n                ")]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.beverage.detail.price)+"\n                ")]),a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5"},model:{value:e.discount_status,callback:function(a){t.$set(e,"discount_status",a)},expression:"beverage.discount_status"}})],1),e.discount_status?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.discount.value,callback:function(a){t.$set(e.discount,"value",a)},expression:"beverage.discount.value"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),e.discount.value&&e.discount_status?a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"orange-3",options:t.discountOptions,"emit-value":"","map-options":""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"beverage.discount.discount_in"}})],1):a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"amber-2",options:t.discountOptions,"emit-value":"","map-options":"",disable:""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"beverage.discount.discount_in"}})],1),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.calculate(e)))])])})),t._l(t.filterInventory,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5"},model:{value:e.comp,callback:function(a){t.$set(e,"comp",a)},expression:"inventory.comp"}})],1),e.comp?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.complementary.complementary_quantity,callback:function(a){t.$set(e.complementary,"complementary_quantity",a)},expression:"inventory.complementary.complementary_quantity"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{disable:"",type:"number",filled:"",dense:"","bg-color":"amber-2",min:"0"},on:{input:t.onInput,keydown:t.keyHandler}})],1),!0===e.inventory_item.is_taxable?a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"green-4"}},[t._v(t._s(e.inventory_item.is_taxable))])],1):a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"red-4"}},[t._v(t._s(e.inventory_item.is_taxable))])],1),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.inventory_item.item.name)+"\n                ")]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.inventory_item.sales_price)+"\n                ")]),a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5"},model:{value:e.discount_status,callback:function(a){t.$set(e,"discount_status",a)},expression:"inventory.discount_status"}})],1),e.discount_status?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.discount.value,callback:function(a){t.$set(e.discount,"value",a)},expression:"inventory.discount.value"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),e.discount.value&&e.discount_status?a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"orange-3",options:t.discountOptions,"emit-value":"","map-options":""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"inventory.discount.discount_in"}})],1):a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"amber-2",options:t.discountOptions,"emit-value":"","map-options":"",disable:""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"inventory.discount.discount_in"}})],1),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.calculate(e)))])])})),t._l(t.filterAddons,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5"},model:{value:e.comp,callback:function(a){t.$set(e,"comp",a)},expression:"addons.comp"}})],1),e.comp?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.complementary.complementary_quantity,callback:function(a){t.$set(e.complementary,"complementary_quantity",a)},expression:"addons.complementary.complementary_quantity"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{disable:"",type:"number",filled:"",dense:"","bg-color":"amber-2",min:"0"},on:{input:t.onInput,keydown:t.keyHandler}})],1),!0===e.addons.is_taxable?a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"green-4"}},[t._v(t._s(e.addons.is_taxable))])],1):a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"red-4"}},[t._v(t._s(e.addons.is_taxable))])],1),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.addons.detail.name)+"\n                ")]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.addons.detail.price)+"\n                ")]),a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5"},model:{value:e.discount_status,callback:function(a){t.$set(e,"discount_status",a)},expression:"addons.discount_status"}})],1),e.discount_status?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.discount.value,callback:function(a){t.$set(e.discount,"value",a)},expression:"addons.discount.value"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),e.discount.value&&e.discount_status?a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"orange-3",options:t.discountOptions,"emit-value":"","map-options":""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"addons.discount.discount_in"}})],1):a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"amber-2",options:t.discountOptions,"emit-value":"","map-options":"",disable:""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"addons.discount.discount_in"}})],1),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.calculate(e)))])])})),t._l(t.orders.order_combo_offer,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5",disable:""},model:{value:e.comp,callback:function(a){t.$set(e,"comp",a)},expression:"combo.comp"}})],1),a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{disable:"",type:"number",filled:"",dense:"","bg-color":"amber-2",min:"0"},on:{input:t.onInput,keydown:t.keyHandler}})],1),a("td",{staticClass:"text-center"},[t._v("-")]),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.combo_offer.name)+"\n                ")]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.combo_offer.price)+"\n                ")]),a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5",disable:""},model:{value:e.discount,callback:function(a){t.$set(e,"discount",a)},expression:"combo.discount"}})],1),a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"amber-2",disable:""},model:{value:e.discount_value,callback:function(a){t.$set(e,"discount_value",a)},expression:"combo.discount_value"}})],1),a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"amber-2",disable:""},model:{value:e.discount_type,callback:function(a){t.$set(e,"discount_type",a)},expression:"combo.discount_type"}})],1),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.calculate(e)))])])}))],2)]),a("q-card",{staticClass:"bg-white q-pa-sm q-mt-md"},[a("div",{staticClass:"q-mt-sm"},[a("p",[a("span",[t._v("Membership")]),2===t.member.type?a("span",[t._v("("+t._s(t.member.discount)+"%)")]):t._e(),1==t.member.type?a("span",[t._v("(Rs. "+t._s(t.member.discount)+")")]):t._e(),a("span",{staticClass:"q-ml-lg"},[a("q-input",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{filled:"",dense:"","bg-color":"amber-2",label:"Select Member",readonly:""},on:{click:function(e){t.memberDialog=!0}},model:{value:t.member.name,callback:function(e){t.$set(t.member,"name",e)},expression:"member.name"}})],1),a("span",{staticClass:"q-ml-lg"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.member.name,expression:"member.name"}],staticClass:"q-mt-lg bg-confirm q-mb-sm",attrs:{label:"Clear Membership",size:".8rem",dense:"",push:"",padding:"xs sm"},on:{click:function(e){return t.clearMembership()}}})],1)])]),a("div",{staticClass:"q-mt-sm"},[a("p",[a("span",[t._v("Discount Amount")]),a("span",{staticClass:"q-ml-xl"},[t._v("Rs. "+t._s(t.calcDiscount.toFixed(2)))]),a("span",{staticClass:"q-ml-xl"},[a("q-input",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{filled:"",dense:"","bg-color":"amber-2",label:"Amount(Rs.)"},model:{value:t.discountAmount,callback:function(e){t.discountAmount=e},expression:"discountAmount"}})],1),a("span",{staticClass:"q-ml-xl"},[a("q-input",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{filled:"",dense:"","bg-color":"amber-2",label:"Percentage(%)"},model:{value:t.discountPercentage,callback:function(e){t.discountPercentage=e},expression:"discountPercentage"}})],1)])]),a("div",[a("span",[t._v("Vat amount ("+t._s(t.vatCharge)+"%)")]),a("span",{staticClass:"q-ml-xl"},[t._v(t._s(t.calcVat.toFixed(2)))])]),a("div",{staticClass:"q-mt-md"},[a("span",[t._v("Net Total")]),a("span",{staticClass:"q-ml-xl text-deep-orange font-bold"},[t._v("Rs. "+t._s(t.netTotal.toFixed(2)))])]),a("q-btn",{staticClass:"q-mt-lg bg-confirm q-mb-sm",attrs:{label:"Generate Invoice",size:".8rem",dense:"",push:"",padding:"xs sm"},on:{click:function(e){return t.generateInvoice()}}}),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.memberDialog,callback:function(e){t.memberDialog=e},expression:"memberDialog"}},[a("MembersList",{attrs:{select:!0},on:{selectedMember:t.selectedMember}})],1)],1)],1)},lc=[],cc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-pt-md"},[a("div",{staticClass:"col-6"},[a("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"col-6"},[t._v(" ")])]),a("div",{staticClass:"q-mt-md"},[a("q-markup-table",{attrs:{flat:"",bordered:""}},[a("thead",[a("tr",[a("th",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-left"},[t._v("Select")]),a("th",{staticClass:"text-left"},[t._v("Member Name")]),a("th",{staticClass:"text-center"},[t._v("Membership Type")]),a("th",{staticClass:"text-center"},[t._v("Valid From")]),a("th",{staticClass:"text-center"},[t._v("Valid Till")]),a("th",{staticClass:"text-center"},[t._v("Status")])])]),a("tbody",t._l(t.filterStatus,(function(e){return a("tr",{key:e.id},[a("td",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-center"},[a("q-checkbox",{on:{input:function(a){return t.sendMember(e)}},model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"member.select"}})],1),a("td",{staticClass:"text-left"},[t._v(t._s(e.customer))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.discount.discount_name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.valid_from.substring(0,10)))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.valid_till.substring(0,10)))]),a("td",{staticClass:"text-center"},[a("q-toggle",{attrs:{color:"orange-4"},on:{input:function(a){return t.update(e)}},model:{value:e.active_status,callback:function(a){t.$set(e,"active_status",a)},expression:"member.active_status"}})],1)])})),0)]),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{staticClass:"text-black",attrs:{color:"orange-3",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.memberStatus,callback:function(e){t.memberStatus=e},expression:"memberStatus"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-sm"},[a("h6",{staticClass:"q-ma-none"},[t._v("Choose Membership Period")]),a("q-space"),a("q-btn",{attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""},on:{click:t.closeForm}})],1),a("q-separator"),a("q-card-section",[a("AddMembers",{attrs:{edit:!0,mem:t.mem},on:{closeForm:t.closeForm}})],1)],1)],1)],1)])},dc=[],mc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pt-md"},[a("form",{ref:"memberForm"},[a("ValidationObserver",{ref:"memForm"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!edit"}],staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Customer",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{staticStyle:{cursor:"pointer"},attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Select Customer",readonly:"",dense:""},on:{click:function(e){t.customerDialog=!0}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!edit"}],staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Membership Type",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{staticStyle:{cursor:"pointer"},attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Select Membership Type",readonly:"",dense:""},on:{click:function(e){t.typeDialog=!0}},model:{value:t.membership,callback:function(e){t.membership=e},expression:"membership"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Start Date",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Valid From",type:"date"},model:{value:t.member.valid_from,callback:function(e){t.$set(t.member,"valid_from",e)},expression:"member.valid_from"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"End Date",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Valid till",type:"date"},model:{value:t.member.valid_till,callback:function(e){t.$set(t.member,"valid_till",e)},expression:"member.valid_till"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1)])]),a("p",[t.edit?a("q-btn",{staticClass:"q-mt-md",attrs:{push:"",size:".8rem","text-color":"black",label:"Done",type:"button",color:"orange-3"},on:{click:function(e){return t.update()}}}):a("q-btn",{staticClass:"q-mt-md",attrs:{push:"",size:".8rem","text-color":"black",label:"Add",type:"button",color:"orange-3"},on:{click:function(e){return t.add()}}})],1)],1),a("q-dialog",{model:{value:t.customerDialog,callback:function(e){t.customerDialog=e},expression:"customerDialog"}},[a("CustomerList",{attrs:{select:!0},on:{selectedCustomer:t.selectedCustomer}})],1),a("q-dialog",{model:{value:t.typeDialog,callback:function(e){t.typeDialog=e},expression:"typeDialog"}},[a("MembershipTypeList",{attrs:{select:!0},on:{selectedMembership:t.selectedMembership}})],1)],1)},uc=[],pc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-pt-md"},[a("div",{staticClass:"col-6"},[a("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"col-6"},[t._v(" ")])]),a("div",{staticClass:"q-mt-md"},[a("q-markup-table",{attrs:{flat:"",bordered:""}},[a("thead",[a("tr",[a("th",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-left"},[t._v("Select")]),a("th",{staticClass:"text-left"},[t._v("Membership type Name")]),a("th",{staticClass:"text-center"},[t._v("Discount Amount")]),a("th",{staticClass:"text-center"},[t._v("Discount Type")]),a("th",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}]},[t._v("Action")])])]),a("tbody",t._l(t.membership,(function(e){return a("tr",{key:e.id},[a("td",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-center"},[a("q-checkbox",{on:{input:function(a){return t.sendMembership(e)}},model:{value:e.select,callback:function(a){t.$set(e,"select",a)},expression:"ms.select"}})],1),a("td",{staticClass:"text-left"},[t._v(t._s(e.discount_name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.discount_amount))]),2===e.discount_type?a("td",{staticClass:"text-center"},[t._v("Percentage")]):a("td",{staticClass:"text-center"},[t._v("Flat Amount")]),a("td",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"text-center"},[a("span",[a("q-btn",{staticClass:"bg-delete",attrs:{padding:"xs xs","text-color":"black",icon:"delete"},on:{click:function(a){return t.remove(e.id)}}},[a("q-tooltip",[t._v("Remove")])],1)],1),a("span",{staticClass:"q-ml-sm"},[a("q-btn",{staticClass:"bg-confirm",attrs:{padding:"xs xs","text-color":"black",icon:"edit"},on:{click:function(a){return t.update(e)}}},[a("q-tooltip",[t._v("Edit")])],1)],1)])])})),0)]),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{staticClass:"text-black",attrs:{color:"orange-3",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1),a("q-dialog",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-sm"},[a("h6",{staticClass:"q-ma-none"},[t._v("Edit Customer Details")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("AddCustomer",{attrs:{edit:!0,sender:t.sender},on:{closeForm:t.closeForm}})],1)],1)],1)],1)])},hc=[],vc={created(){this.fetchMembership()},activated(){this.fetchMembership()},data:()=>({membership:[],search:"",last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:7}}),props:{select:{required:!0}},methods:{async fetchMembership(){const t=await rs();this.membership=t.data,this.membership=this.membership.map((t=>k()(k()({},t),{},{select:!1})))},sendMembership(t){this.$emit("selectedMembership",t)},remove(t){ls(t).then((()=>{this.$q.notify({message:"Membership Type Deleted",color:"green-5",icon:"info"}),this.fetchMembership()})).catch((t=>{this.$q.notify({message:t.response.data||"Unable to Delete",color:"red-5",icon:"warning"})}))}}},bc=vc,gc=Object(p["a"])(bc,pc,hc,!1,null,null,null),_c=gc.exports;kt()(gc,"components",{QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QCheckbox:ie["a"],QBtn:xt["a"],QTooltip:we["a"],QPagination:Oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QSeparator:Bt["a"]}),kt()(gc,"directives",{ClosePopup:le["a"]}),Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"}));var fc={components:{ValidationObserver:Zt["a"],ValidationProvider:Zt["b"],CustomerList:fs,MembershipTypeList:_c},data(){return{member:{customer:null,discount:null,valid_from:"",valid_till:""},name:"",membership:"",customerDialog:!1,typeDialog:!1}},props:{mem:{},edit:{}},created(){this.checkEdit()},methods:{async add(){if(await this.$refs.memForm.validate())try{await cs(this.member),this.$q.notify({message:"Member Added Successfully",color:"green-5",icon:"info"}),this.member={customer:null,discount:null,valid_from:"",valid_till:""},this.name="",this.membership=""}catch(error){this.$q.notify({message:"Unable to Add Member",color:"red-5",icon:"warning"})}},selectedCustomer(t){this.name=t.name,this.member.customer=t.id,this.customerDialog=!1},selectedMembership(t){this.membership=t.discount_name,this.member.discount=t.id,this.typeDialog=!1},checkEdit(){this.mem&&(this.member.valid_from=this.mem.valid_from.substring(0,10),this.member.valid_till=this.mem.valid_till.substring(0,10))},async update(){if(""===this.member.valid_from||""===this.member.valid_till)return void this.$q.notify({message:"Membership Period Must be Entered",color:"red-5",icon:"warning"});if(this.member.valid_from>this.member.valid_till)return void this.$q.notify({message:"Error: 'From' date must be earlier than 'Till' date.",color:"red-5",icon:"warning"});const t={valid_from:this.member.valid_from,valid_till:this.member.valid_till,status:"Active"};try{await ms(this.mem.id,t),this.$q.notify({message:"Membership Activated",color:"green-5",icon:"info"}),this.$emit("closeForm")}catch(error){this.$q.notify({message:"Unable to Activate",color:"red-5",icon:"warning"})}}}},yc=fc,qc=Object(p["a"])(yc,mc,uc,!1,null,null,null),Cc=qc.exports;kt()(qc,"components",{QInput:Et["a"],QBtn:xt["a"],QDialog:Nt["a"]});var xc={components:{AddMembers:Cc},created(){this.fetchMembership()},activated(){this.fetchMembership()},data:()=>({members:[],search:"",last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:7},memberStatus:!1,mem:{}}),computed:{filterStatus(){return this.select?this.members.filter((t=>"Active"===t.status)):this.members}},props:{select:{required:!0}},methods:{async fetchMembership(){if(this.select)var t=await ds({valid:!0});else t=await ds();this.members=t.data,this.members=this.members.map((t=>k()(k()({},t),{},{select:!1,active_status:!1}))),this.members.forEach((t=>t.active_status="Active"===t.status))},sendMember(t){this.$emit("selectedMember",t)},async update(t){if(!1===t.active_status&&"Active"===t.status){const e={status:"Inactive"};try{await ms(t.id,e);this.$q.notify({message:"Member Deactivated",color:"green-5",icon:"info"}),this.fetchMembership()}catch(error){this.$q.notify({message:"Unable to Deactivate",color:"red-5",icon:"warning"})}}else!0===t.active_status&&"Inactive"===t.status&&(this.memberStatus=!0,this.mem=t)},closeForm(){this.memberStatus=!1,this.fetchMembership()},onDismiss(){this.fetchMembership()}}},wc=xc,kc=Object(p["a"])(wc,cc,dc,!1,null,null,null),Ic=kc.exports;kt()(kc,"components",{QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QCheckbox:ie["a"],QToggle:$e["a"],QPagination:Oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QBtn:xt["a"],QSeparator:Bt["a"]});var Sc={components:{MembersList:Ic},created(){this.fetchRestaurant(),this.fetchSingleOrder()},data:()=>({showVatOnMenu:null,orders:{},sendFood:[],sendBeverage:[],sendAddons:[],sendCombo:[],sendInventory:[],vatCharge:null,orderId:null,total:null,discountAmount:null,discountPercentage:null,memberDialog:!1,discountOptions:[{label:"Amt",value:1},{label:"%",value:2}],member:{name:"",id:null,discount:null,type:""},passingInvoice:{}}),computed:{calcVat(){const{orderfood:t,orderbeverage:e,orderaddons:a,order_inventory_item:s}=this.orders;if(t)var n=t.reduce(((t,e)=>t+parseFloat(e.total_vat)),0);else n=0;if(e)var i=e.reduce(((t,e)=>t+parseFloat(e.total_vat)),0);else i=0;if(a)var o=a.reduce(((t,e)=>t+parseFloat(e.total_vat)),0);else o=0;if(s)var r=s.reduce(((t,e)=>t+parseFloat(e.total_vat)),0);else r=0;return parseFloat(n)+parseFloat(i)+parseFloat(o)+parseFloat(r)},calcDiscount(){if(this.orders.orderfood)var t=this.orders.orderfood.reduce(((t,e)=>t+parseFloat(e.total_discount)),0);else t=0;if(this.orders.orderbeverage)var e=this.orders.orderbeverage.reduce(((t,e)=>t+parseFloat(e.total_discount)),0);else e=0;if(this.orders.orderaddons)var a=this.orders.orderaddons.reduce(((t,e)=>t+parseFloat(e.total_discount)),0);else a=0;if(this.orders.order_inventory_item)var s=this.orders.order_inventory_item.reduce(((t,e)=>t+parseFloat(e.total_discount)),0);else s=0;return parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(s)},netTotal(){if(this.orders.orderfood)var t=this.orders.orderfood.reduce(((t,e)=>null!==e.net_total?t+parseFloat(e.net_total):t),0);else t=0;if(this.orders.orderbeverage)var e=this.orders.orderbeverage.reduce(((t,e)=>null!==e.net_total?t+parseFloat(e.net_total):t),0);else e=0;if(this.orders.orderaddons)var a=this.orders.orderaddons.reduce(((t,e)=>null!==e.net_total?t+parseFloat(e.net_total):t),0);else a=0;if(this.orders.order_inventory_item)var s=this.orders.order_inventory_item.reduce(((t,e)=>null!==e.net_total?t+parseFloat(e.net_total):t),0);else s=0;if(this.orders.order_combo_offer)var n=this.orders.order_combo_offer.reduce(((t,e)=>null!==e.net_total?t+parseFloat(e.net_total):t),0);else n=0;return this.total=parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(n)+parseFloat(s),this.total},grossTotal(){if(this.orders.orderfood)var t=this.orders.orderfood.reduce(((t,e)=>null!==e.gross_total?t+parseFloat(e.gross_total):t),0);else t=0;if(this.orders.orderbeverage)var e=this.orders.orderbeverage.reduce(((t,e)=>null!==e.gross_total?t+parseFloat(e.gross_total):t),0);else e=0;if(this.orders.orderaddons)var a=this.orders.orderaddons.reduce(((t,e)=>null!==e.gross_total?t+parseFloat(e.gross_total):t),0);else a=0;if(this.orders.order_inventory_item)var s=this.orders.order_inventory_item.reduce(((t,e)=>null!==e.gross_total?t+parseFloat(e.gross_total):t),0);else s=0;if(this.orders.order_combo_offer)var n=this.orders.order_combo_offer.reduce(((t,e)=>null!==e.gross_total?t+parseFloat(e.gross_total):t),0);else n=0;return parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(s)+parseFloat(n)},filterFood(){return this.orders.orderfood?this.orders.orderfood.filter((t=>!("Canceled"===t.status))):[]},filterBeverage(){return this.orders.orderbeverage?this.orders.orderbeverage.filter((t=>!("Canceled"===t.status))):[]},filterAddons(){return this.orders.orderaddons?this.orders.orderaddons.filter((t=>!("Canceled"===t.status))):[]},filterInventory(){return this.orders.order_inventory_item?this.orders.order_inventory_item.filter((t=>!("Canceled"===t.status))):[]}},methods:{fetchRestaurant(){$().then((t=>{this.vatCharge=t.data.vat,this.showVatOnMenu=t.data.settings.show_tax_included_price}))},async fetchSingleOrder(){this.orderId=this.$route.query.id;const t=await X(this.orderId);this.orders=t.data.order,this.orders.orderfood&&(this.orders.orderfood=this.orders.orderfood.map((t=>k()(k()({},t),{},{discount_status:!1,net_total:null,gross_total:null,total_discount:0,total_vat:0,comp:!1})))),this.orders.orderbeverage&&(this.orders.orderbeverage=this.orders.orderbeverage.map((t=>k()(k()({},t),{},{discount_status:!1,net_total:null,gross_total:null,total_discount:0,total_vat:0,comp:!1})))),this.orders.order_inventory_item&&(this.orders.order_inventory_item=this.orders.order_inventory_item.map((t=>k()(k()({},t),{},{discount_status:!1,net_total:null,gross_total:null,total_discount:0,total_vat:0,comp:!1})))),this.orders.orderaddons&&(this.orders.orderaddons=this.orders.orderaddons.map((t=>k()(k()({},t),{},{discount_status:!1,net_total:null,gross_total:null,total_discount:0,total_vat:0,comp:!1})))),this.orders.order_combo_offer&&(this.orders.order_combo_offer=this.orders.order_combo_offer.map((t=>k()(k()({},t),{},{discount_value:null,net_total:null,discount_type:"",discount:!1,gross_total:null}))))},calculate(t){if("food"in t)var e=t.food;else if("beverage"in t)e=t.beverage;else if("addons"in t)e=t.addons;else if("inventory_item"in t)e=t.inventory_item;else if("combo_offer"in t){if(!t.discount)return t.net_total=t.subtotal,t.gross_total=t.subtotal*(100/(100+parseFloat(this.vatCharge))),t.net_total;if(t.discount){var a=t.subtotal*(t.discount_value/100);return t.net_total=t.subtotal-a,t.gross_total=t.subtotal*(100/(100+parseFloat(this.vatCharge))),t.net_total}}var s=t.subtotal;t.comp&&(t.complementary.complementary_quantity===t.quantity?(t.net_total=0,t.total_vat=0):s=(parseFloat(t.quantity)-parseFloat(t.complementary.complementary_quantity))*parseFloat(e.detail.price));const{subtotal:n,grossAmtFrItem:i,taxAmt:o,taxableAmt:r,discountAmt:l}=this.calculateTotals(s,t,e);return t.total_vat=o,t.total_discount=l,t.net_total=n,t.gross_total=i,t.net_total},calculateTotals(t,e,a){var s=0,n=0,i=0,o=0;if(this.showVatOnMenu){if(!a.is_taxable&&!e.discount_status)return s=t,this.member.name&&(o=t*(this.member.discount/100),t-=t*(this.member.discount/100)),{subtotal:t,grossAmtFrItem:s,taxAmt:i,taxableAmt:n,discountAmt:o};if(a.is_taxable&&!e.discount_status){var r=t*(100/(100+parseFloat(this.vatCharge)));return n=r,s=r,this.member.name&&(o=parseFloat(o)+parseFloat(t*(this.member.discount/100)),t-=t*(this.member.discount/100)),i=t-r,{subtotal:t,grossAmtFrItem:s,taxAmt:i,taxableAmt:n,discountAmt:o}}if(!a.is_taxable&&e.discount_status)return s=t,1===e.discount.discount_in?(o=e.discount.value,t-=e.discount.value):(o=e.discount.value*t/100,t-=o),this.member.name&&(o=parseFloat(o)+parseFloat(t*(this.member.discount/100)),t-=t*(this.member.discount/100)),{subtotal:t,grossAmtFrItem:s,taxAmt:i,taxableAmt:n,discountAmt:o};if(a.is_taxable&&e.discount_status)return t*=100/(100+parseFloat(this.vatCharge)),s=t,1==e.discount.discount_in?(o=e.discount.value,t-=e.discount.value):(o=e.discount.value*t/100,t-=o),this.member.name&&(o=parseFloat(o)+parseFloat(t*(this.member.discount/100)),t-=t*(this.member.discount/100)),n=t,i=t*parseFloat(this.vatCharge)/100,t+=i,{subtotal:t,grossAmtFrItem:s,taxAmt:i,taxableAmt:n,discountAmt:o}}else{if(!e.discount_status)return s=t,this.member.name&&(o=t*(this.member.discount/100),t-=t*(this.member.discount/100)),a.is_taxable&&(n=t,i=t*(parseFloat(this.vatCharge)/100),t=parseFloat(t)+i),{subtotal:t,grossAmtFrItem:s,taxAmt:i,taxableAmt:n,discountAmt:o};if(e.discount_status)return s=t,1===e.discount.discount_in?(o=e.discount.value,t-=e.discount.value):(o=e.discount.value*t/100,t-=o),this.member.name&&(o=t*(this.member.discount/100),t-=t*(this.member.discount/100)),a.is_taxable&&(n=t,i=t*(parseFloat(this.vatCharge)/100),t+=i),{subtotal:t,grossAmtFrItem:s,taxAmt:i,taxableAmt:n,discountAmt:o}}},async clearMembership(){this.member={name:"",id:null,discount:null,type:""}},async generateInvoice(){this.passingInvoice={},this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:100,message:"Generating Invoice !",messageColor:"white"});const{orderfood:t,orderbeverage:e,orderaddons:a,order_combo_offer:s,order_inventory_item:n}=this.orders;t.forEach((t=>{!t.discount_status&&t.discount&&(t.discount.value=null,t.discount.discount_in=null),t.discount&&(t.discount.value||t.discount.discount_in||(t.discount=null,t.discount_status=!1)),t.comp||(t.complementary.complementary_quantity=null),t.complementary.complementary_quantity||(t.comp=!1)})),e.forEach((t=>{!t.discount_status&&t.discount&&(t.discount.value=null,t.discount.discount_in=null),t.discount&&(t.discount.value||t.discount.discount_in||(t.discount=null,t.discount_status=!1)),t.comp||(t.complementary.complementary_quantity=null),t.complementary.complementary_quantity||(t.comp=!1)})),n.forEach((t=>{!t.discount_status&&t.discount&&(t.discount.value=null,t.discount.discount_in=null),t.discount&&(t.discount.value||t.discount.discount_in||(t.discount=null,t.discount_status=!1)),t.comp||(t.complementary.complementary_quantity=null),t.complementary.complementary_quantity||(t.comp=!1)})),a.forEach((t=>{!t.discount_status&&t.discount&&(t.discount.value=null,t.discount.discount_in=null),t.discount&&(t.discount.value||t.discount.discount_in||(t.discount=null,t.discount_status=!1)),t.comp||(t.complementary.complementary_quantity=null),t.complementary.complementary_quantity||(t.comp=!1)})),t.map((t=>{this.sendFood.push({id:t.id,food:t.food.id,quantity:t.quantity,discount:t.discount,complementary:t.complementary})})),e.map((t=>{this.sendBeverage.push({id:t.id,beverage:t.beverage.id,quantity:t.quantity,discount:t.discount,complementary:t.complementary})})),a.map((t=>{this.sendAddons.push({id:t.id,addons:t.addons.id,quantity:t.quantity,discount:t.discount,complementary:t.complementary})})),n.map((t=>{this.sendInventory.push({id:t.id,inventory_item:t.inventory_item.id,quantity:t.quantity,discount:t.discount,complementary:t.complementary})})),s.map((t=>{this.sendCombo.push({combo_offer:t.combo_offer.id,quantity:t.quantity})})),this.discountPercentage?this.passingInvoice={order:{order_id:this.orders.id,orderfood:this.sendFood,orderbeverage:this.sendBeverage,orderaddons:this.sendAddons,orderinventoryitem:this.sendInventory,ordercombooffer:this.sendCombo},is_merged:!1,net_price:this.total.toFixed(2),vat:this.vatCharge,delivery_charge:null,membership:this.member.id,discount:{discount_in:2,value:this.discountPercentage}}:this.passingInvoice={order:{order_id:this.orders.id,orderfood:this.sendFood,orderbeverage:this.sendBeverage,orderaddons:this.sendAddons,orderinventoryitem:this.sendInventory,ordercombooffer:this.sendCombo},is_merged:!1,net_price:this.total.toFixed(2),vat:this.vatCharge,delivery_charge:null,membership:this.member.id,discount:null};try{const t=await it(this.passingInvoice);this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Bill Generated"}),this.$q.loading.hide();const e=sessionStorage.getItem("res_name");Ja.send(JSON.stringify({type:"invoice_generated",res_name:e})),"ALL Complementary!"===t.data[0]?window.close():this.$emit("invoiceGenerated")}catch(error){this.sendFood=[],this.sendAddons=[],this.sendBeverage=[],this.sendCombo=[],this.sendInventory=[];const{orderfood:e,orderbeverage:a,orderaddons:s,order_combo_offer:n,order_inventory_item:i}=this.orders;e.forEach((t=>{t.discount={value:null,discount_in:null}})),a.forEach((t=>{t.discount={value:null,discount_in:null}})),i.forEach((t=>{t.discount={value:null,discount_in:null}})),s.forEach((t=>{t.discount={value:null,discount_in:null}})),this.$q.loading.hide(),error.response.data.non_field_errors[0]?this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:error.response.data.non_field_errors[0]}):this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Error Generationg Bill!"})}},selectedMember(t){1===t.discount.discount_type?this.member.discount=100*t.discount.discount_amount/this.grossTotal:this.member.discount=t.discount.discount_amount,this.member.name=t.customer,this.member.id=t.id,this.member.type=t.discount.discount_type,this.memberDialog=!1},keyHandler(t){this.model<1&&"ArrowDown"===t.key&&t.preventDefault(),"-"===t.key&&t.preventDefault()},onInput(t){this.model=t,t&&t<0&&(this.model=0)}},watch:{discountAmount(){this.discountPercentage=100*this.discountAmount/this.grossTotal},discountPercentage(){const{orderfood:t,orderbeverage:e,orderaddons:a,order_combo_offer:s,order_inventory_item:n}=this.orders;t.forEach((t=>{t.complementary.complementary_quantity!==t.quantity&&(t.discount_status=!0,t.discount.discount_in=2,t.discount.value=this.discountPercentage)})),e.forEach((t=>{t.complementary.complementary_quantity!==t.quantity&&(t.discount_status=!0,t.discount.discount_in=2,t.discount.value=this.discountPercentage)})),n.forEach((t=>{t.complementary.complementary_quantity!==t.quantity&&(t.discount_status=!0,t.discount.discount_in=2,t.discount.value=this.discountPercentage)})),a.forEach((t=>{t.complementary.complementary_quantity!==t.quantity&&(t.discount_status=!0,t.discount.discount_in=2,t.discount.value=this.discountPercentage)})),s.forEach((t=>{t.discount=!0,t.discount_value=this.discountPercentage,t.discount_type="%"}))}}},Dc=Sc,Ac=Object(p["a"])(Dc,rc,lc,!1,null,null,null),Fc=Ac.exports;kt()(Ac,"components",{QMarkupTable:Te["a"],QCheckbox:ie["a"],QInput:Et["a"],QBadge:ke["a"],QSelect:ae["a"],QCard:Ct["a"],QBtn:xt["a"],QDialog:Nt["a"]});var Tc={components:{Table:La,InvoiceGeneration:Fc,CustomerList:fs,FinalBill:St,DeleteLayout:_e},created(){this.fetchInvoice(),this.fetchRestaurant()},data(){return{resDetail:{},paymentMode:[],paymentModeOptions:[{label:"Cash",value:1},{label:"Cheque",value:2},{label:"E-sewa",value:3},{label:"Fonepay",value:4},{label:"Khalti",value:5},{label:"Card",value:6},{label:"Credit",value:7}],customer:{name:"",id:null},cancel:!1,paymentAmount:[],paymentArray:[],dueDate:null,deliveryCharge:null,invoiceDetail:null,orderId:null,vatCharge:null,customerDialog:!1,billStatus:!1,propSingleId:null}},computed:{amountWords(){if(this.invoiceDetail){const t=new S["ToWords"]({localeCode:"en-IN",converterOptions:{currency:!0,ignoreDecimal:!1,ignoreZeroCurrency:!1,doNotAddOnly:!1,currencyOptions:{name:"Rupee",plural:"Rupees",symbol:"₹",fractionalUnit:{name:"Paisa",plural:"Paisa",symbol:""}}}}),e=t.convert(this.invoiceDetail.Invoice.net_price);return e}return""},filterFood(){const{orderfood:t}=this.invoiceDetail.Invoice.order,e=t.filter((t=>!(0===t.quantity)));return e.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null,comp_quantity:null})))},filterBeverage(){const{orderbeverage:t}=this.invoiceDetail.Invoice.order,e=t.filter((t=>!(0===t.quantity)));return e.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null,comp_quantity:null})))},filterAddons(){const{orderaddons:t}=this.invoiceDetail.Invoice.order,e=t.filter((t=>!(0===t.quantity)));return e.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null,comp_quantity:null})))},filterInventory(){const{order_inventory_item:t}=this.invoiceDetail.Invoice.order,e=t.filter((t=>!(0===t.quantity)));return e.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null,comp_quantity:null})))},filterCombo(){const{order_combo_offer:t}=this.invoiceDetail.Invoice.order,e=t.filter((t=>!(0===t.quantity)));return e.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null,comp_quantity:null})))},totalAmtWTax(){const t=this.filterFood.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),e=this.filterBeverage.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),a=this.filterAddons.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),s=this.filterInventory.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),n=this.filterCombo.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0);return parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(s)+parseFloat(n)},itemCount(){const t=this.filterFood.reduce(((t,e)=>t+e.quantity),0),e=this.filterBeverage.reduce(((t,e)=>t+e.quantity),0),a=this.filterAddons.reduce(((t,e)=>t+e.quantity),0),s=this.filterInventory.reduce(((t,e)=>t+e.quantity),0),n=this.filterCombo.reduce(((t,e)=>t+e.quantity),0);return t+e+a+n+s}},methods:{cancelDialog(t){this.cancel=!0,this.cancelId=t},handleSelect(){this.$nextTick((()=>{this.$refs.mySelect.$refs.menu.hide()}))},invoiceGenerated(){this.fetchInvoice()},fetchRestaurant(){$().then((t=>{this.resDetail=t.data,this.vatCharge=t.data.vat}))},totalAmtWoTax(){const t=this.filterFood.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wotax)),0),e=this.filterBeverage.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wotax)),0),a=this.filterAddons.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wotax)),0),s=this.filterInventory.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wotax)),0);return parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(s)},async fetchInvoice(){this.orderId=this.$route.query.id,await ct({order:this.orderId,is_merged:!1}).then((t=>{this.invoiceDetail=t.data,this.invoiceDetail.Invoice.membership&&(this.customer.name=this.invoiceDetail.Invoice.membership.customer.name,this.customer.id=this.invoiceDetail.Invoice.membership.customer.id)}))},async paymentBtn(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:100,message:"Processing Payment !",messageColor:"white"}),this.paymentArray=[];var t={};if(this.paymentMode[1])for(var e=0;e<2;e++)7===this.paymentMode[e]?(this.$set(t,"type",this.paymentMode[e]),this.$set(t,"split_pay",this.paymentAmount[e]),this.$set(t,"due_date",this.dueDate)):(this.$set(t,"type",this.paymentMode[e]),this.$set(t,"split_pay",this.paymentAmount[e])),this.paymentArray.push(t),t={};else 7===this.paymentMode[0]?(this.$set(t,"type",this.paymentMode[0]),this.$set(t,"split_pay",this.paymentAmount[0]),this.$set(t,"due_date",this.dueDate)):(this.$set(t,"type",this.paymentMode[0]),this.$set(t,"split_pay",this.paymentAmount[0])),this.paymentArray.push(t);var a={invoice:this.invoiceDetail.Invoice.id,paymentmethod:this.paymentArray,customer:this.customer.id};try{const t=await ot(a,{merge:!1});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Payment Successful"}),this.$q.loading.hide(),this.propSingleId=t.data.payment.id,this.billStatus=!0;const e=sessionStorage.getItem("res_name");Ja.send(JSON.stringify({type:"payment_complete",res_name:e}))}catch(error){this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"info",message:error.response.data.non_field_errors[0]||"Unable to Accept Payment"})}},selectedCustomer(t){this.customer.name=t.name,this.customer.id=t.id,this.customerDialog=!1},async deleteItem(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:100,message:"Cancelling Invoice !",messageColor:"white"});const t={status:1,is_merged:!1};await pt(this.invoiceDetail.Invoice.id,t).then((t=>{this.$q.loading.hide(),this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Invoice Canceled"}),this.closeWindow()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Cancel Invoice"})}))},rateWoTax(t,e){return t.rate_wotax=(e*(100/(100+parseFloat(this.vatCharge)))).toFixed(2),t.rate_wotax},amtWTax(t,e){return t.amount_wtax=t.quantity*e,t.amount_wtax},amtWoTax(t,e){return t.rate_wotax?t.amount_wotax=t.quantity*t.rate_wotax:t.amount_wotax=t.quantity*e,t.amount_wotax},delay(t){return new Promise((e=>setTimeout(e,t)))},async closeWindow(){await this.delay(1e3),window.close()},printInvoice(){const t=document.getElementById("pos").innerHTML;let e="";for(const s of[...document.querySelectorAll('link[rel="stylesheet"], style')])e+=s.outerHTML;const a=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");a.document.write(`<!DOCTYPE html>\n                <html>\n                  <head>\n                    ${e}\n                  </head>\n                  <body>\n                    ${t}\n                  </body>\n                </html>`),a.document.close(),a.focus(),a.print(),a.close()}},watch:{paymentMode(){this.paymentAmount[0]=null,this.paymentAmount[1]=null,7===this.paymentMode[0]&&(this.paymentAmount[0]=this.invoiceDetail.Invoice.net_price-this.paymentAmount[1]),7===this.paymentMode[1]&&(this.paymentAmount[1]=this.invoiceDetail.Invoice.net_price-this.paymentAmount[0])},paymentAmount(){7===this.paymentMode[0]&&(this.paymentAmount[0]=this.invoiceDetail.Invoice.net_price-this.paymentAmount[1]),7===this.paymentMode[1]&&(this.paymentAmount[1]=this.invoiceDetail.Invoice.net_price-this.paymentAmount[0])}}},Oc=Tc,$c=(a("0f09"),Object(p["a"])(Oc,ic,oc,!1,null,"6ee0c39a",null)),Qc=$c.exports;kt()($c,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QInput:Et["a"],QSelect:ae["a"],QBtn:xt["a"],QDialog:Nt["a"]});var Mc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[t.invoiceDetail?a("span",{staticClass:"font-bold text-md q-mb-none q-pa-md"},[t._v("Payment Menu")]):a("span",{staticClass:"font-bold text-md q-mb-none q-pa-md"},[t._v("Invoice Menu")])])])])],1)]),a("q-card",{staticClass:"my-card q-mt-lg"},[a("q-card-section",[0!==Object.keys(t.invoiceDetail).length?a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-1"},[t._v(" ")]),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"q-pa-sm"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",[a("p",{staticClass:"float-right"},[a("q-btn",{staticClass:"bg-confirm",attrs:{label:"Print",dense:"",push:"",size:"0.8rem",padding:"sm sm"},on:{click:function(e){return t.printInvoice()}}})],1)])]),a("div",{staticClass:"col-12"},[a("div",{attrs:{id:"pos"}},[a("div",{staticClass:"header"},[a("div",[a("p",{staticClass:"q-ma-none"},[t._v(t._s(t.resDetail.name))]),a("p",{staticClass:"q-ma-none"},[t._v(t._s(t.resDetail.address))]),t.resDetail.vat_number?a("p",{staticClass:"q-ma-none"},[t._v("PAN No: "+t._s(t.resDetail.vat_number))]):a("p",{staticClass:"q-ma-none"},[t._v("PAN No: -")]),a("p",{staticClass:"q-ma-none"},[t._v("PROVISIONAL BILL")])])]),a("div",{staticClass:"customer-info"},[a("p",{staticClass:"q-ma-none q-mb-xs"},[a("span",[t._v("\n                        Invoice No.: "+t._s(t.invoiceDetail.Invoice.id)+"\n                      ")])]),a("p",{staticClass:"q-mb-xs"},[t._v("\n                      Date : "+t._s(t.invoiceDetail.Invoice.merged_order.date.substring(0,10))+"\n                    ")]),a("p",{staticClass:"q-ma-none q-mb-xs"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.invoiceDetail.Invoice.merged_order.merged_table.table,expression:"invoiceDetail.Invoice.merged_order.merged_table.table"}]},[t._v("\n                        Table:\n                        "),t._l(t.invoiceDetail.Invoice.merged_order.merged_table.table,(function(e,s){return a("span",{key:e.id},[t._v("\n                          "+t._s(e.number)+"\n                          "),s!==t.invoiceDetail.Invoice.merged_order.merged_table.table.length-1?a("span",[t._v(",")]):t._e()])}))],2)])]),a("div",{staticClass:"items"},[a("table",[a("tr",[a("th",{staticClass:"text-left"},[t._v("PARTICULARS")]),a("th",[t._v("QTY")]),a("th",[t._v("RATE")]),a("th",[t._v("AMOUNT")])]),t._l(t.filterFood,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[t._v(t._s(e.food.detail.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),(e.food.is_taxable,a("td",{staticClass:"text-center"},[t._v("\n                          "+t._s(e.food.detail.price)+"\n                        ")])),a("td",{staticClass:"text-center"},[t._v("\n                          "+t._s(t.amtWTax(e,e.food.detail.price).toFixed(2))+"\n                        ")])])})),t._l(t.filterBeverage,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[t._v(t._s(e.beverage.detail.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),(e.beverage.is_taxable,a("td",{staticClass:"text-center"},[t._v("\n                          "+t._s(e.beverage.detail.price)+"\n                        ")])),a("td",{staticClass:"text-center"},[t._v("\n                          "+t._s(t.amtWTax(e,e.beverage.detail.price).toFixed(2))+"\n                        ")])])})),t._l(t.filterInventory,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[t._v(t._s(e.inventory_item.item.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v("\n                          "+t._s(e.inventory_item.sales_price)+"\n                        ")]),a("td",{staticClass:"text-center"},[t._v("\n                          "+t._s(t.amtWTax(e,e.inventory_item.sales_price).toFixed(2))+"\n                        ")])])})),t._l(t.filterAddons,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[t._v(t._s(e.addons.detail.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),(e.addons.is_taxable,a("td",{staticClass:"text-center"},[t._v("\n                          "+t._s(e.addons.detail.price)+"\n                        ")])),a("td",{staticClass:"text-center"},[t._v("\n                          "+t._s(t.amtWTax(e,e.addons.detail.price).toFixed(2))+"\n                        ")])])})),t._l(t.filterCombo,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[t._v("\n                          "+t._s(e.combo_offer.name)+"\n                        ")]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v("\n                          "+t._s(e.combo_offer.price)+"\n                        ")]),a("td",{staticClass:"text-center"},[t._v("\n                          "+t._s(t.amtWTax(e,e.combo_offer.price).toFixed(2))+"\n                        ")])])})),a("tr",{staticStyle:{"border-bottom":".5px dashed black","border-top":".5px dashed black"}},[a("td"),a("td"),a("td",{staticClass:"center-text"},[t._v("Total")]),a("td",{staticClass:"center-text"},[t._v("\n                          "+t._s(t.totalAmtWTax.toFixed(2))+"\n                        ")])])],2)]),a("div",{staticClass:"q-mt-xs"},[a("p",{staticClass:"q-ma-none"},[a("span",[t._v("Total Qty: "+t._s(t.itemCount))]),a("span",{staticClass:"float-right"},[t._v("Discount Amount :\n                        "+t._s(t.invoiceDetail.Invoice.discount_amount))])])]),a("div",{staticClass:"totals q-mt-xs"},[a("p",{staticClass:"q-ma-none q-pb-xs"},[t._v("Grand Total : Rs. "+t._s(t.invoiceDetail.Invoice.net_price))])]),a("div",{staticClass:"q-mt-xs words"},[a("p",{staticClass:"q-ma-none q-pb-xs"},[a("span",[t._v("In Words: "+t._s(t.amountWords))])])]),a("div",{staticClass:"change q-mt-xs"},[a("p",{staticClass:"q-ma-none q-pb-xs"},[a("span",[t._v("Cashier: "+t._s(t.$store.state.user.user.user.toUpperCase()))])])]),a("div",{staticStyle:{"text-align":"center"}},[a("p",{staticClass:"q-ma-none q-mt-xs"},[t._v("Thank You, Enjoy Your Meal :)")])])])])])]),a("q-btn",{staticClass:"q-mt-sm bg-delete",attrs:{label:"Cancel Invoice",push:"",size:".8rem"},on:{click:function(e){return t.cancelInvoice()}}})],1),a("div",{staticClass:"col-4"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12"},[t.invoiceDetail.Invoice.membership?a("q-input",{attrs:{disable:"",dense:"",filled:"","bg-color":"orange-1",label:"Select Customer"},model:{value:t.customer.name,callback:function(e){t.$set(t.customer,"name",e)},expression:"customer.name"}}):a("q-input",{attrs:{readonly:"",dense:"",filled:"","bg-color":"orange-1",label:"Select Customer"},on:{click:function(e){t.customerDialog=!0}},model:{value:t.customer.name,callback:function(e){t.$set(t.customer,"name",e)},expression:"customer.name"}})],1),a("div",{staticClass:"col-12"},[a("q-select",{attrs:{dense:"",filled:"",options:t.paymentModeOptions,label:"Select Payment Mode","max-values":"2",multiple:"","stack-label":"","use-chips":"","map-options":"","emit-value":""},model:{value:t.paymentMode,callback:function(e){t.paymentMode=e},expression:"paymentMode"}})],1),a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[t.paymentMode.length>0?a("div",{staticClass:"col-6"},[a("p",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[1],expression:"paymentMode[1] === 7"}],staticClass:"text-h7"},[t._v("Payment Details")]),a("q-input",{directives:[{name:"show",rawName:"v-show",value:1===t.paymentMode[0],expression:"paymentMode[0] === 1"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cash Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:2===t.paymentMode[0],expression:"paymentMode[0] === 2"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cheque Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:3===t.paymentMode[0],expression:"paymentMode[0] === 3"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"E-sewa Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:4===t.paymentMode[0],expression:"paymentMode[0] === 4"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"FonePay Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:5===t.paymentMode[0],expression:"paymentMode[0] === 5"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Khalti Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:6===t.paymentMode[0],expression:"paymentMode[0] === 6"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Card Amount"},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("p",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[0],expression:"paymentMode[0] === 7"}],staticClass:"text-h7"},[t._v("Credit Details")]),a("q-input",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[0],expression:"paymentMode[0] === 7"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Credit Amount",disable:""},model:{value:t.paymentAmount[0],callback:function(e){t.$set(t.paymentAmount,0,e)},expression:"paymentAmount[0]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[0],expression:"paymentMode[0] === 7"}],staticClass:"q-mt-sm",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Due Date",type:"date"},model:{value:t.dueDate,callback:function(e){t.dueDate=e},expression:"dueDate"}})],1):t._e(),2===t.paymentMode.length?a("div",{staticClass:"col-6"},[a("p",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[0],expression:"paymentMode[0] === 7"}],staticClass:"text-h7"},[t._v("Payment Details")]),1===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cash Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),2===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Cheque Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),3===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"E-sewa Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),4===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"FonePay Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),5===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Khalti Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),6===t.paymentMode[1]?a("q-input",{attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Card Amount"},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}):t._e(),a("p",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[1],expression:"paymentMode[1] === 7"}],staticClass:"text-h7"},[t._v("Credit Details")]),a("q-input",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[1],expression:"paymentMode[1] === 7"}],attrs:{"bg-color":"orange-1",dense:"",filled:"",label:"Credit Amount",disable:""},model:{value:t.paymentAmount[1],callback:function(e){t.$set(t.paymentAmount,1,e)},expression:"paymentAmount[1]"}}),a("q-input",{directives:[{name:"show",rawName:"v-show",value:7===t.paymentMode[1],expression:"paymentMode[1] === 7"}],staticClass:"q-mt-sm",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Due Date",type:"date"},model:{value:t.dueDate,callback:function(e){t.dueDate=e},expression:"dueDate"}})],1):t._e()]),a("div",{staticClass:"col-12 q-mt-xl flex flex-center"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.paymentMode.length>=1,expression:"paymentMode.length >= 1"}],staticClass:"bg-payment",attrs:{size:"0.8rem",push:"",label:"Confirm Payment"},on:{click:function(e){return t.paymentBtn()}}})],1)])])],1)]):a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12"},[a("MergeInvoiceGeneration",{on:{invoiceGenerated:t.invoiceGenerated}})],1)])])],1),a("q-dialog",{model:{value:t.customerDialog,callback:function(e){t.customerDialog=e},expression:"customerDialog"}},[a("CustomerList",{staticClass:"q-pa-md",attrs:{select:!0},on:{selectedCustomer:t.selectedCustomer}})],1),a("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down","full-width":"","full-height":"",persistent:""},model:{value:t.showMergeInvoice,callback:function(e){t.showMergeInvoice=e},expression:"showMergeInvoice"}},[a("FinalBill",{attrs:{propSingleId:t.propMergeId}})],1)],1)},Ec=[],Rc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n    Tables :\n    "),t._l(t.propMergeOrder.merged_table.table,(function(e){return a("span",{key:e.id,staticClass:"text-h7"},[t._v("\n        | "+t._s(e.number)+" |\n    ")])})),a("q-markup-table",{staticClass:"q-mt-md",attrs:{flat:"",bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("Complementary")]),a("th",{staticClass:"text-center"},[t._v("Comp. Qty.")]),a("th",{staticClass:"text-cenetr"},[t._v("Taxable ?")]),a("th",{staticClass:"text-center"},[t._v("Items")]),a("th",{staticClass:"text-center"},[t._v("Qty.")]),a("th",{staticClass:"text-center"},[t._v("Price")]),a("th",{staticClass:"text-center"},[t._v("Discount")]),a("th",{staticClass:"text-center"},[t._v("Amt")]),a("th",{staticClass:"text-center"},[t._v("Type")]),a("th",{staticClass:"text-center"},[t._v("Total")])])]),a("tbody",[t._l(t.filterFood,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-3"},model:{value:e.comp,callback:function(a){t.$set(e,"comp",a)},expression:"food.comp"}})],1),e.comp?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.complementary.complementary_quantity,callback:function(a){t.$set(e.complementary,"complementary_quantity",a)},expression:"food.complementary.complementary_quantity"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{disable:"",type:"number",filled:"",dense:"","bg-color":"amber-2",min:"0"},on:{input:t.onInput,keydown:t.keyHandler}})],1),!0===e.food.is_taxable?a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"green-4"}},[t._v(t._s(e.food.is_taxable))])],1):a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"red-4"}},[t._v(t._s(e.food.is_taxable))])],1),a("td",{staticClass:"text-center"},[t._v(t._s(e.food.detail.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.food.detail.price))]),a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-3"},model:{value:e.discount_status,callback:function(a){t.$set(e,"discount_status",a)},expression:"food.discount_status"}})],1),e.discount_status?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.discount.value,callback:function(a){t.$set(e.discount,"value",a)},expression:"food.discount.value"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),e.discount.value&&e.discount_status?a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"orange-3",options:t.discountOptions,"emit-value":"","map-options":""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"food.discount.discount_in"}})],1):a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),a("td",{staticClass:"text-left"},[t._v("Rs. "+t._s(t.calculate(e)))])])})),t._l(t.filterBeverage,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-3"},model:{value:e.comp,callback:function(a){t.$set(e,"comp",a)},expression:"beverage.comp"}})],1),e.comp?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.complementary.complementary_quantity,callback:function(a){t.$set(e.complementary,"complementary_quantity",a)},expression:"beverage.complementary.complementary_quantity"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{disable:"",type:"number",filled:"",dense:"","bg-color":"amber-2",min:"0"},on:{input:t.onInput,keydown:t.keyHandler}})],1),!0===e.beverage.is_taxable?a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"green-4"}},[t._v(t._s(e.beverage.is_taxable))])],1):a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"red-4"}},[t._v(t._s(e.beverage.is_taxable))])],1),a("td",{staticClass:"text-center"},[t._v(t._s(e.beverage.detail.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.beverage.detail.price)+"\n                ")]),a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-3"},model:{value:e.discount_status,callback:function(a){t.$set(e,"discount_status",a)},expression:"beverage.discount_status"}})],1),e.discount_status?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.discount.value,callback:function(a){t.$set(e.discount,"value",a)},expression:"beverage.discount.value"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),e.discount.value&&e.discount_status?a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"orange-3",options:t.discountOptions,"emit-value":"","map-options":""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"beverage.discount.discount_in"}})],1):a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),a("td",{staticClass:"text-left"},[t._v("Rs. "+t._s(t.calculate(e)))])])})),t._l(t.filterInventory,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-3"},model:{value:e.comp,callback:function(a){t.$set(e,"comp",a)},expression:"inv.comp"}})],1),e.comp?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.complementary.complementary_quantity,callback:function(a){t.$set(e.complementary,"complementary_quantity",a)},expression:"inv.complementary.complementary_quantity"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{disable:"",type:"number",filled:"",dense:"","bg-color":"amber-2",min:"0"},on:{input:t.onInput,keydown:t.keyHandler}})],1),!0===e.inventory_item.is_taxable?a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"green-4"}},[t._v(t._s(e.inventory_item.is_taxable))])],1):a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"red-4"}},[t._v(t._s(e.inventory_item.is_taxable))])],1),a("td",{staticClass:"text-center"},[t._v(t._s(e.inventory_item.item.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.inventory_item.sales_price)+"\n                ")]),a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-3"},model:{value:e.discount_status,callback:function(a){t.$set(e,"discount_status",a)},expression:"inv.discount_status"}})],1),e.discount_status?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.discount.value,callback:function(a){t.$set(e.discount,"value",a)},expression:"inv.discount.value"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),e.discount.value&&e.discount_status?a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"orange-3",options:t.discountOptions,"emit-value":"","map-options":""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"inv.discount.discount_in"}})],1):a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),a("td",{staticClass:"text-left"},[t._v("Rs. "+t._s(t.calculate(e)))])])})),t._l(t.filterAddons,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-3"},model:{value:e.comp,callback:function(a){t.$set(e,"comp",a)},expression:"addon.comp"}})],1),e.comp?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.complementary.complementary_quantity,callback:function(a){t.$set(e.complementary,"complementary_quantity",a)},expression:"addon.complementary.complementary_quantity"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{disable:"",type:"number",filled:"",dense:"","bg-color":"amber-2",min:"0"},on:{input:t.onInput,keydown:t.keyHandler}})],1),!0===e.addons.is_taxable?a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"green-4"}},[t._v(t._s(e.addons.is_taxable))])],1):a("td",{staticClass:"text-center"},[a("q-badge",{attrs:{outline:"",color:"red-4"}},[t._v(t._s(e.addons.is_taxable))])],1),a("td",{staticClass:"text-center"},[t._v(t._s(e.addons.detail.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.addons.detail.price))]),a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-3"},model:{value:e.discount_status,callback:function(a){t.$set(e,"discount_status",a)},expression:"addon.discount_status"}})],1),e.discount_status?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-3",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:e.discount.value,callback:function(a){t.$set(e.discount,"value",a)},expression:"addon.discount.value"}})],1):a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),e.discount.value&&e.discount_status?a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"orange-3",options:t.discountOptions,"emit-value":"","map-options":""},model:{value:e.discount.discount_in,callback:function(a){t.$set(e.discount,"discount_in",a)},expression:"addon.discount.discount_in"}})],1):a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"amber-2",disable:""}})],1),a("td",{staticClass:"text-left"},[t._v("Rs. "+t._s(t.calculate(e)))])])})),t._l(t.mergedCombo,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5",disable:""}})],1),a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{disable:"",type:"number",filled:"",dense:"","bg-color":"amber-2",min:"0"},on:{input:t.onInput,keydown:t.keyHandler}})],1),a("td",{staticClass:"text-center"},[t._v("-")]),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.combo_offer.name)+"\n                ")]),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[t._v("\n                    "+t._s(e.combo_offer.price)+"\n                ")]),a("td",{staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-5",disable:""},model:{value:e.discount,callback:function(a){t.$set(e,"discount",a)},expression:"combo.discount"}})],1),a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"80px"},attrs:{type:"number",filled:"",dense:"","bg-color":"amber-2",disable:""},model:{value:e.discount_value,callback:function(a){t.$set(e,"discount_value",a)},expression:"combo.discount_value"}})],1),a("td",{attrs:{align:"center"}},[a("q-select",{staticStyle:{width:"80px"},attrs:{filled:"",dense:"","bg-color":"amber-2",disable:""},model:{value:e.discount_type,callback:function(a){t.$set(e,"discount_type",a)},expression:"combo.discount_type"}})],1),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.calculate(e)))])])}))],2)]),a("div",{staticClass:"bg-white q-pa-sm q-mt-md"},[a("div",{staticClass:"q-mt-sm"},[a("p",[a("span",[t._v("Membership")]),a("span",{staticClass:"q-ml-xl"},[a("q-input",{staticStyle:{display:"inline-block"},attrs:{filled:"",dense:"","bg-color":"amber-2",label:"Select Member",readonly:""},on:{click:function(e){t.memberDialog=!0}},model:{value:t.member.name,callback:function(e){t.$set(t.member,"name",e)},expression:"member.name"}})],1)])]),a("div",[a("p",[a("span",[t._v("Discount Amount")]),a("span",{staticClass:"q-ml-xl"},[t._v("Rs. "+t._s(t.calcDiscount.toFixed(2)))]),a("span",{staticClass:"q-ml-xl"},[a("q-input",{staticStyle:{display:"inline-block"},attrs:{filled:"",dense:"","bg-color":"amber-2",label:"Discount Amount"},model:{value:t.discountAmount,callback:function(e){t.discountAmount=e},expression:"discountAmount"}})],1),a("span",{staticClass:"q-ml-xl"},[a("q-input",{staticStyle:{display:"inline-block"},attrs:{filled:"",dense:"","bg-color":"amber-2",label:"Discount Percentage"},model:{value:t.discountPercentage,callback:function(e){t.discountPercentage=e},expression:"discountPercentage"}})],1)])]),a("div",[a("span",[t._v("VAT amount ("+t._s(t.vatCharge)+"%)")]),a("span",{staticClass:"q-ml-xl"},[t._v(t._s(t.calcVat.toFixed(2)))])]),a("div",{staticClass:"q-mt-lg"},[a("span",[t._v("Net Total")]),a("span",{staticClass:"q-ml-xl text-deep-orange"},[t._v("Rs. "+t._s(t.netTotal.toFixed(2)))])]),a("q-btn",{staticClass:"q-mt-md bg-confirm",attrs:{label:"Generate Invoice",padding:"xs sm",push:"",dense:"",size:""},on:{click:function(e){return t.generateInvoice()}}})],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.memberDialog,callback:function(e){t.memberDialog=e},expression:"memberDialog"}},[a("MembersList",{attrs:{select:!0},on:{selectedMember:t.selectedMember}})],1)],2)},Bc=[],Pc={components:{MembersList:Ic},created(){this.fetchSingleMergedOrder(),this.fetchRestaurant()},data:()=>({discountOptions:[{label:"Amt",value:1},{label:"%",value:2}],member:{name:"",id:null,discount:null},sendFood:[],sendBeverage:[],sendAddons:[],sendInventory:[],mergedFoods:[],mergedBeverages:[],mergedAddons:[],mergedCombo:[],mergedInventory:[],orders:[],sendCombo:[],propMergeOrder:[],vatCharge:null,discountAmount:null,discountPercentage:null,memberDialog:!1}),computed:{calcVat(){const t=this.mergedFoods.reduce(((t,e)=>t+parseFloat(e.total_vat)),0),e=this.mergedBeverages.reduce(((t,e)=>t+parseFloat(e.total_vat)),0),a=this.mergedAddons.reduce(((t,e)=>t+parseFloat(e.total_vat)),0),s=this.mergedInventory.reduce(((t,e)=>t+parseFloat(e.total_vat)),0);return parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(s)},calcDiscount(){const t=this.mergedFoods.reduce(((t,e)=>t+parseFloat(e.total_discount)),0),e=this.mergedBeverages.reduce(((t,e)=>t+parseFloat(e.total_discount)),0),a=this.mergedAddons.reduce(((t,e)=>t+parseFloat(e.total_discount)),0),s=this.mergedInventory.reduce(((t,e)=>t+parseFloat(e.total_discount)),0);return parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(s)},netTotal(){const t=this.filterFood.reduce(((t,e)=>t+parseFloat(e.net_total)),0),e=this.filterBeverage.reduce(((t,e)=>t+parseFloat(e.net_total)),0),a=this.filterAddons.reduce(((t,e)=>t+parseFloat(e.net_total)),0),s=this.filterInventory.reduce(((t,e)=>t+parseFloat(e.net_total)),0);return this.total=parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(s)},grossTotal(){const t=this.mergedFoods.reduce(((t,e)=>t+parseFloat(e.gross_total)),0),e=this.mergedBeverages.reduce(((t,e)=>t+parseFloat(e.gross_total)),0),a=this.mergedAddons.reduce(((t,e)=>t+parseFloat(e.gross_total)),0),s=this.mergedCombo.reduce(((t,e)=>t+parseFloat(e.gross_total)),0),n=this.mergedInventory.reduce(((t,e)=>t+parseFloat(e.gross_total)),0);return parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(s)+parseFloat(n)},filterFood(){return this.mergedFoods.filter((t=>!("Canceled"===t.status)))},filterBeverage(){return this.mergedBeverages.filter((t=>!("Canceled"===t.status)))},filterAddons(){return this.mergedAddons.filter((t=>!("Canceled"===t.status)))},filterInventory(){return this.mergedInventory.filter((t=>!("Canceled"===t.status)))}},methods:{async fetchRestaurant(){const t=await $();this.vatCharge=t.data.vat},selectedMember(t){1===t.discount.discount_type?this.member.discount=100*t.discount.discount_amount/this.grossTotal:this.member.discount=t.discount.discount_amount,this.member.name=t.customer,this.member.id=t.id,this.memberDialog=!1},async fetchSingleMergedOrder(){this.mergeOrderId=this.$route.query.id;const t=await mt(this.mergeOrderId);this.propMergeOrder=t.data,this.orders=this.propMergeOrder,this.orders.orderfood.forEach((t=>{this.mergedFoods.push(t)})),this.orders.orderbeverage.forEach((t=>{this.mergedBeverages.push(t)})),this.orders.orderaddons.forEach((t=>{this.mergedAddons.push(t)})),this.orders.merge_order_combo_offer.forEach((t=>{this.mergedCombo.push(t)})),this.orders.merge_order_inventory_item.forEach((t=>{this.mergedInventory.push(t)})),this.mergedFoods=this.mergedFoods.map((t=>k()(k()({},t),{},{discount_status:!1,total_discount:0,net_total:null,gross_total:null,total_vat:0,comp:!1}))),this.mergedBeverages=this.mergedBeverages.map((t=>k()(k()({},t),{},{discount_status:!1,total_discount:0,gross_total:null,net_total:null,total_vat:0,comp:!1}))),this.mergedAddons=this.mergedAddons.map((t=>k()(k()({},t),{},{discount_status:!1,total_discount:0,net_total:null,gross_total:null,total_vat:0,comp:!1}))),this.mergedInventory=this.mergedInventory.map((t=>k()(k()({},t),{},{discount_status:!1,total_discount:0,net_total:null,gross_total:null,total_vat:0,comp:!1}))),this.mergedCombo=this.mergedCombo.map((t=>k()(k()({},t),{},{discount:!1,net_total:null,discount_type:"",discount_value:null,gross_total:null})))},onInput(t){this.model=t,t&&t<0&&(this.model=0)},keyHandler(t){this.model<1&&"ArrowDown"===t.key&&t.preventDefault(),"-"===t.key&&t.preventDefault()},calculate(t){if("food"in t)var e=t.food;else if("beverage"in t)e=t.beverage;else if("addons"in t)e=t.addons;else if("inventory_item"in t)e=t.inventory_item;else if("combo_offer"in t){if(!t.discount)return t.net_total=t.subtotal,t.gross_total=t.subtotal*(100/(100+parseFloat(this.vatCharge))),t.net_total;if(t.discount){var a=t.subtotal*(t.discount_value/100);return t.net_total=t.subtotal-a,t.gross_total=t.subtotal*(100/(100+parseFloat(this.vatCharge))),t.net_total}}var s=t.subtotal;t.comp&&(t.complementary.complementary_quantity===t.quantity?(t.net_total=0,t.total_vat=0):s=(parseFloat(t.quantity)-parseFloat(t.complementary.complementary_quantity))*parseFloat(e.detail.price));const{subtotal:n,grossAmtFrItem:i,taxAmt:o,taxableAmt:r,discountAmt:l}=this.calculateTotals(s,t,e);return t.total_vat=o,t.total_discount=l,t.net_total=n,t.gross_total=i,t.net_total},calculateTotals(t,e,a){var s=0,n=0,i=0,o=0;if(!a.is_taxable&&!e.discount_status)return s=t,this.member.name&&(o=t*(this.member.discount/100),t-=t*(this.member.discount/100)),{subtotal:t,grossAmtFrItem:s,taxAmt:i,taxableAmt:n,discountAmt:o};if(a.is_taxable&&!e.discount_status){var r=t*(100/(100+parseFloat(this.vatCharge)));return n=r,s=r,this.member.name&&(o=parseFloat(o)+parseFloat(t*(this.member.discount/100)),t-=t*(this.member.discount/100)),i=t-r,{subtotal:t,grossAmtFrItem:s,taxAmt:i,taxableAmt:n,discountAmt:o}}return!a.is_taxable&&e.discount_status?(s=t,1===e.discount.discount_in?(o=e.discount.value,t-=e.discount.value):(o=e.discount.value*t/100,t-=o),this.member.name&&(o=parseFloat(o)+parseFloat(t*(this.member.discount/100)),t-=t*(this.member.discount/100)),{subtotal:t,grossAmtFrItem:s,taxAmt:i,taxableAmt:n,discountAmt:o}):a.is_taxable&&e.discount_status?(t*=100/(100+parseFloat(this.vatCharge)),s=t,1==e.discount.discount_in?(o=e.discount.value,t-=e.discount.value):(o=e.discount.value*t/100,t-=o),this.member.name&&(o=parseFloat(o)+parseFloat(t*(this.member.discount/100)),t-=t*(this.member.discount/100)),n=t,i=t*parseFloat(this.vatCharge)/100,t+=i,{subtotal:t,grossAmtFrItem:s,taxAmt:i,taxableAmt:n,discountAmt:o}):void 0},async generateInvoice(){if(this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:100,message:"Generating Invoice !",messageColor:"white"}),this.mergedFoods.forEach((t=>{!t.discount_status&&t.discount&&(t.discount.value=null,t.discount.discount_in=null),t.discount.value||t.discount.discount_in||(t.discount=null,t.discount_status=!1),t.comp||(t.complementary.complementary_quantity=null),t.complementary.complementary_quantity||(t.comp=!1)})),this.mergedBeverages.forEach((t=>{!t.discount_status&&t.discount&&(t.discount.value=null,t.discount.discount_in=null),t.discount.value||t.discount.discount_in||(t.discount=null,t.discount_status=!1),t.comp||(t.complementary.complementary_quantity=null),t.complementary.complementary_quantity||(t.comp=!1)})),this.mergedAddons.forEach((t=>{!t.discount_status&&t.discount&&(t.discount.value=null,t.discount.discount_in=null),t.discount.value||t.discount.discount_in||(t.discount=null,t.discount_status=!1),t.comp||(t.complementary.complementary_quantity=null),t.complementary.complementary_quantity||(t.comp=!1)})),this.mergedInventory.forEach((t=>{!t.discount_status&&t.discount&&(t.discount.value=null,t.discount.discount_in=null),t.discount.value||t.discount.discount_in||(t.discount=null,t.discount_status=!1),t.comp||(t.complementary.complementary_quantity=null),t.complementary.complementary_quantity||(t.comp=!1)})),this.mergedFoods.map((t=>{this.sendFood.push({id:t.id,food:t.food.id,quantity:t.quantity,discount:t.discount,complementary:t.complementary})})),this.mergedBeverages.map((t=>{this.sendBeverage.push({id:t.id,beverage:t.beverage.id,quantity:t.quantity,discount:t.discount,complementary:t.complementary})})),this.mergedAddons.map((t=>{this.sendAddons.push({id:t.id,addons:t.addons.id,quantity:t.quantity,discount:t.discount,complementary:t.complementary})})),this.mergedInventory.map((t=>{this.sendInventory.push({id:t.id,inventory_item:t.inventory_item.id,quantity:t.quantity,discount:t.discount,complementary:t.complementary})})),this.mergedCombo.map((t=>{this.sendCombo.push({combo_offer:t.combo_offer.id,quantity:t.quantity})})),this.discountPercentage)var t={order:{order_id:this.propMergeOrder.id,orderfood:this.sendFood,orderbeverage:this.sendBeverage,orderaddons:this.sendAddons,ordercombooffer:this.sendCombo},is_merged:!0,net_price:this.total.toFixed(2),vat:this.vatCharge,delivery_charge:null,membership:this.member.id,discount:{discount_in:2,value:this.discountPercentage}};else t={order:{order_id:this.propMergeOrder.id,orderfood:this.sendFood,orderbeverage:this.sendBeverage,orderaddons:this.sendAddons,ordercombooffer:this.sendCombo,orderinventoryitem:this.sendInventory},is_merged:!0,net_price:this.total.toFixed(2),vat:this.vatCharge,delivery_charge:null,membership:this.member.id,discount:null};try{const e=await it(t);this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Invoice Generated"}),this.$q.loading.hide();const a=sessionStorage.getItem("res_name");Socket.send(JSON.stringify({type:"invoice_generated",res_name:a})),"ALL Complementary!"===e.data[0]?window.close():this.$emit("invoiceGenerated")}catch(e){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to generate Invoice"}),this.$q.loading.hide()}}},watch:{discountAmount(){this.discountPercentage=100*this.discountAmount/this.grossTotal},discountPercentage(){const{orderfood:t,orderbeverage:e,orderaddons:a}=this.orders;this.mergedFoods.forEach((t=>{t.complementary.complementary_quantity!==t.quantity&&(t.discount_status=!0,t.discount.discount_in=2,t.discount.value=this.discountPercentage)})),this.mergedBeverages.forEach((t=>{t.complementary.complementary_quantity!==t.quantity&&(t.discount_status=!0,t.discount.discount_in=2,t.discount.value=this.discountPercentage)})),this.mergedAddons.forEach((t=>{t.complementary.complementary_quantity!==t.quantity&&(t.discount_status=!0,t.discount.discount_in=2,t.discount.value=this.discountPercentage)})),this.mergedCombo.forEach((t=>{t.discount=!0,t.discount_value=this.discountPercentage,t.discount_type="%"}))}}},Nc=Pc,jc=Object(p["a"])(Nc,Rc,Bc,!1,null,null,null),Lc=jc.exports;kt()(jc,"components",{QMarkupTable:Te["a"],QCheckbox:ie["a"],QInput:Et["a"],QBadge:ke["a"],QSelect:ae["a"],QBtn:xt["a"],QDialog:Nt["a"]});var zc={components:{MergeInvoiceGeneration:Lc,CustomerList:fs,FinalBill:St},data(){return{resDetail:{},paymentModeOptions:[{label:"Cash",value:1},{label:"Cheque",value:2},{label:"E-sewa",value:3},{label:"Fonepay",value:4},{label:"Khalti",value:5},{label:"Card",value:6},{label:"Credit",value:7}],dueDate:null,paymentMode:[],invoiceDetail:{},paymentAmount:[],paymentArray:[],customer:{name:"",id:null},mergeOrderId:null,total:null,vatCharge:null,customerDialog:!1,showMergeInvoice:!1,propMergeId:""}},created(){this.fetchRestaurant(),this.fetchInvoice()},computed:{amountWords(){if(this.invoiceDetail){const t=new S["ToWords"]({localeCode:"en-IN",converterOptions:{currency:!0,ignoreDecimal:!1,ignoreZeroCurrency:!1,doNotAddOnly:!1,currencyOptions:{name:"Rupee",plural:"Rupees",symbol:"₹",fractionalUnit:{name:"Paisa",plural:"Paisa",symbol:""}}}}),e=t.convert(this.invoiceDetail.Invoice.net_price);return e}return""},itemCount(){const t=this.filterFood.reduce(((t,e)=>t+e.quantity),0),e=this.filterBeverage.reduce(((t,e)=>t+e.quantity),0),a=this.filterAddons.reduce(((t,e)=>t+e.quantity),0),s=this.filterCombo.reduce(((t,e)=>t+e.quantity),0),n=this.filterInventory.reduce(((t,e)=>t+e.quantity),0);return t+e+a+s+n},filterFood(){const t=this.invoiceDetail.Invoice.merged_order.orderfood.filter((t=>!(0===t.quantity)));return t.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null,comp:!1})))},filterBeverage(){const t=this.invoiceDetail.Invoice.merged_order.orderbeverage.filter((t=>!(0===t.quantity)));return t.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null,comp:!1})))},filterAddons(){const t=this.invoiceDetail.Invoice.merged_order.orderaddons.filter((t=>!(0===t.quantity)));return t.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null,comp:!1})))},filterCombo(){const{merge_order_combo_offer:t}=this.invoiceDetail.Invoice.merged_order,e=t.filter((t=>!(0===t.quantity)));return e.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null,comp_quantity:null})))},filterInventory(){const{merge_order_inventory_item:t}=this.invoiceDetail.Invoice.merged_order,e=t.filter((t=>!(0===t.quantity)));return e.map((t=>k()(k()({},t),{},{rate_wotax:null,amount_wtax:null,amount_wotax:null,comp:!1})))},totalAmtWTax(){const t=this.filterFood.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),e=this.filterBeverage.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),a=this.filterAddons.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),s=this.filterCombo.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0),n=this.filterInventory.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wtax)),0);return parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(s)+parseFloat(n)}},methods:{printInvoice(){const t=document.getElementById("pos").innerHTML;let e="";for(const s of[...document.querySelectorAll('link[rel="stylesheet"], style')])e+=s.outerHTML;const a=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");a.document.write(`<!DOCTYPE html>\n                <html>\n                  <head>\n                    ${e}\n                  </head>\n                  <body>\n                    ${t}\n                  </body>\n                </html>`),a.document.close(),a.focus(),a.print(),a.close()},selectedCustomer(t){this.customer.name=t.name,this.customer.id=t.id,this.customerDialog=!1},async cancelInvoice(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:100,message:"Cancelling Invoice !",messageColor:"white"});const t={status:1,is_merged:!0};await pt(this.invoiceDetail.Invoice.id,t).then((t=>{this.$q.loading.hide(),this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Invoice Canceled"}),this.closeWindow()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Cancel Invoice"})}))},totalAmtWoTax(){const t=this.filterFood.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wotax)),0),e=this.filterBeverage.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wotax)),0),a=this.filterAddons.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wotax)),0),s=this.filterInventory.reduce(((t,e)=>parseFloat(t)+parseFloat(e.amount_wotax)));return parseFloat(t)+parseFloat(e)+parseFloat(a)+parseFloat(s)},rateWoTax(t,e){return t.rate_wotax=(e*(100/(100+parseFloat(this.vatCharge)))).toFixed(2),t.rate_wotax},amtWTax(t,e){return t.amount_wtax=t.quantity*e,t.amount_wtax},amtWoTax(t,e){return t.rate_wotax?t.amount_wotax=t.quantity*t.rate_wotax:t.amount_wotax=t.quantity*e,t.amount_wotax},async fetchInvoice(){this.mergeOrderId=this.$route.query.id;const t=await ct({order:this.mergeOrderId,is_merged:!0});this.invoiceDetail=t.data,this.invoiceDetail.Invoice.membership&&(this.customer.name=this.invoiceDetail.Invoice.membership.customer.name,this.customer.id=this.invoiceDetail.Invoice.membership.customer.id)},invoiceGenerated(){this.fetchInvoice()},async paymentBtn(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:100,message:"Processing Payment !",messageColor:"white"});var t={};if(this.paymentMode[1])for(var e=0;e<2;e++)7===this.paymentMode[e]?(this.$set(t,"type",this.paymentMode[e]),this.$set(t,"split_pay",this.paymentAmount[e]),this.$set(t,"due_date",this.dueDate)):(this.$set(t,"type",this.paymentMode[e]),this.$set(t,"split_pay",this.paymentAmount[e])),this.paymentArray.push(t),t={};else 7===this.paymentMode[0]?(this.$set(t,"type",this.paymentMode[0]),this.$set(t,"split_pay",this.paymentAmount[0]),this.$set(t,"due_date",this.dueDate)):(this.$set(t,"type",this.paymentMode[0]),this.$set(t,"split_pay",this.paymentAmount[0])),this.paymentArray.push(t);const a={merged_invoice:this.invoiceDetail.Invoice.id,paymentmethod:this.paymentArray,customer:this.customer.id};try{const t=await ot(a,{merge:!0});this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Payment Successful"}),this.$q.loading.hide(),this.paymentMode=[],this.paymentAmount=[],this.paymentArray=[],this.propMergeId=t.data.payment.id,this.showMergeInvoice=!0}catch(error){this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"info",message:error.response.data.non_field_errors}),this.paymentMode=[],this.paymentAmount=[],this.paymentArray=[]}},delay(t){return new Promise((e=>setTimeout(e,t)))},async closeWindow(){await this.delay(1e3),window.close()},fetchRestaurant(){$().then((t=>{this.resDetail=t.data,this.vatCharge=t.data.vat}))}},watch:{paymentMode(){this.paymentAmount[0]=null,this.paymentAmount[1]=null,7===this.paymentMode[0]&&(this.paymentAmount[0]=this.invoiceDetail.Invoice.net_price-this.paymentAmount[1]),7===this.paymentMode[1]&&(this.paymentAmount[1]=this.invoiceDetail.Invoice.net_price-this.paymentAmount[0])},paymentAmount(){7===this.paymentMode[0]&&(this.paymentAmount[0]=this.invoiceDetail.Invoice.net_price-this.paymentAmount[1]),7===this.paymentMode[1]&&(this.paymentAmount[1]=this.invoiceDetail.Invoice.net_price-this.paymentAmount[0])}}},Uc=zc,Vc=(a("1251"),Object(p["a"])(Uc,Mc,Ec,!1,null,"4f0f751c",null)),Wc=Vc.exports;kt()(Vc,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QBtn:xt["a"],QInput:Et["a"],QSelect:ae["a"],QDialog:Nt["a"]});var Yc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 q-pl-sm"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",{staticClass:"q-pa-none q-mb-sm"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12 q-mb-lg"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Food Sales Report")])]),a("div",{staticClass:"col-12"},[a("DateBar",{attrs:{checkFiscalYearBoolean:t.checkFiscalYearBoolean},on:{thisFiscalYear:t.thisFiscalYear,dateType:t.dateType,startDateBs:t.startDateBs,endDateBs:t.endDateBs,fromDate:t.fromDate,toDate:t.toDate}})],1),a("div",{staticClass:"col-2"},[a("q-dialog",{model:{value:t.foodStatus,callback:function(e){t.foodStatus=e},expression:"foodStatus"}},[a("FoodItemList",{staticClass:"q-pa-md",attrs:{select:!0},on:{exitFood:t.exitFood}})],1),a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Food Search",type:"text",readonly:""},on:{click:function(e){t.foodStatus=!0}},model:{value:t.itemName,callback:function(e){t.itemName=e},expression:"itemName"}})],1),a("div",{staticClass:"col-6"},[a("q-btn",{staticClass:"bg-delete",attrs:{push:"",size:"0.8rem",label:"Show Report"},on:{click:function(e){return t.fetchReport()}}})],1)])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-none q-mt-md"},[0===t.foodReport.length?a("div",{staticClass:"text-center font-bold"},[t._v("\n        No Rows To Display\n      ")]):a("div",[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:".8rem",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","food-report")}}})],1)]),a("q-markup-table",{attrs:{separator:t.separator,id:"tbl"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Food")]),a("th",{staticClass:"text-center"},[t._v("Date")]),a("th",{staticClass:"text-center"},[t._v("Quantity")]),a("th",{staticClass:"text-center"},[t._v("Total Amount")])])]),a("tbody",[t._l(t.output,(function(e){return a("tr",{key:e.food.id},[a("td",{on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.food.name))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.date))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.quantity.reduce((function(t,e){return t+e}),0)))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v("Rs. "+t._s(e.subtotal.reduce((function(t,e){return parseFloat(t)+parseFloat(e)}),0).toFixed(2)))])])})),a("tr",[a("td"),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.calculateQuantity))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.calculateSubTotal.toFixed(2)))])])],2)])],1)])],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("FoodDetail",{attrs:{pass:t.pass}})],1)],1)},Gc=[],Hc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",[a("div",{staticClass:"col-12 q-mb-sm"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Detail View ("+t._s(t.pass.food.name)+")")])])]),a("q-separator"),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","detail- food-report")}}})],1)]),a("p",{staticClass:"q-mb-none"},[a("span",[t._v("Ordered Date: "+t._s(t.pass.date))])])]),a("div",{staticClass:"col-12"},[a("q-markup-table",{staticClass:"q-mt-md",attrs:{separator:t.separator,id:"tbl1"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Invoice No.")]),a("th",[t._v("Quantity")]),a("th",[t._v("Purchase Price")]),a("th",[t._v("Discount")]),a("th",[t._v("Total Amount")])])]),a("tbody",t._l(t.pass.invoice_id,(function(e,s){return a("tr",{key:s},[a("td",[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.showInvoice(e)}}},[t._v("\n                                    "+t._s(e)+"\n                                ")])]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.quantity[s]))]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.food.price))]),t.pass.discount[s].value?a("td",{staticClass:"text-center"},[1===t.pass.discount[s].discount_in?a("span",[t._v("Rs. "+t._s(t.pass.discount[s].value))]):a("span",[t._v(t._s(t.pass.discount[s].value)+" %")])]):a("td",{staticClass:"text-center"},[t._v(" - ")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.pass.subtotal[s]))])])})),0),a("tbody",[a("tr",[a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.total.toFixed(2)))])])])])],1)])]),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.single,callback:function(e){t.single=e},expression:"single"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId}})],1)],1)},Jc=[],Kc={components:{FinalBill:St},props:{pass:{required:!0}},data:()=>({merge:!1,single:!1,propSingleId:"",propMergeId:"",separator:"vertical"}),computed:{total(){return this.pass.subtotal.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{showInvoice(t){this.propSingleId=t,this.single=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},Zc=Kc,Xc=Object(p["a"])(Zc,Hc,Jc,!1,null,null,null),td=Xc.exports;kt()(Xc,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSeparator:Bt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var ed={components:{DateBar:wl,FoodDetail:td,FoodItemList:Me},data:()=>({foodReport:[],separator:"vertical",from_date:"",to_date:"",thisFYear:"",billDetail:!1,bill_detail:{},start_date_bs:"",end_date_bs:"",checkFiscalYearBoolean:!1,dataStatus:!1,from_date_all:"",to_date_all:"",output:[],totalQuantity:[],totalAmount:[],pass:{},foodStatus:!1,dialog:!1,itemName:null,itemId:null}),created(){this.fetchDate()},computed:{calculateQuantity(){return this.totalQuantity=[],this.output.forEach((t=>{this.totalQuantity.push(t.quantity)})),this.totalQuantity=this.totalQuantity.flat(1/0),this.totalQuantity.reduce(((t,e)=>t+e),0)},calculateSubTotal(){return this.totalAmount=[],this.output.forEach((t=>{this.totalAmount.push(t.subtotal)})),this.totalAmount=this.totalAmount.flat(1/0),this.totalAmount.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{exitFood(t){this.itemId=t.id,this.itemName=t.name,this.foodStatus=!1},async fetchReport(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"});try{const t=await Rl({search:this.itemId,item:1,to_date:this.to_date,from_date:this.from_date});this.foodReport=t.data,this.$q.loading.hide(),this.recreateApi()}catch(error){this.$q.loading.hide()}},fetchDate(){const t=new Date,e=t.getFullYear();let a=t.getMonth()+1,s=t.getDate(),n=null,i=null;n=s<10?"0"+s:s,i=a<10?"0"+a:a;const o=e+"-"+i+"-"+n;this.to_date=o,this.from_date=o},toDate(t){this.to_date=t},fromDate(t){this.from_date=t},thisFiscalYear(t){this.thisFYear=!!t},startDateBs(t){this.start_date_bs=t},endDateBs(t){this.end_date_bs=t},dateType(t){this.date_type=t},recreateApi(){this.foodReport.forEach((t=>{t.invoice.id=t.id})),this.output=[],this.foodReport=Object.values(this.foodReport.reduce(((t,e)=>{const a=`${e.billing_date.substring(0,10)} + ${e.billing_date_bs}`;return t[a]||(t[a]={billing_date:e.billing_date.substring(0,10),invoice:[],billing_date_bs:e.billing_date_bs}),t[a].invoice.push(e.invoice),t}),{})),this.foodReport.forEach((t=>{t.invoice.forEach((e=>{e.order?(e.order.orderfood=e.order.orderfood.map((a=>k()(k()({},a),{},{invoice_id:e.id,date:t.billing_date}))),this.output.push(e.order.orderfood),e.order.orderfood=[]):e.merged_order&&(e.merged_order.merge_orderfood=e.merged_order.merge_orderfood.map((a=>k()(k()({},a),{},{invoice_id:e.id,date:t.billing_date}))),this.output.push(e.merged_order.merge_orderfood),e.merged_order.merge_orderfood=[])}))})),this.output=this.output.flat(1/0),this.duplicate()},duplicate(){this.output=this.output.filter((t=>!(!0===t.complementary))),this.output=Object.values(this.output.reduce(((t,e)=>{const a=`${e.date} + ${e.food.id}`;return t[a]||(t[a]={discount:[],date:e.date,food:e.food,id:[],invoice_id:[],quantity:[],subtotal:[]}),t[a].discount.push(e.discount),t[a].invoice_id.push(e.invoice_id),t[a].quantity.push(e.quantity),t[a].id.push(e.id),t[a].subtotal.push(e.subtotal),t}),{}))},detail(t){this.pass=t,this.dialog=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},ad=ed,sd=Object(p["a"])(ad,Yc,Gc,!1,null,null,null),nd=sd.exports;kt()(sd,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QDialog:Nt["a"],QInput:Et["a"],QBtn:xt["a"],QSeparator:Bt["a"],QMarkupTable:Te["a"]});var id=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 q-pl-sm"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",{staticClass:"q-pa-none q-mb-sm"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12 q-mb-lg"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Addons Sales Report")])]),a("div",{staticClass:"col-12"},[a("DateBar",{attrs:{checkFiscalYearBoolean:t.checkFiscalYearBoolean},on:{thisFiscalYear:t.thisFiscalYear,dateType:t.dateType,startDateBs:t.startDateBs,endDateBs:t.endDateBs,fromDate:t.fromDate,toDate:t.toDate}})],1),a("div",{staticClass:"col-2"},[a("q-dialog",{model:{value:t.addonsStatus,callback:function(e){t.addonsStatus=e},expression:"addonsStatus"}},[a("ListAddons",{staticClass:"q-pa-md",attrs:{select:!0},on:{exitAddons:t.exitAddons}})],1),a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Addons Search",type:"text",readonly:""},on:{click:function(e){t.addonsStatus=!0}},model:{value:t.itemName,callback:function(e){t.itemName=e},expression:"itemName"}})],1),a("div",{staticClass:"col-6"},[a("q-btn",{staticClass:"bg-delete",attrs:{push:"",size:"0.8rem",label:"Show Report"},on:{click:function(e){return t.fetchReport()}}})],1)])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-none q-mt-md"},[0===t.addonsReport.length?a("div",{staticClass:"text-center font-bold"},[t._v("\n                No Rows To Display\n            ")]):a("div",[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",label:"Export Excel",size:".8rem"},on:{click:function(e){return t.generateExcel("tbl","food-report")}}})],1)]),a("q-markup-table",{attrs:{separator:t.separator,id:"tbl"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Addons")]),a("th",{staticClass:"text-center"},[t._v("Date")]),a("th",{staticClass:"text-center"},[t._v("Quantity")]),a("th",{staticClass:"text-center"},[t._v("Total Amount")])])]),a("tbody",[t._l(t.output,(function(e,s){return a("tr",{key:s},[a("td",{on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.addons.name))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.date))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.quantity.reduce((function(t,e){return t+e}),0)))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v("Rs. "+t._s(e.subtotal.reduce((function(t,e){return parseFloat(t)+parseFloat(e)}),0).toFixed(2)))])])})),a("tr",[a("td"),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.calculateQuantity))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.calculateSubTotal.toFixed(2)))])])],2)])],1)])],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("AddonsDetail",{attrs:{pass:t.pass}})],1)],1)},od=[],rd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-card",{staticClass:"my-card"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),s("div",{staticClass:"row q-mt-md"},[t.select?s("div",{staticClass:"col-12"},[s("q-markup-table",{attrs:{flat:"",bordered:""}},[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[t._v("Select")]),s("th",{staticClass:"text-left"},[t._v("Image")]),s("th",{staticClass:"text-left"},[t._v("Name")]),s("th",{staticClass:"text-left"},[t._v("Price")])])]),s("tbody",t._l(t.addonItem,(function(e){return s("tr",{key:e.id},[s("td",[s("q-checkbox",{attrs:{color:"orange-3"},on:{input:function(a){return t.choiceSelected(e)}},model:{value:e.choice,callback:function(a){t.$set(e,"choice",a)},expression:"add.choice"}})],1),e.image?s("td",[s("img",{staticClass:"order-img",staticStyle:{height:"4.0625em",width:"4.0625em"},attrs:{src:e.image}})]):s("td",[s("q-avatar",{staticClass:"order-avatar bg-payment",attrs:{"text-color":"white",size:"4.0625em"}},[t._v(t._s(e.name[0].toUpperCase()))])],1),s("td",{staticClass:"text-left"},[t._v(t._s(e.name))]),s("td",{staticClass:"text-left"},[t._v("Rs. "+t._s(e.price))])])})),0)]),s("div",{staticClass:"q-pt-md q-mb-sm"},[s("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1):s("div",{staticClass:"col-8"},[s("q-markup-table",{attrs:{flat:"",bordered:""}},[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[t._v("Image")]),s("th",{staticClass:"text-left"},[t._v("Name")]),s("th",{staticClass:"text-left"},[t._v("Price")]),s("th",{staticClass:"text-center"},[t._v("Feature")]),s("th",{staticClass:"text-center"},[t._v("Action")])])]),s("tbody",t._l(t.addonItem,(function(e){return s("tr",{key:e.id},[e.image?s("td",[s("img",{staticClass:"order-img",staticStyle:{height:"4.0625em",width:"4.0625em"},attrs:{src:e.image}})]):s("td",[s("q-avatar",{staticClass:"order-avatar bg-payment",attrs:{"text-color":"white",size:"4.0625em"}},[t._v(t._s(e.name[0].toUpperCase()))])],1),s("td",{staticClass:"text-left"},[t._v(t._s(e.name))]),s("td",{staticClass:"text-left"},[t._v("Rs. "+t._s(e.price))]),s("td",{staticClass:"text-center"},[s("q-toggle",{attrs:{color:"orange-3"},on:{input:function(a){return t.changeFeature(e)}},model:{value:e.featured,callback:function(a){t.$set(e,"featured",a)},expression:"add.featured"}})],1),s("td",{staticClass:"text-center"},[s("span",{staticClass:"q-ml-sm"},[s("q-btn",{staticClass:"bg-confirm",attrs:{title:"edit",padding:"xs xs","text-color":"black",icon:"edit"},on:{click:function(a){return t.update(e)}}})],1),s("span",{staticClass:"q-ml-sm"},[s("q-btn",{staticClass:"bg-delete",attrs:{title:"delete",padding:"xs xs","text-color":"black",icon:"delete"},on:{click:function(a){t.del=!0,t.deleteId=e.id}}})],1)])])})),0)]),s("div",{staticClass:"q-pt-md q-mb-sm"},[s("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"col-4"},[s("q-img",{attrs:{src:a("166d")}})],1)]),s("q-dialog",{model:{value:t.add,callback:function(e){t.add=e},expression:"add"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center q-pb-none q-mb-md"},[s("h6",{staticClass:"q-ma-none"},[t._v("Edit Addons Details")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),s("q-separator"),s("q-card-section",[s("AddAddons",{attrs:{addon:t.addon,edit:!0},on:{closeForm:t.closeForm}})],1)],1)],1),s("q-dialog",{model:{value:t.del,callback:function(e){t.del=e},expression:"del"}},[s("DeleteLayout",{on:{deleteItem:t.deleteItem}})],1),s("q-dialog",{attrs:{medium:""},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}},[s("DetailAddons",{attrs:{propAddons:t.propAddons}})],1)],1)],1)},ld=[],cd=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-8"},[s("form",[s("ValidationObserver",{ref:"addonsForm"},[s("div",{staticClass:"row q-col-gutter-md"},[s("div",{staticClass:"col-4"},[s("validation-provider",{attrs:{name:"Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Name",dense:""},model:{value:t.addonName,callback:function(e){t.addonName=e},expression:"addonName"}}),s("span",{staticClass:"text-red-500"},[t._v(t._s(a[0]))])]}}])})],1),s("div",{staticClass:"col-4"},[s("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Description",dense:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),s("div",{staticClass:"col-4"},[s("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Unit",dense:""},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}})],1),s("div",{staticClass:"col-4"},[s("validation-provider",{attrs:{name:"Price",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors;return[s("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Price",dense:""},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),s("span",{staticClass:"text-red-500"},[t._v(t._s(a[0]))])]}}])})],1),s("div",{staticClass:"col-4"},[s("q-file",{attrs:{filled:"",dense:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Upload Image"},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("q-icon",{attrs:{name:"image"}})]},proxy:!0}]),model:{value:t.image,callback:function(e){t.image=e},expression:"image"}})],1)])]),s("p",{staticClass:"q-mt-sm q-mb-none"},[s("span",[s("q-checkbox",{attrs:{label:"isTaxable?",color:"orange-3"},model:{value:t.taxable,callback:function(e){t.taxable=e},expression:"taxable"}})],1)]),s("p",{staticClass:"q-mb-none"},[t.edit?s("q-btn",{staticClass:"q-mt-md",attrs:{size:".8rem",push:"","text-color":"black",label:"Update",type:"button",color:"orange-3"},on:{click:function(e){return t.update()}}}):s("q-btn",{staticClass:"q-mt-md",attrs:{push:"",size:".8rem","text-color":"black",label:"Add",type:"button",color:"orange-3"},on:{click:function(e){return t.addonsAdd()}}})],1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"col-4 q-pt-xl"},[s("q-img",{attrs:{src:a("eb3b")}})],1)]),s("q-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("div",[s("q-card",{staticClass:"card-shadow",staticStyle:{width:"350px"}},[s("q-card-section",{staticClass:"row items-center q-pb-none text-center"},[s("div",{staticClass:"text-h6"},[t._v("Add Recipe For The Addons?")]),s("q-space")],1),s("q-card-section",{attrs:{align:"right"}},[s("q-btn",{attrs:{color:"green-5",label:"Yes",text:""},on:{click:function(e){return t.confirm()}}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ml-md",attrs:{color:"red-5",label:"No"}})],1)],1)],1)])],1)},dd=[];Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"})),Object(Zt["c"])("min",k()(k()({},Xt["f"]),{},{message:"{_field_} may not be less than {length} numbers"})),Object(Zt["c"])("max",k()(k()({},Xt["e"]),{},{message:"{_field_} may not be greater than {length} numbers"})),Object(Zt["c"])("double",k()(k()({},Xt["c"]),{},{message:"{_field_} must have decimal"}));var md={data:()=>({addonName:"",unit:"",image:"",description:"",price:null,menu:!1,taxable:!1,dialog:!1,sendAddons:"",sendId:""}),components:{ValidationProvider:Zt["b"],ValidationObserver:Zt["a"]},created(){this.checkEdit()},activated(){this.fetchMenu()},props:{addon:{required:!0},edit:{required:!0}},methods:{checkEdit(){this.edit&&(this.addonName=this.addon.name,this.unit=this.addon.unit,this.description=this.addon.description,this.price=this.addon.price,this.taxable=this.addon.is_taxable,this.image?this.image=this.addon.image:this.image="")},addonsAdd(){this.$refs.addonsForm.validate().then((t=>{if(!t)return;const e={unit:this.unit,name:this.addonName,description:this.description,price:this.price,taxable:this.taxable,image:this.image},a=new FormData;Object.keys(e).forEach((t=>{a.append(t,e[t])})),Qi(a).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Addons Added"}),this.addonName="",this.unit="",this.description="",this.price=null,this.taxable=!1,this.image="",this.dialog=!0,this.sendAddons=t.data.data.name,this.sendId=t.data.data.id})).catch((({error:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Add"})}))}))},update(){this.$refs.addonsForm.validate().then((t=>{if(!t)return;const e={unit:this.unit,name:this.addonName,menu:this.menuId,description:this.description,price:this.price,image:this.image,taxable:this.taxable},a=new FormData;Object.keys(e).forEach((t=>{a.append(t,e[t])})),Ei(this.addon.id,a).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Update Successful"}),this.$emit("closeForm")})).catch((({error:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Update"})}))}))},confirm(){this.$router.push({path:"recipe",query:{type:"Addons",item:this.sendAddons,id:this.sendId}})}}},ud=md,pd=Object(p["a"])(ud,cd,dd,!1,null,null,null),hd=pd.exports;kt()(pd,"components",{QInput:Et["a"],QFile:se["a"],QIcon:ne["a"],QCheckbox:ie["a"],QBtn:xt["a"],QImg:oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"]}),kt()(pd,"directives",{ClosePopup:le["a"]});var vd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticStyle:{"background-color":"white"}},[t.propAddons.image?a("q-img",{staticStyle:{height:"200px",width:"400px"},attrs:{src:t.propAddons.image}}):a("q-avatar",{staticClass:"order-avatar",staticStyle:{height:"200px",width:"400px"},attrs:{color:"pink","text-color":"white",size:"15em"}},[t._v(t._s(t.propAddons.name[0].toUpperCase()))]),a("q-card-section",[a("p",{staticClass:"text-h5"},[a("span",[t._v("\n                "+t._s(t.propAddons.name)+"\n            ")]),a("span",{staticClass:"float-right"},[t.propAddons.featured?a("q-icon",{attrs:{name:"favorite",color:"red",size:"2rem"}},[a("q-tooltip",[t._v("Favorite\n                        Item")])],1):a("q-icon",{attrs:{name:"favorite_border",size:"2rem"}},[a("q-tooltip",[t._v("Not Favorite")])],1)],1)]),a("p",{staticClass:"q-mt-xs text-overline"},[t._v(t._s(t.propAddons.description))]),a("p",{staticClass:"q-pa-none q-ma-none"},[t._v("Menu:\n            "),a("q-chip",{attrs:{color:"red-5","text-color":"white"}},[t._v("\n                "+t._s(t.propAddons.menu.name)+"\n            ")])],1)]),a("q-separator",{staticClass:"q-mx-md q-mt-none q-pa-none q-mb-none"}),a("q-card-section",[a("div",[a("span",{staticClass:"text-h6",staticStyle:{color:"indianred"}},[t._v("Rs."+t._s(t.propAddons.price))]),a("span",{staticClass:"text-grey text-weigth-thin"},[t._v(" per "+t._s(t.propAddons.unit.toLowerCase()))])])])],1)},bd=[],gd={props:{propAddons:{required:!0}},created(){}},_d=gd,fd=Object(p["a"])(_d,vd,bd,!1,null,null,null),yd=fd.exports;kt()(fd,"components",{QCard:Ct["a"],QImg:oe["a"],QAvatar:xe["a"],QCardSection:Rt["a"],QIcon:ne["a"],QTooltip:we["a"],QChip:Ie["a"],QBadge:ke["a"],QSeparator:Bt["a"]});var qd={data(){return{addonItem:{},last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:7},search:"",add:!1,addon:{},del:!1,deleteId:"",detail:!1,propAddons:{},isRecipe:!1}},props:{select:{},recipe:{}},created(){this.fetchAddons()},activated(){this.fetchAddons()},methods:{async fetchAddons(){this.recipe?this.isRecipe=!0:this.isRecipe=!1;const{page:t,itemsPerPage:e}=this.options,a=await $i({page:t,page_size:e,recipe:this.isRecipe,search:this.search});this.addonItem=a.data.addons.data,this.addonItem=this.addonItem.map((t=>k()(k()({},t),{},{choice:!1}))),this.current_page=a.data.addons.meta.current_page,this.previous_page=a.data.addons.meta.previous_page,this.last_page=a.data.addons.meta.last_page,this.next_page=a.data.addons.meta.next_page},choiceSelected(t){this.$emit("exitAddons",t)},deleteItem(){return Mi(this.deleteId).then((()=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Add-ons Deleted"}),this.del=!1,this.fetchAddons()}))},update(t){this.addon=t,this.add=!0},closeForm(){this.add=!1,this.fetchAddons()},showDetail(t){this.propAddons=t,this.detail=!0},async changeFeature(t){const e={featured:t.featured,name:t.name,price:t.price,unit:t.unit,image:null,description:t.description,taxable:t.is_taxable};try{await Ei(t.id,e);this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Favorite Updated"})}catch(a){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Update Favorite"})}}},watch:{current_page(){this.options.page=this.current_page,this.fetchAddons()},search(){this.fetchAddons()}},components:{AddAddons:hd,DeleteLayout:_e,DetailAddons:yd}},Cd=qd,xd=Object(p["a"])(Cd,rd,ld,!1,null,null,null),wd=xd.exports;kt()(xd,"components",{QCard:Ct["a"],QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QCheckbox:ie["a"],QAvatar:xe["a"],QPagination:Oe["a"],QToggle:$e["a"],QBtn:xt["a"],QImg:oe["a"],QDialog:Nt["a"],QCardSection:Rt["a"],QSpace:re["a"],QSeparator:Bt["a"]}),kt()(xd,"directives",{ClosePopup:le["a"]});var kd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",[a("div",{staticClass:"col-12 q-mb-sm"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Detail View ("+t._s(t.pass.addons.name)+")")])])]),a("q-separator"),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","detail- food-report")}}})],1)]),a("p",{staticClass:"q-mb-none"},[a("span",[t._v("Ordered Date: "+t._s(t.pass.date))])])]),a("div",{staticClass:"col-12"},[a("q-markup-table",{staticClass:"q-mt-md",attrs:{separator:t.separator,id:"tbl1"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Invoice No.")]),a("th",[t._v("Quantity")]),a("th",[t._v("Purchase Price")]),a("th",[t._v("Discount")]),a("th",[t._v("Total Amount")])])]),a("tbody",t._l(t.pass.invoice_id,(function(e,s){return a("tr",{key:s},[a("td",[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.showInvoice(e)}}},[t._v("\n                                    "+t._s(e)+"\n                                ")])]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.quantity[s]))]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.addons.price))]),t.pass.discount[s].value?a("td",{staticClass:"text-center"},[1===t.pass.discount[s].discount_in?a("span",[t._v("Rs. "+t._s(t.pass.discount[s].value))]):a("span",[t._v(t._s(t.pass.discount[s].value)+" %")])]):a("td",{staticClass:"text-center"},[t._v(" - ")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.pass.subtotal[s]))])])})),0),a("tbody",[a("tr",[a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.total.toFixed(2)))])])])])],1)])]),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.single,callback:function(e){t.single=e},expression:"single"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId}})],1)],1)},Id=[],Sd={components:{FinalBill:St},props:{pass:{required:!0}},data:()=>({separator:"vertical",merge:!1,single:!1,propSingleId:"",propMergeId:""}),computed:{total(){return this.pass.subtotal.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{showInvoice(t){this.propSingleId=t,this.single=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},Dd=Sd,Ad=Object(p["a"])(Dd,kd,Id,!1,null,null,null),Fd=Ad.exports;kt()(Ad,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSeparator:Bt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var Td={components:{DateBar:wl,AddonsDetail:Fd,ListAddons:wd},data:()=>({addonsReport:[],separator:"vertical",from_date:"",to_date:"",thisFYear:"",billDetail:!1,bill_detail:{},start_date_bs:"",end_date_bs:"",checkFiscalYearBoolean:!1,dataStatus:!1,from_date_all:"",to_date_all:"",output:[],totalQuantity:[],totalAmount:[],pass:{},dialog:!1,addonsStatus:!1,itemName:null,itemId:null}),created(){this.fetchDate()},computed:{calculateQuantity(){return this.totalQuantity=[],this.output.forEach((t=>{this.totalQuantity.push(t.quantity)})),this.totalQuantity=this.totalQuantity.flat(1/0),this.totalQuantity.reduce(((t,e)=>t+e),0)},calculateSubTotal(){return this.totalAmount=[],this.output.forEach((t=>{this.totalAmount.push(t.subtotal)})),this.totalAmount=this.totalAmount.flat(1/0),this.totalAmount.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{exitAddons(t){this.itemId=t.id,this.itemName=t.name,this.addonsStatus=!1},async fetchReport(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"});try{const t=await Rl({search:this.itemId,item:3,to_date:this.to_date,from_date:this.from_date});this.addonsReport=t.data,this.$q.loading.hide(),this.recreateApi()}catch(error){this.$q.loading.hide()}},fetchDate(){const t=new Date,e=t.getFullYear();let a=t.getMonth()+1,s=t.getDate(),n=null,i=null;n=s<10?"0"+s:s,i=a<10?"0"+a:a;const o=e+"-"+i+"-"+n;this.to_date=o,this.from_date=o},toDate(t){this.to_date=t},fromDate(t){this.from_date=t},thisFiscalYear(t){this.thisFYear=!!t},startDateBs(t){this.start_date_bs=t},endDateBs(t){this.end_date_bs=t},dateType(t){this.date_type=t},recreateApi(){this.addonsReport.forEach((t=>{t.invoice.id=t.id})),this.output=[],this.addonsReport=Object.values(this.addonsReport.reduce(((t,e)=>{const a=`${e.billing_date.substring(0,10)} + ${e.billing_date_bs}`;return t[a]||(t[a]={billing_date:e.billing_date.substring(0,10),invoice:[],billing_date_bs:e.billing_date_bs}),t[a].invoice.push(e.invoice),t}),{})),this.addonsReport.forEach((t=>{t.invoice.forEach((e=>{e.order?(e.order.orderaddons=e.order.orderaddons.map((a=>k()(k()({},a),{},{invoice_id:e.id,date:t.billing_date}))),this.output.push(e.order.orderaddons),e.order.orderaddons=[]):e.merged_order&&(e.merged_order.merge_orderaddons=e.merged_order.merge_orderaddons.map((a=>k()(k()({},a),{},{invoice_id:e.id,date:t.billing_date}))),this.output.push(e.merged_order.merge_orderaddons),e.merged_order.merge_orderaddons=[])}))})),this.output=this.output.flat(1/0),this.duplicate()},duplicate(){this.output=this.output.filter((t=>!(!0===t.complementary))),this.output=Object.values(this.output.reduce(((t,e)=>{const a=`${e.date} + ${e.addons.id}`;return t[a]||(t[a]={discount:[],date:e.date,addons:e.addons,id:[],invoice_id:[],quantity:[],subtotal:[]}),t[a].discount.push(e.discount),t[a].invoice_id.push(e.invoice_id),t[a].quantity.push(e.quantity),t[a].id.push(e.id),t[a].subtotal.push(e.subtotal),t}),{}))},detail(t){this.pass=t,this.dialog=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},Od=Td,$d=Object(p["a"])(Od,id,od,!1,null,null,null),Qd=$d.exports;kt()($d,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QDialog:Nt["a"],QInput:Et["a"],QBtn:xt["a"],QSeparator:Bt["a"],QMarkupTable:Te["a"]});var Md=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 q-pl-sm"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",{staticClass:"q-pa-none q-mb-sm"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12 q-mb-lg"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Restaurant Sales Report")])]),a("div",{staticClass:"col-12"},[a("DateBar",{attrs:{checkFiscalYearBoolean:t.checkFiscalYearBoolean},on:{thisFiscalYear:t.thisFiscalYear,dateType:t.dateType,startDateBs:t.startDateBs,endDateBs:t.endDateBs,fromDate:t.fromDate,toDate:t.toDate}})],1),a("div",{staticClass:"col-11"},[a("q-btn",{staticClass:"bg-delete",attrs:{push:"",size:".8rem",label:"Show Report"},on:{click:function(e){return t.generateReport()}}})],1)])]),a("q-separator"),t.dataStatus?a("q-card-section",{staticClass:"q-pa-none q-mt-md"},[0===t.salesSummary.length?a("div",{staticClass:"text-center font-bold"},[t._v("\n        No Rows To Display\n      ")]):a("div",[t.showGraph?a("div",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:".8rem",label:"Show Detail"},on:{click:function(e){t.showGraph=!1}}})],1),a("apexchart",{attrs:{width:"900",type:"line",options:t.options,series:t.series}})],1):a("div",[a("div",{staticClass:"row"},[t.showGraph?t._e():a("div",{staticClass:"col-3"},[a("span",[a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:".8rem",label:"Show Graph"},on:{click:function(e){t.showGraph=!0}}}),t.status?a("q-btn",{staticClass:"bg-confirm q-ml-sm",attrs:{size:".8rem",push:"",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","members-data")}}}):t._e()],1)]),a("div",{staticClass:"col-3"},[a("span",[a("q-checkbox",{attrs:{label:"Complementary"},model:{value:t.showComplement,callback:function(e){t.showComplement=e},expression:"showComplement"}})],1)]),a("div",{staticClass:"col-3"},[a("span",[a("q-checkbox",{attrs:{label:"Tax"},model:{value:t.showTax,callback:function(e){t.showTax=e},expression:"showTax"}})],1)]),a("div",{staticClass:"col-3"},[a("span",[a("q-checkbox",{attrs:{label:"Discount"},model:{value:t.showDiscount,callback:function(e){t.showDiscount=e},expression:"showDiscount"}})],1)])]),t.status?a("q-markup-table",{staticClass:"q-mt-sm",attrs:{id:"tbl",separator:t.separator}},[a("thead",[a("tr",["A.D"===t.date_type?a("th",{staticClass:"text-center",attrs:{colspan:"10"}},[t._v("\n                  RESTAURANT AND RESTAURANT (FISCAL)"),a("br"),t._v("KRITIPUR"),a("br"),t._v("PAN/VAT\n                  No"),a("br"),a("u",[t._v(" WISE SALES INVOICE SUMMARY REGISTER REPORTS")]),a("br"),a("u",[t._v("FROM DATE "+t._s(t.from_date_all)+" to\n                    "+t._s(t.to_date_all))])]):a("th",{staticClass:"text-center",attrs:{colspan:"10"}},[t._v("\n                  RESTAURANT AND RESTAURANT (FISCAL)"),a("br"),t._v("KRITIPUR"),a("br"),t._v("PAN/VAT\n                  No"),a("br"),a("u",[t._v(" WISE PHARMACY SALES INVOICE SUMMARY REGISTER REPORTS")]),a("br"),a("u",[t._v("FROM DATE "+t._s(t.start_date_bs)+" to\n                    "+t._s(t.end_date_bs))])])])]),a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("S.N.")]),a("th",{staticClass:"text-left"},[t._v("DATE")]),a("th",{staticClass:"text-left"},[t._v("INVOICE_NO")]),a("th",{staticClass:"text-left"},[t._v("BASIC AMOUNT")]),a("th",{directives:[{name:"show",rawName:"v-show",value:t.showComplement,expression:"showComplement"}],staticClass:"text-left"},[t._v("COMPLEMENTARY")]),a("th",{directives:[{name:"show",rawName:"v-show",value:t.showDiscount,expression:"showDiscount"}],staticClass:"text-left"},[t._v("DISCOUNT")]),a("th",{directives:[{name:"show",rawName:"v-show",value:t.showTax,expression:"showTax"}],staticClass:"text-left"},[t._v("TAX")]),a("th",{staticClass:"text-left"},[t._v("NET AMOUNT")]),a("th",{staticClass:"text-left"},[t._v("PAYMENT METHOD")])])]),a("tbody",t._l(t.salesSummary,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left"},[t._v(t._s(s+1))]),e.billing_date?a("td",{staticClass:"text-left"},[t._v(t._s(e.billing_date.substring(0,10))+"("+t._s(e.billing_date_bs)+")")]):a("td",{staticClass:"text-left"},[t._v("-")]),a("td",{staticClass:"text-left"},[a("span",{staticStyle:{cursor:"pointer","text-decoration":"underline",color:"orange"},on:{click:function(a){return t.viewBill(e)}}},[t._v(t._s(e.id))])]),e.invoice.gross_price?a("td",{staticClass:"text-left"},[t._v("R.s "+t._s(e.invoice.gross_price))]):t._e(),t.showComplement?a("td",{staticClass:"text-left"},[t._v("\n                  R.s "+t._s(t.getComplementary(e))+"\n                ")]):t._e(),t.showDiscount?a("td",{staticClass:"text-left"},[t._v("\n                  R.s "+t._s(e.invoice.discount_amount)+"\n                ")]):t._e(),t.showTax?a("td",{staticClass:"text-left"},[t._v("\n                  R.s "+t._s(e.invoice.tax_amount)+"\n                ")]):t._e(),a("td",{staticClass:"text-left"},[t._v("R.s "+t._s(e.invoice.net_price))]),a("td",{staticClass:"text-left"},[t._v("\n                  "+t._s(t.getFormatedPaymentMethod(e.payment_method))+"\n                ")])])})),0),a("tbody",[a("tr",[a("td",{staticClass:"text-left"}),a("td",{staticClass:"text-left"}),a("td",{staticClass:"text-left"},[a("b",[t._v("Total")])]),a("td",{staticClass:"text-left"},[t._v("R.s "+t._s(t.getTotal("gross_price")))]),t.showComplement?a("td",{staticClass:"text-left"},[t._v("R.s "+t._s(t.getTotalComp()))]):t._e(),t.showDiscount?a("td",{staticClass:"text-left"},[t._v("R.s "+t._s(t.getTotal("discount_amount")))]):t._e(),t.showTax?a("td",{staticClass:"text-left"},[t._v("R.s "+t._s(t.getTotal("tax_amount")))]):t._e(),a("td",{staticClass:"text-left"},[t._v("R.s "+t._s(t.getTotal("net_price")))]),a("td",{staticClass:"text-left"})])])]):t._e(),a("q-markup-table",{staticClass:"q-mt-sm",staticStyle:{width:"500px"},attrs:{separator:t.separator}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Payment Method")]),a("th",{staticClass:"text-center"},[t._v("Total Amount")]),a("th",{staticClass:"text-center"},[t._v("Count")])])]),a("tbody",t._l(t.paymentMethod,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left"},[t._v(t._s(s))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.value))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.count))])])})),0)])],1)]),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.single,callback:function(e){t.single=e},expression:"single"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId}})],1)],1):a("q-card-section",{staticClass:"q-pa-none q-mt-md"},[a("div",{staticClass:"text-center font-bold"},[t._v("\n        No Rows To Display\n      ")])])],1)],1)},Ed=[],Rd={data(){return{options:{chart:{id:"vuechart-example"},xaxis:{categories:[]}},series:[{name:"Sales",data:[]},{name:"No. of Sales",data:[]}],showGraph:!1,showComplement:!0,showTax:!0,showDiscount:!0,salesSummary:[],search:"",status:!1,date_type:"",loading:!1,separator:"vertical",from_date:"",to_date:"",thisFYear:"",start_date_bs:"",end_date_bs:"",checkFiscalYearBoolean:!1,dataStatus:!1,from_date_all:"",to_date_all:"",propSingleId:null,propMergeId:null,single:!1,merge:!1,paymentMethod:{}}},components:{DateBar:wl,apexchart:q.a,FinalBill:St},created(){this.fetchDate()},methods:{getFormatedPaymentMethod(t){return t.map((t=>`${t.type}: ${t.split_pay}`)).join(", ")},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()},checkFiscalYear(){this.checkFiscalYearBoolean?this.checkFiscalYearBoolean=!1:this.checkFiscalYearBoolean=!0},fetchDate(){const t=new Date,e=t.getFullYear();let a=t.getMonth()+1,s=t.getDate(),n=null,i=null;n=s<10?"0"+s:s,i=a<10?"0"+a:a;const o=e+"-"+i+"-"+n;this.to_date=o,this.from_date=o},async generateReport(){this.dataStatus=!0,this.from_date_all=this.from_date,this.to_date_all=this.to_date,this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"}),await Bl({from_date:this.from_date,to_date:this.to_date,fiscal:this.thisFYear}).then((t=>{this.paymentMethod={},this.salesSummary=t.data,this.salesSummary.forEach((t=>{var e=t.invoice.net_price;t.payment_method.forEach((t=>{var a=e;if(e-=parseFloat(t.split_pay),t.type in this.paymentMethod)this.paymentMethod[t.type]["value"]+=e>0?parseFloat(t.split_pay):parseFloat(a),this.paymentMethod[t.type]["count"]+=1;else if(e>0){let e={value:parseFloat(t.split_pay),count:1};this.$set(this.paymentMethod,t.type,e)}else{let e={value:parseFloat(a),count:1};this.$set(this.paymentMethod,t.type,e)}}))})),this.status=!0,this.$q.loading.hide(),this.getGraph()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Error Loading Report"})}))},toDate(t){this.to_date=t},fromDate(t){this.from_date=t},thisFiscalYear(t){this.thisFYear=!!t},viewBill(t){this.propSingleId=t.id,this.single=!0},async fetchSingleBill(t){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"}),await Pl(t).then((({data:t})=>{this.bill_detail=t.data[0],this.$q.loading.hide()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response.data.error})}))},startDateBs(t){this.start_date_bs=t},endDateBs(t){this.end_date_bs=t},dateType(t){this.date_type=t},getTotal(t){let e=0;return this.salesSummary.forEach((a=>{e+=parseFloat(a.invoice[t])})),e.toFixed(2)},getGraph(){this.options.xaxis.categories=[],this.series[0].data=[],this.series[1].data=[];var t=new Date(this.to_date),e=new Date(this.from_date),a=(Math.abs(t-e),0),s=0;this.salesSummary.forEach((t=>{if(s+=1,this.options.xaxis.categories.find((e=>e===t.billing_date.slice(0,10))))a+=parseFloat(t.invoice.net_price);else{a&&(s-=1,this.series[0].data.push(a),this.series[1].data.push(s)),s=1,a=parseFloat(t.invoice.net_price);var e=t.billing_date.slice(0,10);this.options.xaxis.categories.push(e)}})),this.series[0].data.push(a),this.series[1].data.push(s)},getComplementary(t){let e=0;return t.invoice.order?(t.invoice.order.orderfood&&t.invoice.order.orderfood.forEach((t=>{t.complementary&&(e+=parseFloat(t.subtotal))})),t.invoice.order.orderbeverage&&t.invoice.order.orderbeverage.forEach((t=>{t.complementary&&(e+=parseFloat(t.subtotal))})),t.invoice.order.orderaddons&&t.invoice.order.orderaddons.forEach((t=>{t.complementary&&(e+=parseFloat(t.subtotal))}))):(t.invoice.merged_order.merge_orderfood&&t.invoice.merged_order.merge_orderfood.forEach((t=>{t.complementary&&(e+=parseFloat(t.subtotal))})),t.invoice.merged_order.merge_orderbeverage&&t.invoice.merged_order.merge_orderbeverage.forEach((t=>{t.complementary&&(e+=parseFloat(t.subtotal))})),t.invoice.merged_order.merge_orderaddons&&t.invoice.merged_order.merge_orderaddons.forEach((t=>{t.complementary&&(e+=parseFloat(t.subtotal))}))),e},getTotalComp(){let t=0;return this.salesSummary.forEach((e=>{e.invoice.order?(e.invoice.order.orderfood&&e.invoice.order.orderfood.forEach((e=>{e.complementary&&(t+=parseFloat(e.subtotal))})),e.invoice.order.orderbeverage&&e.invoice.order.orderbeverage.forEach((e=>{e.complementary&&(t+=parseFloat(e.subtotal))})),e.invoice.order.orderaddons&&e.invoice.order.orderaddons.forEach((e=>{e.complementary&&(t+=parseFloat(e.subtotal))}))):(e.invoice.merged_order.merge_orderfood&&e.invoice.merged_order.merge_orderfood.forEach((e=>{e.complementary&&(t+=parseFloat(e.subtotal))})),e.invoice.merged_order.merge_orderbeverage&&e.invoice.merged_order.merge_orderbeverage.forEach((e=>{e.complementary&&(t+=parseFloat(e.subtotal))})),e.invoice.merged_order.merge_orderaddons&&e.invoice.merged_order.merge_orderaddons.forEach((e=>{e.complementary&&(t+=parseFloat(e.subtotal))})))})),t}}},Bd=Rd,Pd=Object(p["a"])(Bd,Md,Ed,!1,null,null,null),Nd=Pd.exports;kt()(Pd,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QBtn:xt["a"],QSeparator:Bt["a"],QCheckbox:ie["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var jd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Addons Menu")])])])])],1)]),a("q-card",{staticClass:"q-mt-lg"},[a("q-tabs",{staticClass:"text-grey q-mb-md",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"add",label:"Add Addons"}}),a("q-tab",{attrs:{name:"list",label:"Addons List"}})],1),a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"add"}},[a("AddAddons")],1),a("q-tab-panel",{attrs:{name:"list"}},[a("ListAddons")],1)],1)],1)],1)},Ld=[],zd={components:{AddAddons:hd,ListAddons:wd},data(){return{tab:"add"}}},Ud=zd,Vd=Object(p["a"])(Ud,jd,Ld,!1,null,null,null),Wd=Vd.exports;kt()(Vd,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var Yd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Customer/Member Details")])])])])],1)]),a("q-card",{staticClass:"my-card q-mt-lg"},[a("div",{staticClass:"row q-col-gutter-x-md"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"customer",label:"Customer"}}),a("q-tab",{attrs:{name:"member",label:"Member"}})],1)],1),a("div",{staticClass:"col-12"},[a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"customer"}},[a("Customer")],1),a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"member"}},[a("Member")],1)],1)],1)])])],1)},Gd=[],Hd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("q-tabs",{staticClass:"onGoingSub",attrs:{dense:"",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"add",label:"Add Customer"}}),a("q-tab",{attrs:{name:"list",label:"Customer List"}})],1)],1)]),a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"add"}},[a("AddCustomer",{attrs:{edit:!1,sender:!1}})],1),a("q-tab-panel",{attrs:{name:"list"}},[a("CustomerList")],1)],1)],1)},Jd=[],Kd={components:{AddCustomer:vs,CustomerList:fs},data(){return{tab:"add"}}},Zd=Kd,Xd=Object(p["a"])(Zd,Hd,Jd,!1,null,null,null),tm=Xd.exports;kt()(Xd,"components",{QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var em=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("q-tabs",{staticClass:"onGoingSub",attrs:{dense:"",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"addmember",label:"Add Member"}}),a("q-tab",{attrs:{name:"memberlist",label:"Member List"}}),a("q-tab",{attrs:{name:"addtype",label:"Add Membership Type"}}),a("q-tab",{attrs:{name:"typelist",label:"Membership Type List"}})],1)],1)]),a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"addmember"}},[a("AddMembers")],1),a("q-tab-panel",{attrs:{name:"memberlist"}},[a("MembersList")],1),a("q-tab-panel",{attrs:{name:"addtype"}},[a("AddMembershipType")],1),a("q-tab-panel",{attrs:{name:"typelist"}},[a("MembershipTypeList")],1)],1)],1)},am=[],sm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pt-md"},[a("form",{ref:"memberForm"},[a("ValidationObserver",{ref:"memForm"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-4"},[a("validation-provider",{attrs:{name:"Membership Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Membership Name",dense:""},model:{value:t.membership.discount_name,callback:function(e){t.$set(t.membership,"discount_name",e)},expression:"membership.discount_name"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-4"},[a("validation-provider",{attrs:{name:"Discount Amount",rules:"numeric|required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Discount Amount",dense:""},model:{value:t.membership.discount_amount,callback:function(e){t.$set(t.membership,"discount_amount",t._n(e))},expression:"membership.discount_amount"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-4"},[a("validation-provider",{attrs:{name:"Discount Type",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-select",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Discount Type",dense:"",options:t.discountOptions,"emit-value":"","map-options":""},model:{value:t.membership.discount_type,callback:function(e){t.$set(t.membership,"discount_type",e)},expression:"membership.discount_type"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1)])]),a("p",[t.edit?a("q-btn",{staticClass:"q-mt-md",attrs:{push:"",size:".8rem","text-color":"black",label:"Update",type:"button",color:"orange-3"},on:{click:function(e){return t.update()}}}):a("q-btn",{staticClass:"q-mt-md",attrs:{push:"",size:".8rem","text-color":"black",label:"Add",type:"button",color:"orange-3"},on:{click:function(e){return t.add()}}})],1)],1)])},nm=[];Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"}));var im={components:{ValidationObserver:Zt["a"],ValidationProvider:Zt["b"]},data(){return{discountOptions:[{label:"%",value:2},{label:"Amt",value:1}],membership:{discount_name:"",discount_type:null,discount_amount:null}}},methods:{async add(){if(await this.$refs.memForm.validate())try{await os(this.membership),this.$q.notify({message:"Membership Type Added",color:"green-5",icon:"info"}),this.membership={discount_name:"",discount_type:null,discount_amount:null}}catch(error){this.$q.notify({message:"Unable to Add Membership",color:"red-5",icon:"warning"})}}}},om=im,rm=Object(p["a"])(om,sm,nm,!1,null,null,null),lm=rm.exports;kt()(rm,"components",{QInput:Et["a"],QSelect:ae["a"],QBtn:xt["a"]});var cm={components:{AddMembers:Cc,AddMembershipType:lm,MembersList:Ic,MembershipTypeList:_c},data(){return{tab:"addmember"}}},dm=cm,mm=Object(p["a"])(dm,em,am,!1,null,null,null),um=mm.exports;kt()(mm,"components",{QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var pm={components:{Customer:tm,Member:um},data(){return{tab:"customer"}}},hm=pm,vm=(a("faed"),Object(p["a"])(hm,Yd,Gd,!1,null,null,null)),bm=vm.exports;kt()(vm,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var gm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("q-card",{staticClass:"my-card "},[a("div",{staticClass:"row q-col-gutter-x-md"},[a("div",{staticClass:"col-lg-7 col-md-7"},[a("q-tabs",{staticClass:"text-grey no-shadow",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"Food",label:"Food"}}),a("q-tab",{attrs:{name:"Beverage",label:"Beverage"}}),a("q-tab",{attrs:{name:"Addons",label:"Addons"}}),a("q-tab",{attrs:{name:"Overall",label:"Overall"}})],1)],1),a("div",{staticClass:"col-lg-5 col-md-5"},[t._v("\r\n         \r\n      ")]),a("div",{staticClass:"col-12"},[a("q-tab-panels",{attrs:{"keep-alive":"",animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"Food"}},[a("FoodSummary")],1),a("q-tab-panel",{attrs:{name:"Beverage"}},[a("BeverageSummary")],1),a("q-tab-panel",{attrs:{name:"Addons"}},[a("AddonsSummary")],1),a("q-tab-panel",{attrs:{name:"Overall"}},[a("OverallReport")],1)],1)],1)])])],1)},_m=[],fm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0===t.foodItems.length?a("div",{staticClass:"row"},[a("div",{staticClass:"q-pa-md col-6"},[a("q-card",{staticClass:"my-card summary-bg"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("No food ordered!")])])],1)],1)]):a("div",{staticClass:"row q-col-gutter-lg q-mt-sm"},[a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"summary-bg",attrs:{center:""}},[a("q-card-section",{staticClass:"q-pb-sm",attrs:{center:""}},[a("div",{staticClass:"text-h6"},[t._v("Highest Sold: "+t._s(t.featuredFood.food.name)+t._s(t.featuredFood.food.item))]),a("q-img",{staticStyle:{"border-radius":"50%",transition:"transform 0.2s",height:"60%",width:"60%","box-shadow":"rgba(0, 0, 0, 0.1) 0px 4px 12px"},attrs:{src:t.getImage(t.featuredFood.food.image)}}),a("p",{staticClass:"text-subtitle2"},[t._v("Quantity Sold: "+t._s(t.featuredFood.quantity)+" ")]),a("p",{staticClass:"text-subtitle2"},[t._v("Total Revenue: "+t._s(t.featuredFood.net_price))])],1)],1)],1),a("div",{staticClass:"col-6"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Revenue Generated:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("net_price"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Gross Amount:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("gross_price"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Quantity Sold:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(parseInt(t.getTotal("quantity")))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Unique Dishes:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(t.foodItems.length)+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Tax Generated:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("tax_amount"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Discount Amount:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("discount_amount"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Complementary Quantity:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(t.getComplementary())+"\n            ")])],1)],1)])])])])},ym=[],qm={data(){return{foodItems:[],conplementary:[],featuredFood:{}}},created(){this.getFoodSummary()},methods:{async getFoodSummary(){const t=new Date;let e=t.getDate(),a=t.getMonth()+1,s=t.getFullYear(),n=`${s}-${a}-${e}`;this.$q.loading.show({spinner:zs["a"],spinnerColor:"white",spinnerSize:60,message:"Fetching data. Please Wait !",messageColor:"white"}),await Tt({item:1,from_date:n}).then((({data:t})=>{this.foodItems=t.report,this.complementary=t.complementary,this.$q.loading.hide(),this.getFeaturedFood()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response})}))},getComplementary(){return 0===this.complementary.length?0:this.complementary.reduce(((t,e)=>t+e.complementary_quantity),0)},getFeaturedFood(){const t=this.foodItems.map((({quantity:t})=>t));var e=Math.max(...t);this.foodItems.forEach((t=>{t.quantity==e&&(0===Object.keys(this.featuredFood).length||this.featuredFood.net_price<t.net_price)&&(this.featuredFood=t)}))},getTotal(t){let e=0;return this.foodItems.forEach((a=>{e+=parseFloat(a[t])})),e.toFixed(2)},getImage(t){return"http://192.168.18.77:8000"+t}}},Cm=qm,xm=(a("bce4"),Object(p["a"])(Cm,fm,ym,!1,null,"76a11c31",null)),wm=xm.exports;kt()(xm,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QImg:oe["a"]});var km=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0===t.foodItems.length?a("div",{staticClass:"row"},[a("div",{staticClass:"q-pa-md col-6"},[a("q-card",{staticClass:"my-card summary-bg"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("No beverage ordered!")])])],1)],1)]):a("div",{staticClass:"row q-col-gutter-lg q-mt-sm"},[a("div",{staticClass:"col-6 "},[a("q-card",{staticClass:"summary-bg",attrs:{center:""}},[a("q-card-section",{attrs:{center:""}},[a("div",{staticClass:"text-h6"},[t._v("Highest Sold: "+t._s(t.featuredFood.beverage.name)+t._s(t.featuredFood.beverage.item))]),a("q-img",{staticStyle:{"border-radius":"50%",transition:"transform 0.2s",height:"60%",width:"60%","box-shadow":"rgba(0, 0, 0, 0.1) 0px 4px 12px"},attrs:{src:t.getImage(t.featuredFood.beverage.image)}}),a("div",{staticClass:"text-subtitle2"},[t._v("Quantity Sold: "+t._s(t.featuredFood.quantity)+" Total Revenue: "+t._s(t.featuredFood.net_price))])],1)],1)],1),a("div",{staticClass:"col-6"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Revenue Generated:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("net_price"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Gross Amount:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("gross_price"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Quantity Sold:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(parseInt(t.getTotal("quantity")))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Unique Beverage:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(t.foodItems.length)+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Tax Generated:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              R.s "+t._s(t.getTotal("tax_amount"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Discount Amount:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              R.s "+t._s(t.getTotal("discount_amount"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Complementary Quantity:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(t.getComplementary())+"\n            ")])],1)],1)])])])])},Im=[],Sm={data(){return{foodItems:[],complementary:[],featuredFood:{}}},created(){this.getFoodSummary()},methods:{async getFoodSummary(){const t=new Date;let e=t.getDate(),a=t.getMonth()+1,s=t.getFullYear(),n=`${s}-${a}-${e}`;this.$q.loading.show({spinner:zs["a"],spinnerColor:"white",spinnerSize:60,message:"Fetching data. Please Wait !",messageColor:"white"}),await Tt({item:2,from_date:n}).then((({data:t})=>{this.foodItems=t.report,this.complementary=t.complementary,this.$q.loading.hide(),this.getFeaturedFood()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response})}))},getComplementary(){return 0===this.complementary.length?0:this.complementary.reduce(((t,e)=>t+e.complementary_quantity),0)},getFeaturedFood(){const t=this.foodItems.map((({quantity:t})=>t));var e=Math.max(...t);this.foodItems.forEach((t=>{t.quantity==e&&(0===Object.keys(this.featuredFood).length||this.featuredFood.net_price<t.net_price)&&(this.featuredFood=t)}))},getTotal(t){let e=0;return this.foodItems.forEach((a=>{e+=parseFloat(a[t])})),e.toFixed(2)},getImage(t){return"http://192.168.18.77:8000"+t}}},Dm=Sm,Am=(a("e601"),Object(p["a"])(Dm,km,Im,!1,null,"59568f6e",null)),Fm=Am.exports;kt()(Am,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QImg:oe["a"]});var Tm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0===t.foodItems.length?a("div",{staticClass:"row"},[a("div",{staticClass:"q-pa-md col-6"},[a("q-card",{staticClass:"my-card summary-bg"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("No addons ordered!")])])],1)],1)]):a("div",{staticClass:"row  q-col-gutter-lg q-mt-sm"},[a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"summary-bg",attrs:{center:""}},[a("q-card-section",{attrs:{center:""}},[a("div",{staticClass:"text-h6"},[t._v("Featured Addons: "+t._s(t.featuredFood.addons.name)+t._s(t.featuredFood.addons.item))]),a("q-img",{staticStyle:{"border-radius":"50%",transition:"transform 0.2s",height:"60%",width:"60%","box-shadow":"rgba(0, 0, 0, 0.1) 0px 4px 12px"},attrs:{src:t.getImage(t.featuredFood.addons.image)}}),a("div",{staticClass:"text-subtitle2"},[t._v("Quantity Sold: "+t._s(t.featuredFood.quantity)+" Total Revenue: "+t._s(t.featuredFood.net_price))])],1)],1)],1),a("div",{staticClass:"col-6"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Revenue Generated:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("net_price"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Gross Amount:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("gross_price"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Quantity Sold:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(parseInt(t.getTotal("quantity")))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Unique Addons:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(t.foodItems.length)+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Tax Generated:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("tax_amount"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Discount Amount:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("discount_amount"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Complementary Quantity:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(t.getComplementary())+"\n            ")])],1)],1)])])])])},Om=[],$m={data(){return{foodItems:[],complementary:[],featuredFood:{}}},created(){this.getFoodSummary()},methods:{async getFoodSummary(){const t=new Date;let e=t.getDate(),a=t.getMonth()+1,s=t.getFullYear(),n=`${s}-${a}-${e}`;this.$q.loading.show({spinner:zs["a"],spinnerColor:"white",spinnerSize:60,message:"Fetching data. Please Wait !",messageColor:"white"}),await Tt({item:3,from_date:n}).then((({data:t})=>{this.foodItems=t.report,this.complementary=t.complementary,this.$q.loading.hide(),this.getFeaturedFood()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response})}))},getComplementary(){return 0===this.complementary.length?0:this.complementary.reduce(((t,e)=>t+e.complementary_quantity),0)},getFeaturedFood(){const t=this.foodItems.map((({quantity:t})=>t));var e=Math.max(...t);this.foodItems.forEach((t=>{t.quantity==e&&(0===Object.keys(this.featuredFood).length||this.featuredFood.net_price<t.net_price)&&(this.featuredFood=t)}))},getTotal(t){let e=0;return this.foodItems.forEach((a=>{e+=parseFloat(a[t])})),e.toFixed(2)},getImage(t){return"http://192.168.18.77:8000"+t}}},Qm=$m,Mm=(a("ea5a"),Object(p["a"])(Qm,Tm,Om,!1,null,"c0bd2a26",null)),Em=Mm.exports;kt()(Mm,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QImg:oe["a"]});var Rm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0===t.foodItems.length?a("div",{staticClass:"row"},[a("div",{staticClass:"q-pa-md col-6"},[a("q-card",{staticClass:"my-card summary-bg"},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("No food ordered!")])])],1)],1)]):a("div",{staticClass:"row  q-col-gutter-lg q-mt-sm"},[a("div",{staticClass:"col-6 "},[a("q-card",{staticClass:"summary-bg",attrs:{center:""}},[a("q-card-section",{attrs:{center:""}},[a("div",{staticClass:"text-h6"},[t._v("Featured Item: "+t._s(t.featuredFood.item.name)+t._s(t.featuredFood.item.item))]),a("q-img",{staticStyle:{"border-radius":"50%",transition:"transform 0.2s",height:"60%",width:"60%","box-shadow":"rgba(0, 0, 0, 0.1) 0px 4px 12px"},attrs:{src:t.getImage(t.featuredFood.item.image)}}),a("div",{staticClass:"text-subtitle2"},[t._v("Quantity Sold: "+t._s(t.featuredFood.quantity)+" Total Revenue: "+t._s(t.featuredFood.net_price))])],1)],1)],1),a("div",{staticClass:"col-6"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Revenue Generated:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("net_price"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Gross Amount:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("gross_price"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Quantity Sold:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(parseInt(t.getTotal("quantity")))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Unique Items:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(t.foodItems.length)+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Tax Generated:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("tax_amount"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Discount Amount:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              Rs. "+t._s(t.getTotal("discount_amount"))+"\n            ")])],1)],1),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"my-card summary-bg summary-height"},[a("q-card-section",[a("div",{staticClass:"text-h7"},[t._v("Total Complementary Quantity:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(t.getComplementary())+"\n            ")])],1)],1)])])])])},Bm=[],Pm={data(){return{foodItems:[],complementary:[],featuredFood:{}}},created(){this.getFoodSummary()},methods:{async getFoodSummary(){const t=new Date;let e=t.getDate(),a=t.getMonth()+1,s=t.getFullYear(),n=`${s}-${a}-${e}`;this.$q.loading.show({spinner:zs["a"],spinnerColor:"white",spinnerSize:60,message:"Fetching data. Please Wait !",messageColor:"white"}),await Tt({item:0,from_date:n}).then((({data:t})=>{this.foodItems=t.report,this.complementary=t.complementary,this.$q.loading.hide(),this.getFeaturedFood()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response})}))},getComplementary(){return 0===this.complementary.length?0:this.complementary.reduce(((t,e)=>t+e.complementary_quantity),0)},getFeaturedFood(){const t=this.foodItems.map((({quantity:t})=>t));var e=Math.max(...t);this.foodItems.forEach((t=>{t.quantity==e&&(0===Object.keys(this.featuredFood).length||this.featuredFood.net_price<t.net_price)&&(this.featuredFood=t)}))},getTotal(t){let e=0;return this.foodItems.forEach((a=>{e+=parseFloat(a[t])})),e.toFixed(2)},getImage(t){return"http://192.168.18.77:8000"+t}}},Nm=Pm,jm=(a("3f40"),Object(p["a"])(Nm,Rm,Bm,!1,null,"6f7f2374",null)),Lm=jm.exports;kt()(jm,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QImg:oe["a"]});var zm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row",staticStyle:{width:"70%"}},[a("div",{staticClass:"q-pa-md col-6 "},[a("q-card",{staticClass:" text-white",staticStyle:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)",width:"100%",height:"100%"},attrs:{center:""}},[a("q-card-section",{attrs:{center:""}},[a("div",{staticClass:"text-h6"},[t._v("Featured Item:")]),a("q-img",{staticStyle:{"border-radius":"50%",transition:"transform 0.2s",height:"60%",width:"60%","box-shadow":"rgba(0, 0, 0, 0.1) 0px 4px 12px"},attrs:{src:t.getImage(t.featuredFood.item.detail.image)}}),a("div",{staticClass:"text-subtitle2"},[t._v("Quantity Sold: "+t._s(t.featuredFood.quantity)+" Total Revenue: "+t._s(t.featuredFood.net_price))])],1)],1)],1),a("div",{staticClass:"q-pa-md col-6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"q-pa-md col-6"},[a("q-card",{staticClass:"my-card text-white",staticStyle:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Total Revenue Generated:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              R.s "+t._s(t.getTotal("net_price"))+"\n            ")])],1)],1),a("div",{staticClass:"q-pa-md col-6"},[a("q-card",{staticClass:"my-card text-white",staticStyle:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Total Gross Amount:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              R.s "+t._s(t.getTotal("gross_price"))+"\n            ")])],1)],1),a("div",{staticClass:"q-pa-md col-6"},[a("q-card",{staticClass:"my-card text-white",staticStyle:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Total Quantity Sold:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(parseInt(t.getTotal("quantity")))+"\n            ")])],1)],1),a("div",{staticClass:"q-pa-md col-6"},[a("q-card",{staticClass:"my-card text-white",staticStyle:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Total Unique Items:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              "+t._s(t.foodItems.length)+"\n            ")])],1)],1),a("div",{staticClass:"q-pa-md col-6"},[a("q-card",{staticClass:"my-card text-white",staticStyle:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Total Tax Generated:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              R.s "+t._s(t.getTotal("tax_amount"))+"\n            ")])],1)],1),a("div",{staticClass:"q-pa-md col-6"},[a("q-card",{staticClass:"my-card text-white",staticStyle:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Total Discount Amount:")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("\n              R.s "+t._s(t.getTotal("discount_amount"))+"\n            ")])],1)],1)])])])])},Um=[],Vm={data(){return{foodItems:{},featuredFood:{}}},created(){this.getFoodSummary()},methods:{async getFoodSummary(){this.$q.loading.show({spinner:zs["a"],spinnerColor:"white",spinnerSize:60,message:"Fetching data. Please Wait !",messageColor:"white"}),await Tt({item:0}).then((({data:t})=>{this.foodItems=t,this.$q.loading.hide(),this.getFeaturedFood()})).catch((t=>{this.$q.loading.hide(),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response})}))},getFeaturedFood(){const t=this.foodItems.map((({quantity:t})=>t));var e=Math.max(...t);this.foodItems.forEach((t=>{t.quantity==e&&(0===Object.keys(this.featuredFood).length||this.featuredFood.net_price<t.net_price)&&(this.featuredFood=t)}))},getTotal(t){let e=0;return this.foodItems.forEach((a=>{e+=parseFloat(a[t])})),e.toFixed(2)},getImage(t){return"http://192.168.18.77:8000"+t}}},Wm=Vm,Ym=(a("cd8b"),Object(p["a"])(Wm,zm,Um,!1,null,"767555ec",null)),Gm=Ym.exports;kt()(Ym,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QImg:oe["a"]});var Hm={components:{FoodSummary:wm,BeverageSummary:Fm,AddonsSummary:Em,OverallReport:Lm,ReportSummary:Gm},data(){return{tab:"Food",tabs:"all"}}},Jm=Hm,Km=(a("1427"),Object(p["a"])(Jm,gm,_m,!1,null,null,null)),Zm=Km.exports;kt()(Km,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var Xm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-pa-sm"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-10"},[a("span",{staticClass:"font-bold text-md q-mb-none q-pa-lg"},[t._v("Edit Menu")])])])])],1)]),a("div",{staticClass:"q-pa-sm"},[a("MenuList",{on:{emitAllItems:t.emitAllItems,emitFoodItem:t.emitFoodItem,emitBeverageItem:t.emitBeverageItem,emitAddonsItem:t.emitAddonsItem,emitInventoryItem:t.emitInventoryItem}})],1),a("div",[a("MergeOrderList",{attrs:{orders:t.orders,selectedTable:t.selectedTable,selectedOrder:t.selectedOrder,flag:t.flag}})],1),a("q-dialog",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-pt-none q-pa-xs q-pl-md"},[a("div",{staticClass:"text-h6"},[t._v("\n                    Choose Table to Add Selected Item\n                ")]),a("div",{staticClass:"row q-col-gutter-md"},t._l(t.orders.merged_table.table,(function(e){return a("div",{key:e.id,staticClass:"col-6"},[a("TableChip",{attrs:{table:e},on:{tab:t.tab,numba:t.numba}})],1)})),0)])],1)],1)],1)},tu=[],eu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-col-gutter-sm q-pa-md"},t._l(t.storeOrders,(function(e){return a("div",{key:e.table,staticClass:"col-6"},[a("span",[a("q-badge",{attrs:{outline:"",color:"red"}},[t._v("\n                    "+t._s(e.table_no)+"\n                ")])],1),a("q-markup-table",{staticClass:"q-mt-xs",staticStyle:{height:"274px","overflow-x":"scroll"},attrs:{flat:"",bordered:""}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Item")]),a("th",{staticClass:"text-center"},[t._v("Unit Price")]),a("th",{staticClass:"text-left"},[t._v("Qty.")]),a("th",{staticClass:"text-center"},[t._v("Total")]),a("th",{staticClass:"text-center"},[t._v("Action")])])]),a("tbody",[t._l(e.orderfood.filter((function(t){return!(0===t.quantity)})),(function(s){return a("tr",{key:s.id},[a("td",{staticClass:"text-left"},[t._v(t._s(s.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(s.price))]),a("td",{staticClass:"text-center"},[a("q-input",{staticStyle:{"max-width":"60px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-1",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"food.quantity"}})],1),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(s.quantity*s.price))]),a("td",{staticClass:"text-center"},[a("q-btn",{staticClass:"q-mt-sm",attrs:{size:"0.7rem",title:"Remove",round:"",color:"red-5",icon:"delete"},on:{click:function(a){return t.deleteFood(s.name,e.table_no)}}})],1)])})),t._l(e.orderbeverage.filter((function(t){return!(0===t.quantity)})),(function(s){return a("tr",{key:s.id},[a("td",{staticClass:"text-left"},[t._v(t._s(s.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(s.price))]),a("td",{staticClass:"text-center"},[a("q-input",{staticStyle:{"max-width":"60px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-1",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"beverage.quantity"}})],1),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(s.quantity*s.price))]),a("td",{staticClass:"text-center"},[a("q-btn",{attrs:{size:"0.7rem",title:"Remove",round:"",color:"red-5",icon:"delete"},on:{click:function(a){return t.deleteBeverage(s.name,e.table_no)}}})],1)])})),t._l(e.orderinventoryitem.filter((function(t){return!(0===t.quantity)})),(function(s){return a("tr",{key:s.id},[a("td",{staticClass:"text-left"},[t._v(t._s(s.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(s.price))]),a("td",{staticClass:"text-center"},[a("q-input",{staticStyle:{"max-width":"60px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-1",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"inventory.quantity"}})],1),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(s.quantity*s.price))]),a("td",{staticClass:"text-center"},[a("q-btn",{attrs:{size:"0.7rem",title:"Remove",round:"",color:"red-5",icon:"delete"},on:{click:function(a){return t.removeInventory(s.name,e.table_no)}}})],1)])})),t._l(e.orderaddons.filter((function(t){return!(0===t.quantity)})),(function(s){return a("tr",{key:s.id},[a("td",{staticClass:"text-left"},[t._v(t._s(s.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(s.price))]),a("td",{staticClass:"text-center"},[a("q-input",{staticStyle:{"max-width":"60px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-1",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"addons.quantity"}})],1),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(s.price*s.quantity))]),a("td",{staticClass:"text-center"},[a("q-btn",{attrs:{size:"0.7rem",title:"Remove",round:"",color:"red-5",icon:"delete"},on:{click:function(a){return t.deleteAddons(s.name,e.table_no)}}})],1)])})),t._l(e.order_combo_offer.filter((function(t){return!(0===t.quantity)})),(function(s){return a("tr",{key:s.id},[a("td",{staticClass:"text-left"},[t._v(t._s(s.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(s.price))]),a("td",{staticClass:"text-center"},[a("q-input",{staticStyle:{"max-width":"60px"},attrs:{type:"number",filled:"",dense:"","bg-color":"orange-1",min:"0"},on:{input:t.onInput,keydown:t.keyHandler},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"combo.quantity"}})],1),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(s.price*s.quantity))]),a("td",{staticClass:"text-center"},[a("q-btn",{attrs:{size:"0.7rem",title:"Remove",round:"",color:"red-5",icon:"delete"},on:{click:function(a){return t.deleteCombo(s.name,e.table_no)}}})],1)])}))],2)])],1)})),0),a("div",[a("q-btn",{staticClass:"bg-confirm q-ml-md q-mb-sm",attrs:{label:"Update",padding:"xs xs",push:"",dense:"",size:".8rem"},on:{click:function(e){return t.update()}}})],1)])},au=[],su={props:{orders:{required:!0},selectedTable:{},selectedOrder:{},flag:{}},created(){this.reformed()},data:()=>({model:null,storeOrders:[],beverage:[],food:[],addons:[],combo:[],inven:[]}),methods:{onInput(t){this.model=t,t&&t<0&&(this.model=0)},keyHandler(t){this.model<2&&"ArrowDown"===t.key&&t.preventDefault(),"-"===t.key&&t.preventDefault()},reformed(){this.orders.order.map((t=>{t.orderfood.map((t=>{this.food.push({price:t.food.detail.price,food:t.food.id,name:t.food.detail.name,quantity:t.quantity})})),t.orderbeverage.map((t=>{this.beverage.push({price:t.beverage.detail.price,name:t.beverage.detail.name,beverage:t.beverage.id,quantity:t.quantity})})),t.orderaddons.map((t=>{this.addons.push({price:t.addons.detail.price,name:t.addons.detail.name,addons:t.addons.id,quantity:t.quantity})})),t.order_combo_offer.map((t=>{this.combo.push({price:t.combo_offer.price,name:t.combo_offer.name,item:t.combo_offer.id,quantity:t.quantity})})),t.order_inventory_item.map((t=>{this.inven.push({price:t.inventory_item.sales_price,name:t.inventory_item.item.name,inventory_item:t.inventory_item.id,quantity:t.quantity})})),this.storeOrders.push({table_no:t.table.number,table:t.table.id,orderfood:this.food,orderbeverage:this.beverage,orderaddons:this.addons,order_combo_offer:this.combo,orderinventoryitem:this.inven}),this.food=[],this.beverage=[],this.addons=[],this.combo=[],this.inven=[]}))},async update(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:60,message:"Updating. Please Wait !",messageColor:"white"});const t={edit_data:this.storeOrders};try{await ut(this.orders.id,t);this.$q.loading.hide(),this.$q.notify({message:"Order Updated",color:"green-5",icon:"info"}),this.closeWindow()}catch(e){this.$q.loading.hide(),this.$q.notify({message:"Unable to Update Order",color:"red-5",icon:"warning"})}},deleteFood(t,e){this.storeOrders.forEach((a=>{if(a.table_no===e){var s=a.orderfood.findIndex((e=>e.name===t));-1!==s&&a.orderfood.splice(s,1)}}))},deleteBeverage(t,e){this.storeOrders.forEach((a=>{if(a.table_no===e){var s=a.orderbeverage.findIndex((e=>e.name===t));-1!==s&&a.orderbeverage.splice(s,1)}}))},deleteAddons(t,e){this.storeOrders.forEach((a=>{if(a.table_no===e){var s=a.orderaddons.findIndex((e=>e.name===t));-1!==s&&a.orderaddons.splice(s,1)}}))},deleteCombo(t,e){this.storeOrders.forEach((a=>{if(a.table_no===e){var s=a.order_combo_offer.findIndex((e=>e.name===t));-1!==s&&a.order_combo_offer.splice(s,1)}}))},removeInventory(t,e){this.storeOrders.forEach((a=>{if(a.table_no===e){var s=a.orderinventoryitem.findIndex((e=>e.name===t));-1!==s&&a.orderinventoryitem.splice(s,1)}}))},async closeWindow(){await this.delay(1e3),window.close()},delay(t){return new Promise((e=>setTimeout(e,t)))}},watch:{flag(){this.storeOrders.forEach((t=>{if(t.table===this.selectedTable.id){if(this.selectedOrder.id.startsWith("F"))if(0===t.orderfood.length)t.orderfood.push({price:this.selectedOrder.price,food:this.selectedOrder.id,name:this.selectedOrder.name,quantity:1});else{let e=t.orderfood.find((t=>t.food===this.selectedOrder.id));e?t.orderfood.forEach((t=>{t.food===this.selectedOrder.id&&(t.quantity=t.quantity+1)})):t.orderfood.push({price:this.selectedOrder.price,food:this.selectedOrder.id,name:this.selectedOrder.name,quantity:1})}if(this.selectedOrder.id.startsWith("B"))if(0===t.orderbeverage.length)t.orderbeverage.push({price:this.selectedOrder.price,beverage:this.selectedOrder.id,name:this.selectedOrder.name,quantity:1});else{let e=t.orderbeverage.find((t=>t.beverage===this.selectedOrder.id));e?t.orderbeverage.forEach((t=>{t.beverage===this.selectedOrder.id&&(t.quantity=t.quantity+1)})):t.orderbeverage.push({price:this.selectedOrder.price,beverage:this.selectedOrder.id,name:this.selectedOrder.name,quantity:1})}if(this.selectedOrder.id.startsWith("A"))if(0===t.orderaddons.length)t.orderaddons.push({price:this.selectedOrder.price,addons:this.selectedOrder.id,name:this.selectedOrder.name,quantity:1});else{let e=t.orderaddons.find((t=>t.addons===this.selectedOrder.id));e?t.orderaddons.forEach((t=>{t.addons===this.selectedOrder.id&&(t.quantity=t.quantity+1)})):t.orderaddons.push({price:this.selectedOrder.price,addons:this.selectedOrder.id,name:this.selectedOrder.name,quantity:1})}if(this.selectedOrder.id.startsWith("C"))if(0===t.order_combo_offer.length)t.order_combo_offer.push({price:this.selectedOrder.price,item:this.selectedOrder.id,name:this.selectedOrder.name,quantity:1});else{let e=t.order_combo_offer.find((t=>t.item===this.selectedOrder.id));e?t.order_combo_offer.forEach((t=>{t.item===this.selectedOrder.id&&(t.quantity=t.quantity+1)})):t.order_combo_offer.push({price:this.selectedOrder.price,item:this.selectedOrder.id,name:this.selectedOrder.name,quantity:1})}if(this.selectedOrder.id.startsWith("I"))if(0===t.orderinventoryitem.length)t.orderinventoryitem.push({price:this.selectedOrder.price,inventory_item:this.selectedOrder.id,name:this.selectedOrder.name,quantity:1});else{let e=t.orderinventoryitem.find((t=>t.inventory_item===this.selectedOrder.id));e?t.orderinventoryitem.forEach((t=>{t.inventory_item===this.selectedOrder.id&&(t.quantity=t.quantity+1)})):t.orderinventoryitem.push({price:this.selectedOrder.price,inventory_item:this.selectedOrder.id,name:this.selectedOrder.name,quantity:1})}}}))}}},nu=su,iu=Object(p["a"])(nu,eu,au,!1,null,null,null),ou=iu.exports;kt()(iu,"components",{QBadge:ke["a"],QMarkupTable:Te["a"],QInput:Et["a"],QBtn:xt["a"]});var ru={components:{MenuList:eo,MergeOrderList:ou,TableChip:ks},data:()=>({orders:{},selectedOrder:{},show:!1,selectedTable:{},flag:0}),created(){this.fetchMergedOrder()},methods:{async fetchMergedOrder(){const t=await mt(this.$route.query.merge_id);this.orders=t.data},emitAllItems(t){this.selectedOrder=t,this.show=!0},emitAddonsItem(t){this.selectedOrder=t,this.show=!0},emitFoodItem(t){this.selectedOrder=t,this.show=!0},emitBeverageItem(t){this.selectedOrder=t,this.show=!0},emitInventoryItem(t){this.selectedOrder=t,this.show=!0},tab(t){this.selectedTable=t,this.show=!1},numba(){this.flag=this.flag+1}}},lu=ru,cu=Object(p["a"])(lu,Xm,tu,!1,null,null,null),du=cu.exports;kt()(cu,"components",{QCard:Ct["a"],QDialog:Nt["a"],QCardSection:Rt["a"]});var mu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 q-pl-sm"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",{staticClass:"q-pa-none q-mb-sm"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12 q-mb-lg"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Complementary Report")])]),a("div",{staticClass:"col-12"},[a("DateBar",{on:{thisFiscalYear:t.thisFiscalYear,dateType:t.dateType,startDateBs:t.startDateBs,endDateBs:t.endDateBs,fromDate:t.fromDate,toDate:t.toDate}})],1),a("div",{staticClass:"col-4"},[a("q-select",{attrs:{options:t.itemsOptions,"transition-show":"flip-up","transition-hide":"flip-down",filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",label:"Item Type","emit-value":"","map-options":""},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1),a("div",{staticClass:"col-4"},[a("p",[a("q-btn",{staticClass:"bg-delete q-mt-xs",attrs:{push:"",size:"0.8rem",label:"Show Report"},on:{click:function(e){return t.fetchReport()}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.item,expression:"item"}],staticClass:"bg-confirm q-mt-xs q-ml-sm",attrs:{push:"",size:"0.8rem",label:"Clear"},on:{click:function(e){return t.clear()}}})],1)])])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-none q-mt-md"},[0===t.items.length?a("div",{staticClass:"text-center font-bold"},[t._v("\n                No Rows To Display\n            ")]):a("div",[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",label:"Export Excel",size:".8rem"},on:{click:function(e){return t.generateExcel("tbl","food-report")}}})],1)]),a("q-markup-table",{attrs:{separator:t.separator,id:"tbl"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Complementary Item")]),a("th",{staticClass:"text-center"},[t._v("Date")]),a("th",{staticClass:"text-center"},[t._v("Quantity")]),a("th",{staticClass:"text-center"},[t._v("Total Amount")])])]),a("tbody",[t._l(t.items,(function(e){return a("tr",{key:e.id},[a("td",{on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.name))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.date))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v("\n                                "+t._s(e.quantity.reduce((function(t,e){return t+parseInt(e)}),0))+"\n                            ")]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v("\n                                Rs. "+t._s(e.total_price.reduce((function(t,e){return t+parseFloat(e)}),0))+"\n                            ")])])})),a("tr",[a("td"),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.quantityTotal))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.amtTotal))])])],2)])],1)])],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("ComplementaryDetail",{attrs:{pass:t.pass}})],1)],1)},uu=[],pu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",[a("div",{staticClass:"col-12 q-mb-sm"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Detail View ("+t._s(t.pass.name)+")")])])]),a("q-separator"),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","detail- food-report")}}})],1)]),a("p",{staticClass:"q-mb-none"},[a("span",[t._v("\n                        Ordered Date: "+t._s(t.pass.date)+"\n                    ")])])]),a("div",{staticClass:"col-12"},[a("q-markup-table",{staticClass:"q-mt-md",attrs:{separator:t.separator,id:"tbl1"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Invoice No.")]),a("th",[t._v("Quantity")]),a("th",[t._v("Purchase Price")]),a("th",[t._v("Total Amount")])])]),a("tbody",t._l(t.pass.payment,(function(e,s){return a("tr",{key:s},[a("td",[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.showInvoice(e.id)}}},[t._v("\n                                    "+t._s(e.id)+"\n                                ")])]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.quantity[s]))]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.price))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.pass.total_price[s]))])])})),0),a("tbody",[a("tr",[a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.total.toFixed(2)))])])])])],1)])]),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.single,callback:function(e){t.single=e},expression:"single"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId}})],1)],1)},hu=[],vu={components:{FinalBill:St},props:{pass:{required:!0}},data:()=>({merge:!1,single:!1,propSingleId:"",propMergeId:"",separator:"vertical"}),computed:{total(){return this.pass.total_price.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{showInvoice(t){this.propSingleId=t,this.single=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},bu=vu,gu=Object(p["a"])(bu,pu,hu,!1,null,null,null),_u=gu.exports;kt()(gu,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSeparator:Bt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var fu={components:{DateBar:wl,ComplementaryDetail:_u},data:()=>({itemsOptions:[{label:"Food",value:"food"},{label:"Beverage",value:"beverage"},{value:"addons",label:"Addons"}],item:"",separator:"vertical",complementaryReport:{},items:[],totalQuantity:[],totalAmount:[],pass:{},dialog:!1}),computed:{quantityTotal(){return this.totalQuantity=[],this.items.forEach((t=>{this.totalQuantity.push(t.quantity)})),this.totalQuantity=this.totalQuantity.flat(1/0),this.totalQuantity.reduce(((t,e)=>t+e),0)},amtTotal(){return this.totalAmount=[],this.items.forEach((t=>{this.totalAmount.push(t.total_price)})),this.totalAmount=this.totalAmount.flat(1/0),this.totalAmount.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{clear(){this.item=""},detail(t){this.pass=t,this.dialog=!0},async fetchReport(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"});try{const t=await Nl({to_date:this.to_date,from_date:this.from_date,item:this.item});this.complementaryReport=t.data,this.$q.loading.hide(),this.changeFormat()}catch(error){this.$q.loading.hide()}},changeFormat(){this.items=[],this.item?this.complementaryReport&&(this.complementaryReport.food?this.items.push(...this.complementaryReport.food):this.complementaryReport.beverage?this.items.push(...this.complementaryReport.beverage):this.complementaryReport.addons&&this.items.push(...this.complementaryReport.addons)):this.complementaryReport&&(this.complementaryReport.food&&this.items.push(...this.complementaryReport.food),this.complementaryReport.beverage&&this.items.push(...this.complementaryReport.beverage),this.complementaryReport.addons&&this.items.push(...this.complementaryReport.addons)),this.recreateApi()},recreateApi(){this.items.forEach((t=>{t.payment||(t.payment={})})),this.items=Object.values(this.items.reduce(((t,e)=>{const a=`${e.id+e.date.substring(0,10)}`;return t[a]||(t[a]={id:e.id,name:e.name,price:e.price,quantity:[],total_price:[],payment:[],date:e.date.substring(0,10)}),t[a].quantity.push(e.quantity),t[a].total_price.push(e.total_price),t[a].payment.push(e.payment),t}),{}))},fetchDate(){const t=new Date,e=t.getFullYear();let a=t.getMonth()+1,s=t.getDate(),n=null,i=null;n=s<10?"0"+s:s,i=a<10?"0"+a:a;const o=e+"-"+i+"-"+n;this.to_date=o,this.from_date=o},toDate(t){this.to_date=t},fromDate(t){this.from_date=t},thisFiscalYear(t){this.thisFYear=!!t},startDateBs(t){this.start_date_bs=t},endDateBs(t){this.end_date_bs=t},dateType(t){this.date_type=t}}},yu=fu,qu=Object(p["a"])(yu,mu,uu,!1,null,null,null),Cu=qu.exports;kt()(qu,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSelect:ae["a"],QBtn:xt["a"],QSeparator:Bt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var xu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 q-pl-sm"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",{staticClass:"q-pa-none q-mb-sm"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12 q-mb-lg"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Refund Report")])]),a("div",{staticClass:"col-12"},[a("DateBar",{on:{thisFiscalYear:t.thisFiscalYear,dateType:t.dateType,startDateBs:t.startDateBs,endDateBs:t.endDateBs,fromDate:t.fromDate,toDate:t.toDate}})],1),a("div",{staticClass:"col-4"},[a("p",[a("q-btn",{staticClass:"bg-delete q-mt-xs",attrs:{push:"",size:"0.8rem",label:"Show Report"},on:{click:function(e){return t.fetchReport()}}}),a("q-btn",{staticClass:"bg-confirm q-mt-xs q-ml-sm",attrs:{push:"",size:"0.8rem",label:"Clear"},on:{click:function(e){return t.clear()}}})],1)])])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-none q-mt-md"},[0===t.items.length?a("div",{staticClass:"text-center font-bold"},[t._v("\n                No Rows To Display\n            ")]):a("div",[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:".8rem",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","food-report")}}})],1)]),a("q-markup-table",{attrs:{separator:t.separator,id:"tbl"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Complementary Item")]),a("th",{staticClass:"text-center"},[t._v("Date")]),a("th",{staticClass:"text-center"},[t._v("Quantity")]),a("th",{staticClass:"text-center"},[t._v("Total Amount")])])]),a("tbody",[t._l(t.items,(function(e){return a("tr",{key:e.id},[a("td",{on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.name))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.date))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v("\n                                "+t._s(e.quantity.reduce((function(t,e){return t+parseInt(e)}),0))+"\n                            ")]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v("\n                                Rs. "+t._s(e.amount.reduce((function(t,e){return t+parseFloat(e)}),0))+"\n                            ")])])})),a("tr",[a("td"),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.quantityTotal))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.amtTotal))])])],2)])],1)]),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("RefundDetail",{attrs:{pass:t.pass}})],1)],1)],1)},wu=[],ku=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",[a("div",{staticClass:"col-12 q-mb-sm"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Detail View ("+t._s(t.pass.name)+")")])])]),a("q-separator"),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","detail- food-report")}}})],1)]),a("p",{staticClass:"q-mb-none"},[a("span",[t._v("\n                        Ordered Date: "+t._s(t.pass.date)+"\n                    ")])])]),a("div",{staticClass:"col-12"},[a("q-markup-table",{staticClass:"q-mt-md",attrs:{separator:t.separator,id:"tbl1"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Invoice No.")]),a("th",[t._v("Quantity")]),a("th",[t._v("Total Amount")])])]),a("tbody",t._l(t.pass.payment,(function(e,s){return a("tr",{key:s},[a("td",[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.showInvoice(e.id)}}},[t._v("\n                                    "+t._s(e.id)+"\n                                ")])]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.quantity[s]))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.pass.amount[s]))])])})),0),a("tbody",[a("tr",[a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"},[t._v("Total")])])])])],1)])]),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.single,callback:function(e){t.single=e},expression:"single"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId}})],1)],1)},Iu=[],Su={components:{FinalBill:St},props:{pass:{required:!0}},data:()=>({merge:!1,single:!1,propSingleId:"",propMergeId:"",separator:"vertical"}),methods:{showInvoice(t){this.propSingleId=t,this.single=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},Du=Su,Au=Object(p["a"])(Du,ku,Iu,!1,null,null,null),Fu=Au.exports;kt()(Au,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSeparator:Bt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var Tu={components:{DateBar:wl,RefundDetail:Fu},data:()=>({separator:"vertical",refundReport:{},items:[],totalQuantity:[],totalAmount:[],pass:{},dialog:!1}),computed:{quantityTotal(){return this.totalQuantity=[],this.items.forEach((t=>{this.totalQuantity.push(t.quantity)})),this.totalQuantity=this.totalQuantity.flat(1/0),this.totalQuantity.reduce(((t,e)=>t+e),0)},amtTotal(){return this.totalAmount=[],this.items.forEach((t=>{this.totalAmount.push(t.amount)})),this.totalAmount=this.totalAmount.flat(1/0),this.totalAmount.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{async fetchReport(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"});try{const t=await jl({to_date:this.to_date,from_date:this.from_date});this.refundReport=t.data,this.$q.loading.hide(),this.changeFormat()}catch(error){this.$q.loading.hide()}},detail(t){this.pass=t,this.dialog=!0},changeFormat(){this.items=[],this.refundReport&&(this.refundReport.food&&this.items.push(...this.refundReport.food),this.refundReport.beverage&&this.items.push(...this.refundReport.beverage),this.refundReport.addons&&this.items.push(...this.refundReport.addons)),this.recreateApi()},recreateApi(){this.items.forEach((t=>{t.merge_payment&&(t.payment=t.merge_payment)})),this.items=Object.values(this.items.reduce(((t,e)=>{const a=`${e.id+e.date.substring(0,10)}`;return t[a]||(t[a]={id:e.id,name:e.name,price:e.price,quantity:[],amount:[],payment:[],date:e.date.substring(0,10)}),t[a].quantity.push(e.quantity),t[a].amount.push(e.amount),t[a].payment.push(e.payment),t}),{}))},fetchDate(){const t=new Date,e=t.getFullYear();let a=t.getMonth()+1,s=t.getDate(),n=null,i=null;n=s<10?"0"+s:s,i=a<10?"0"+a:a;const o=e+"-"+i+"-"+n;this.to_date=o,this.from_date=o},toDate(t){this.to_date=t},fromDate(t){this.from_date=t},thisFiscalYear(t){this.thisFYear=!!t},startDateBs(t){this.start_date_bs=t},endDateBs(t){this.end_date_bs=t},dateType(t){this.date_type=t}}},Ou=Tu,$u=Object(p["a"])(Ou,xu,wu,!1,null,null,null),Qu=$u.exports;kt()($u,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QBtn:xt["a"],QSeparator:Bt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var Mu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Combo Menu")])])])])],1)]),a("q-card",{staticClass:"q-mt-lg"},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"add",label:"Add Combo Items"}}),a("q-tab",{attrs:{name:"list",label:"Combo Item List"}})],1),a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"add"}},[a("AddComboItem")],1),a("q-tab-panel",{attrs:{name:"list"}},[a("ComboItemList")],1)],1)],1)],1)},Eu=[],Ru=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{ref:""},[a("ValidationObserver",{ref:""},[a("div",{staticClass:"row q-col-gutter-md q-mt-sm"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-md-4"},[a("validation-provider",{attrs:{name:"Combo Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Combo Name",dense:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-md-4"},[a("validation-provider",{attrs:{name:"Price",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Price",dense:""},model:{value:t.price,callback:function(e){t.price=t._n(e)},expression:"price"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-md-4"},[a("validation-provider",{attrs:{name:"Description",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Description",dense:""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-md-4"},[a("validation-provider",{attrs:{name:"Valid From Date",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Valid From",type:"date"},model:{value:t.start,callback:function(e){t.start=e},expression:"start"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-md-4"},[a("validation-provider",{attrs:{name:"Valid Till Date",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Valid Till",type:"date"},model:{value:t.end,callback:function(e){t.end=e},expression:"end"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-4"},[a("q-file",{attrs:{filled:"",dense:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Upload Image"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"image"}})]},proxy:!0}]),model:{value:t.image,callback:function(e){t.image=e},expression:"image"}})],1),a("div",{staticClass:"col-12 q-ml-xs q-mt-md",staticStyle:{"border-top":"1px solid rgba(0, 0, 0, 0.12)"}})])]),a("div",{staticClass:"col-md-4"},[a("validation-provider",{attrs:{name:"Item Type",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-select",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",options:t.typeOptions,label:"Item Type",dense:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-md-4"},[a("validation-provider",{attrs:{name:"Item Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Item Name",dense:"",readonly:""},on:{click:function(e){return t.selectItem()}},model:{value:t.itemName,callback:function(e){t.itemName=e},expression:"itemName"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-md-4"},[a("validation-provider",{attrs:{name:"Quantity",rules:"required|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Quantity",dense:""},model:{value:t.qty,callback:function(e){t.qty=t._n(e)},expression:"qty"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-md-12 q-mb-sm"},[a("q-btn",{staticClass:"float-right",attrs:{push:"",size:".8rem",color:"orange-3",label:"Add To Combo"},on:{click:function(e){return t.itemArray()}}})],1)])])],1),a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-4"},[a("q-markup-table",{staticClass:"q-mt-sm"},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Food")]),a("th",{staticClass:"text-left"},[t._v("Qty.")]),a("th",{staticClass:"text-center"},[t._v("Action")])])]),a("tbody",t._l(t.foods,(function(e,s){return a("tr",{key:e.food},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[a("q-btn",{attrs:{size:"0.7rem",title:"Remove",round:"",color:"red-5",icon:"delete"},on:{click:function(e){return t.deleteFood(s)}}})],1)])})),0)])],1),a("div",{staticClass:"col-lg-4 col-md-4 col-sm-4"},[a("q-markup-table",{staticClass:"q-mt-sm"},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Beverage")]),a("th",{staticClass:"text-left"},[t._v("Qty.")]),a("th",{staticClass:"text-center"},[t._v("Action")])])]),a("tbody",t._l(t.beverages,(function(e,s){return a("tr",{key:e.beverage},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[a("q-btn",{attrs:{size:"0.7rem",title:"Remove",round:"",color:"red-5",icon:"delete"},on:{click:function(e){return t.deleteBeverage(s)}}})],1)])})),0)])],1),a("div",{staticClass:"col-4"},[a("q-markup-table",{staticClass:"q-mt-sm"},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Addons")]),a("th",{staticClass:"text-left"},[t._v("Qty.")]),a("th",{staticClass:"text-center"},[t._v("Action")])])]),a("tbody",t._l(t.addons,(function(e,s){return a("tr",{key:e.addons},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.quantity))]),a("td",{staticClass:"text-center"},[a("q-btn",{attrs:{size:"0.7rem",title:"Remove",round:"",color:"red-5",icon:"delete"},on:{click:function(e){return t.deleteAddons(s)}}})],1)])})),0)])],1)]),t.edit?a("q-btn",{staticClass:"bg-delete float-right q-my-md q-mb-md",attrs:{size:".8rem",push:"",label:"Update"},on:{click:function(e){return t.update()}}}):a("q-btn",{staticClass:"bg-delete float-right q-mt-md q-mb-md",attrs:{size:".8rem",push:"",label:"Done"},on:{click:function(e){return t.addCombo()}}}),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.foodDialog,callback:function(e){t.foodDialog=e},expression:"foodDialog"}},[a("FoodItemList",{attrs:{select:!0},on:{exitFood:t.exitFood}})],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.beverageDialog,callback:function(e){t.beverageDialog=e},expression:"beverageDialog"}},[a("BeverageItemList",{attrs:{select:!0},on:{exitBeverage:t.exitBeverage}})],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.addonsDialog,callback:function(e){t.addonsDialog=e},expression:"addonsDialog"}},[a("ListAddons",{attrs:{select:!0},on:{exitAddons:t.exitAddons}})],1)],1)},Bu=[];Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"})),Object(Zt["c"])("min",k()(k()({},Xt["f"]),{},{message:"{_field_} may not be less than {length} numbers"})),Object(Zt["c"])("max",k()(k()({},Xt["e"]),{},{message:"{_field_} may not be greater than {length} numbers"}));var Pu={components:{ValidationProvider:Zt["b"],ValidationObserver:Zt["a"],FoodItemList:Me,BeverageItemList:ha,ListAddons:wd},props:{comb:{},edit:{}},created(){this.checkEdit()},data(){return{separator:"vertical",name:"",type:"",description:"",typeOptions:["Food","Beverage","Addons"],itemName:"",foods:[],beverages:[],addons:[],price:null,image:null,end:null,start:null,itemId:null,qty:null,foodDialog:!1,beverageDialog:!1,addonsDialog:!1}},methods:{checkEdit(){this.edit&&(this.name=this.comb.name,this.price=this.comb.price,this.description=this.comb.description,this.start=this.comb.start.substring(0,10),this.end=this.comb.end.substring(0,10),this.comb.image&&(this.image=""),this.comb.combo_food.map((t=>{this.foods.push({name:t.food.name,quantity:t.quantity,food:t.food.id})})),this.comb.combo_beverage.map((t=>{this.beverages.push({name:t.beverage.name,quantity:t.quantity,beverage:t.beverage.id})})),this.comb.combo_addons.map((t=>{this.addons.push({name:t.addons.name,quantity:t.quantity,addons:t.addons.id})})))},selectItem(){"Food"===this.type?this.foodDialog=!0:"Beverage"===this.type?this.beverageDialog=!0:"Addons"===this.type?this.addonsDialog=!0:this.$q.notify({color:"red-5",message:"Select Item Type First !",icon:"warning"})},exitFood(t){this.itemId=t.id,this.itemName=t.name,this.foodDialog=!1},exitBeverage(t){this.itemId=t.id,this.itemName=t.name,this.beverageDialog=!1},exitAddons(t){this.itemId=t.id,this.itemName=t.name,this.addonsDialog=!1},deleteFood(t){-1!==t&&this.foods.splice(t,1)},deleteAddons(t){-1!==t&&this.addons.splice(t,1)},deleteBeverage(t){-1!==t&&this.beverages.splice(t,1)},itemArray(){this.itemId.startsWith("F")?this.foods.push({name:this.itemName,food:this.itemId,quantity:this.qty}):this.itemId.startsWith("B")?this.beverages.push({name:this.itemName,beverage:this.itemId,quantity:this.qty}):this.itemId.startsWith("A")&&this.addons.push({name:this.itemName,addons:this.itemId,quantity:this.qty}),this.itemName="",this.itemId=null,this.qty=null,this.type=""},async addCombo(){this.foods.forEach((t=>{delete t.name})),this.beverages.forEach((t=>{delete t.name})),this.addons.forEach((t=>delete t.name));const t={name:this.name,image:this.image,price:this.price,start:this.start,end:this.end,description:this.description,combo_food:JSON.stringify(this.foods),combo_beverage:JSON.stringify(this.beverages),combo_addons:JSON.stringify(this.addons)},e=new FormData;Object.keys(t).forEach((a=>{e.append(a,t[a])}));try{await Bi(e),this.$q.notify({message:"Successfully Added",color:"green-5",icon:"warning"}),this.name="",this.image=null,this.price=null,this.start=null,this.end=null,this.foods=[],this.beverages=[],this.addons=[],this.description=""}catch(a){}},async update(){this.foods.forEach((t=>{delete t.name})),this.beverages.forEach((t=>{delete t.name})),this.addons.forEach((t=>delete t.name));const t={name:this.name,image:this.image,price:this.price,start:this.start,end:this.end,description:this.description,combo_food:JSON.stringify(this.foods),combo_beverage:JSON.stringify(this.beverages),combo_addons:JSON.stringify(this.addons)},e=new FormData;Object.keys(t).forEach((a=>{e.append(a,t[a])}));try{await Ni(this.comb.id,e),this.$q.notify({message:"Successfully Updated",color:"green-5",icon:"warning"}),this.name="",this.image=null,this.price=null,this.start=null,this.end=null,this.foods=[],this.beverages=[],this.addons=[],this.description="",this.$emit("closeForm")}catch(a){}}}},Nu=Pu,ju=Object(p["a"])(Nu,Ru,Bu,!1,null,null,null),Lu=ju.exports;kt()(ju,"components",{QInput:Et["a"],QFile:se["a"],QIcon:ne["a"],QSelect:ae["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var zu=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-mt-md"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"col-8"},[s("q-markup-table",{attrs:{flat:"",bordered:""}},[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[t._v("Image")]),s("th",{staticClass:"text-left"},[t._v("Name")]),s("th",{staticClass:"text-left"},[t._v("Price")]),s("th",{staticClass:"text-center"},[t._v("Action")])])]),s("tbody",t._l(t.comboItem,(function(e){return s("tr",{key:e.id},[e.image?s("td",[s("img",{staticClass:"order-img",staticStyle:{height:"4.0625em",width:"4.0625em"},attrs:{src:e.image}})]):s("td",[s("q-avatar",{staticClass:"order-avatar",attrs:{color:"blue","text-color":"white",size:"4.0625em"}},[t._v(t._s(e.name[0].toUpperCase()))])],1),s("td",{staticClass:"text-left"},[t._v(t._s(e.name))]),s("td",{staticClass:"text-left"},[t._v("Rs "+t._s(e.price))]),s("td",{staticClass:"text-center"},[s("span",[s("q-btn",{staticClass:"bg-payment",attrs:{title:"View Detail",padding:"xs xs","text-color":"black",icon:"visibility"},on:{click:function(a){return t.showDetail(e)}}})],1),s("span",{staticClass:"q-ml-sm"},[s("q-btn",{staticClass:"bg-confirm",attrs:{title:"edit",padding:"xs xs","text-color":"black",icon:"edit"},on:{click:function(a){return t.update(e)}}})],1)])])})),0)]),s("div",{staticClass:"q-pt-md q-mb-sm"},[s("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1),s("div",{staticClass:"col-4"},[s("q-img",{attrs:{src:a("eb3b")}})],1)]),s("q-dialog",{attrs:{"full-width":""},model:{value:t.add,callback:function(e){t.add=e},expression:"add"}},[s("q-card",[s("q-card-section",{staticClass:"row items-center q-pb-none q-mb-md"},[s("h6",{staticClass:"q-ma-none"},[t._v("Edit Combo Details")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),s("q-separator"),s("q-card-section",[s("AddComboItem",{attrs:{comb:t.comb,edit:!0},on:{closeForm:t.closeForm}})],1)],1)],1),s("q-dialog",{attrs:{medium:""},model:{value:t.detail,callback:function(e){t.detail=e},expression:"detail"}},[s("DetailComboItem",{attrs:{propCombo:t.propCombo}})],1)],1)},Uu=[],Vu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticStyle:{"background-color":"white"}},[t.propCombo.image?a("q-img",{staticStyle:{height:"200px",width:"400px"},attrs:{src:t.propCombo.image}}):a("q-avatar",{staticClass:"order-avatar",staticStyle:{height:"200px",width:"400px"},attrs:{color:"pink","text-color":"white",size:"15em"}},[t._v(t._s(t.propCombo.name[0].toUpperCase()))]),a("q-card-section",[a("div",{staticClass:"text-h5"},[t._v("\n            "+t._s(t.propCombo.name)+"\n        ")]),a("p",{staticClass:"q-mt-sm q-pa-none q-mb-none"},[a("span",{staticStyle:{color:"indianred"}},[t._v(t._s(t.propCombo.description))])])]),a("q-separator",{staticClass:"q-mx-md q-mt-none q-pa-none q-mb-none"}),a("q-card-section",[a("div",[a("span",{staticClass:"text-h6",staticStyle:{color:"indianred"}},[t._v("Rs."+t._s(t.propCombo.price))])]),a("div",{staticClass:"text-h5 q-my-sm"},[t._v("Includes:")]),t._l(t.propCombo.combo_food,(function(e){return a("div",{key:e.id},[a("div",[t._v(t._s(e.food.name)+" - "+t._s(e.quantity)+" ")])])})),t._l(t.propCombo.combo_beverage,(function(e){return a("div",{key:e.id},[a("div",[t._v(t._s(e.beverage.name)+" - "+t._s(e.quantity)+" ")])])})),t._l(t.propCombo.combo_addons,(function(e){return a("div",{key:e.id},[a("div",[t._v(t._s(e.addons.name)+" - "+t._s(e.quantity)+" ")])])}))],2)],1)},Wu=[],Yu={props:{propCombo:{required:!0}}},Gu=Yu,Hu=Object(p["a"])(Gu,Vu,Wu,!1,null,null,null),Ju=Hu.exports;kt()(Hu,"components",{QCard:Ct["a"],QImg:oe["a"],QAvatar:xe["a"],QCardSection:Rt["a"],QSeparator:Bt["a"]});var Ku={data(){return{last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:7},comboItem:{},search:"",add:!1,comb:{},del:!1,deleteId:"",propCombo:{},detail:!1}},created(){this.fetchComboItem()},activated(){this.fetchComboItem()},methods:{fetchComboItem:async function(){const{page:t,itemsPerPage:e}=this.options;try{const a=await Pi({page:t,page_size:e,search:this.search});this.comboItem=a.data.combo_offer.data,this.current_page=a.data.combo_offer.meta.current_page,this.previous_page=a.data.combo_offer.meta.previous_page,this.last_page=a.data.combo_offer.meta.last_page,this.next_page=a.data.combo_offer.meta.next_page}catch(a){}},update:function(t){this.comb=t,this.add=!0},closeForm(){this.add=!1,this.fetchComboItem()},showDetail(t){this.propCombo=t,this.detail=!0}},watch:{current_page(){this.options.page=this.current_page,this.fetchComboItem()},search(){this.fetchComboItem()}},components:{DetailComboItem:Ju,AddComboItem:Lu}},Zu=Ku,Xu=Object(p["a"])(Zu,zu,Uu,!1,null,null,null),tp=Xu.exports;kt()(Xu,"components",{QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QAvatar:xe["a"],QBtn:xt["a"],QPagination:Oe["a"],QImg:oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QSeparator:Bt["a"]}),kt()(Xu,"directives",{ClosePopup:le["a"]});var ep={data(){return{tab:"add"}},components:{AddComboItem:Lu,ComboItemList:tp}},ap=ep,sp=Object(p["a"])(ap,Mu,Eu,!1,null,null,null),np=sp.exports;kt()(sp,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var ip=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 q-pl-sm"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",{staticClass:"q-pa-none q-mb-sm"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12 q-mb-lg"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Combo Sales Report")])]),a("div",{staticClass:"col-12"},[a("DateBar",{attrs:{checkFiscalYearBoolean:t.checkFiscalYearBoolean},on:{thisFiscalYear:t.thisFiscalYear,dateType:t.dateType,startDateBs:t.startDateBs,endDateBs:t.endDateBs,fromDate:t.fromDate,toDate:t.toDate}})],1),a("div",{staticClass:"col-12"},[a("q-btn",{staticClass:"bg-delete",attrs:{push:"",size:"0.8rem",label:"Show Report"},on:{click:function(e){return t.fetchReport()}}})],1)])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-none q-mt-md"},[0===t.comboReport.length?a("div",{staticClass:"text-center font-bold"},[t._v("\n                No Rows To Display\n            ")]):a("div",[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",size:".8rem",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","combo-report")}}})],1)]),a("q-markup-table",{attrs:{separator:t.separator,id:"tbl"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Combo Item")]),a("th",{staticClass:"text-center"},[t._v("Date")]),a("th",{staticClass:"text-center"},[t._v("Quantity")]),a("th",{staticClass:"text-center"},[t._v("Total Amount")])])]),a("tbody",[t._l(t.output,(function(e,s){return a("tr",{key:s},[a("td",{on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.combo.name))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.date))]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v("\n                                "+t._s(e.quantity.reduce((function(t,e){return t+e}),0))+"\n                            ")]),a("td",{staticClass:"text-center",on:{click:function(a){return t.detail(e)}}},[t._v("Rs. "+t._s(e.subtotal.reduce((function(t,e){return parseFloat(t)+parseFloat(e)}),0).toFixed(2)))])])})),a("tr",[a("td"),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.calculateQuantity))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.calculateSubTotal.toFixed(2)))])])],2)])],1)])],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("ComboDetail",{attrs:{pass:t.pass}})],1)],1)},op=[],rp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",[a("div",{staticClass:"col-12 q-mb-sm"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Detail View ("+t._s(t.pass.combo.name)+")")])])]),a("q-separator"),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",label:"Export Excel"},on:{click:function(e){return t.generateExcel("tbl","detail- food-report")}}})],1)]),a("p",{staticClass:"q-mb-none"},[a("span",{staticClass:"q-mb-sm"},[a("b",[t._v("Date: ")]),t._v(t._s(t.pass.date))])])]),a("div",{staticClass:"col-12"},[a("q-markup-table",{staticClass:"q-mt-md",attrs:{separator:t.separator,id:"tbl1"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Invoice No.")]),a("th",[t._v("Quantity")]),a("th",[t._v("Purchase Price")]),a("th",[t._v("Total Amount")])])]),a("tbody",t._l(t.pass.invoice_id,(function(e,s){return a("tr",{key:s},[a("td",[a("span",{staticStyle:{"text-decoration":"underline",color:"orange",cursor:"pointer"},on:{click:function(a){return t.showInvoice(e)}}},[t._v("\n                                    "+t._s(e)+"\n                                ")])]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.quantity[s]))]),a("td",{staticClass:"text-center"},[t._v(t._s(t.pass.combo.price))]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.pass.subtotal[s]))])])})),0),a("tbody",[a("tr",[a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"}),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v("Rs. "+t._s(t.total.toFixed(2)))])])])])],1)])]),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.single,callback:function(e){t.single=e},expression:"single"}},[a("FinalBill",{attrs:{propSingleId:t.propSingleId}})],1)],1)},lp=[],cp={components:{FinalBill:St},props:{pass:{required:!0}},created(){},data:()=>({merge:!1,single:!1,propSingleId:"",propMergeId:"",separator:"vertical"}),computed:{total(){return this.pass.subtotal.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{showInvoice(t){this.propSingleId=t,this.single=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},dp=cp,mp=Object(p["a"])(dp,rp,lp,!1,null,null,null),up=mp.exports;kt()(mp,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QSeparator:Bt["a"],QBtn:xt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var pp={components:{DateBar:wl,ComboDetail:up},data:()=>({comboReport:[],separator:"vertical",from_date:"",to_date:"",thisFYear:"",billDetail:!1,bill_detail:{},start_date_bs:"",end_date_bs:"",checkFiscalYearBoolean:!1,dataStatus:!1,from_date_all:"",to_date_all:"",output:[],totalQuantity:[],totalAmount:[],pass:{},dialog:!1}),created(){this.fetchDate()},computed:{calculateQuantity(){return this.totalQuantity=[],this.output.forEach((t=>{this.totalQuantity.push(t.quantity)})),this.totalQuantity=this.totalQuantity.flat(1/0),this.totalQuantity.reduce(((t,e)=>t+e),0)},calculateSubTotal(){return this.totalAmount=[],this.output.forEach((t=>{this.totalAmount.push(t.subtotal)})),this.totalAmount=this.totalAmount.flat(1/0),this.totalAmount.reduce(((t,e)=>parseFloat(t)+parseFloat(e)),0)}},methods:{async fetchReport(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"});try{const t=await Rl({item:4,to_date:this.to_date,from_date:this.from_date});this.comboReport=t.data,this.$q.loading.hide(),this.recreateApi()}catch(error){this.$q.loading.hide()}},fetchDate(){const t=new Date,e=t.getFullYear();let a=t.getMonth()+1,s=t.getDate(),n=null,i=null;n=s<10?"0"+s:s,i=a<10?"0"+a:a;const o=e+"-"+i+"-"+n;this.to_date=o,this.from_date=o},toDate(t){this.to_date=t},fromDate(t){this.from_date=t},thisFiscalYear(t){this.thisFYear=!!t},startDateBs(t){this.start_date_bs=t},endDateBs(t){this.end_date_bs=t},dateType(t){this.date_type=t},recreateApi(){this.comboReport.forEach((t=>{t.invoice.id=t.id})),this.output=[],this.comboReport=Object.values(this.comboReport.reduce(((t,e)=>{const a=`${e.billing_date.substring(0,10)} + ${e.billing_date_bs}`;return t[a]||(t[a]={billing_date:e.billing_date.substring(0,10),invoice:[],billing_date_bs:e.billing_date_bs}),t[a].invoice.push(e.invoice),t}),{})),this.comboReport.forEach((t=>{t.invoice.forEach((e=>{e.order?(e.order.order_combo_offer=e.order.order_combo_offer.map((a=>k()(k()({},a),{},{invoice_id:e.id,date:t.billing_date}))),this.output.push(e.order.order_combo_offer),e.order.order_combo_offer=[]):e.merged_order&&(e.merged_order.merge_order_combo_offer=e.merged_order.merge_order_combo_offer.map((a=>k()(k()({},a),{},{invoice_id:e.id,date:t.billing_date}))),this.output.push(e.merged_order.merge_order_combo_offer),e.merged_order.merge_orderfood=[])}))})),this.output=this.output.flat(1/0),this.duplicate()},duplicate(){this.output=Object.values(this.output.reduce(((t,e)=>{const a=`${e.date} + ${e.combo_offer.id}`;return t[a]||(t[a]={date:e.date,combo:e.combo_offer,id:[],invoice_id:[],quantity:[],subtotal:[]}),t[a].invoice_id.push(e.invoice_id),t[a].quantity.push(e.quantity),t[a].id.push(e.id),t[a].subtotal.push(e.subtotal),t}),{}))},detail(t){this.pass=t,this.dialog=!0},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()}}},hp=pp,vp=Object(p["a"])(hp,ip,op,!1,null,null,null),bp=vp.exports;kt()(vp,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QBtn:xt["a"],QSeparator:Bt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var gp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Restaurant Details")])])])])],1)]),a("q-card",{staticClass:"my-card q-mt-lg"},[a("div",{staticClass:"row q-col-gutter-x-md"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"res",label:"Restaurant"}}),a("q-tab",{attrs:{name:"emp",label:"Employee"}})],1)],1),a("div",{staticClass:"col-12"},[a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{staticClass:"q-mt-md",attrs:{name:"res"}},[a("RestaurantDetails")],1),a("q-tab-panel",{staticStyle:{padding:"4px !important"},attrs:{name:"emp"}},[a("Employee")],1)],1)],1)])])],1)},_p=[],fp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("form",[a("div",{staticClass:"row items-center"},[a("div",{staticClass:"settings_title q-my-md col-2",staticStyle:{width:"11%"}},[t._v("\n          Restaurant Profile\n        ")]),a("q-separator",{staticClass:"q-my-md col-10",staticStyle:{height:"1px"}})],1),a("ValidationObserver",{ref:"restaurantForm"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Restaurant Name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Restaurant Name",dense:""},model:{value:t.resName,callback:function(e){t.resName=e},expression:"resName"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Address",dense:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Phone Number",dense:""},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Email",rules:"email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Email",dense:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Pan Number",dense:""},model:{value:t.pan,callback:function(e){t.pan=t._n(e)},expression:"pan"}})],1)]),a("div",{staticClass:"row items-center"},[a("div",{staticClass:"settings_title q-my-md col-2",staticStyle:{width:"13%"}},[t._v("\n            Functionality Settings\n          ")]),a("q-separator",{staticClass:"q-my-md col-10",staticStyle:{height:"1px"}})],1),a("div",{staticClass:"q-col-gutter-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("q-checkbox",{attrs:{label:"Apply VAT",color:"orange"},model:{value:t.vatCheck,callback:function(e){t.vatCheck=e},expression:"vatCheck"}})],1),t.vatCheck?a("div",{staticClass:"col-2"},[a("validation-provider",{attrs:{name:"Vat",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"VAT Percentage",dense:""},model:{value:t.vat,callback:function(e){t.vat=t._n(e)},expression:"vat"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}],null,!1,4280293725)})],1):a("div",{staticClass:"col-2"},[a("q-input",{attrs:{disable:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"VAT Percentage",dense:""},model:{value:t.vat,callback:function(e){t.vat=t._n(e)},expression:"vat"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("q-checkbox",{attrs:{label:"Apply Service Charge",color:"orange"},model:{value:t.serviceChargeCheck,callback:function(e){t.serviceChargeCheck=e},expression:"serviceChargeCheck"}})],1),t.serviceChargeCheck?a("div",{staticClass:"col-3"},[a("validation-provider",{attrs:{name:"Service Charge",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Service Charge",dense:""},model:{value:t.serviceCharge,callback:function(e){t.serviceCharge=e},expression:"serviceCharge"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}],null,!1,521368469)})],1):a("div",{staticClass:"col-3"},[a("q-input",{attrs:{disable:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Service Charge Amount",dense:""},model:{value:t.serviceCharge,callback:function(e){t.serviceCharge=e},expression:"serviceCharge"}})],1),a("div",{staticClass:"col-4"},[t._v(" ")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-8"},[a("span",[a("q-checkbox",{attrs:{label:"Apply Unsettled Order Timer to Next Day",color:"orange"},model:{value:t.unsettledTimerCheck,callback:function(e){t.unsettledTimerCheck=e},expression:"unsettledTimerCheck"}})],1),a("span",{staticClass:"q-ml-xl q-mr-xl",staticStyle:{"vertical-align":"middle"}},[t._v("|")]),a("span",{staticStyle:{"vertical-align":"middle"}},[t._v(" Add Custom Timer for Unsettled Order")])]),a("div",{staticClass:"col-4"},[t.unsettledTimerCheck?a("span",[a("div",{staticClass:"q-gutter-md row items-start"},[a("q-input",{attrs:{disable:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Days",dense:"",type:"number",min:"0",max:"30",step:"1",autocomplete:"off",value:"0"},model:{value:t.days,callback:function(e){t.days=e},expression:"days"}}),a("q-input",{attrs:{disable:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Hours",dense:"",type:"number",min:"-1",max:"24",step:"1",autocomplete:"off",value:"0"},model:{value:t.hours,callback:function(e){t.hours=e},expression:"hours"}}),a("q-input",{attrs:{disable:"",filled:"",standout:" bg-orange-3","bg-color":"orange-2",label:"Minutes",dense:"",type:"number",min:"-1",max:"60",step:"1",autocomplete:"off",value:"0"},model:{value:t.minutes,callback:function(e){t.minutes=e},expression:"minutes"}})],1)]):a("span",[a("validation-provider",{attrs:{name:"Service Charge",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("div",{staticClass:"q-gutter-md row items-start"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Days",dense:"",type:"number",min:"0",max:"30",step:"1",autocomplete:"off",value:"0"},model:{value:t.days,callback:function(e){t.days=e},expression:"days"}}),a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Hours",dense:"",type:"number",min:"-1",max:"24",step:"1",autocomplete:"off",value:"0"},model:{value:t.hours,callback:function(e){t.hours=e},expression:"hours"}}),a("q-input",{attrs:{filled:"",standout:" bg-orange-3","bg-color":"orange-2",label:"Minutes",dense:"",type:"number",min:"-1",max:"60",step:"1",autocomplete:"off",value:"0"},model:{value:t.minutes,callback:function(e){t.minutes=e},expression:"minutes"}})],1),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}],null,!1,3582523257)})],1)])]),a("div",{staticClass:"row"},[a("q-checkbox",{attrs:{label:"Display Tax Included Price in Menu",color:"orange"},model:{value:t.menuCheckThis,callback:function(e){t.menuCheckThis=e},expression:"menuCheckThis"}})],1)])])],1)]),a("p",{staticClass:"q-mt-md q-mb-none"},[t.check?a("q-btn",{attrs:{"text-color":"black",label:"Update",color:"orange-3",push:""},on:{click:function(e){return t.updateRes()}}}):a("q-btn",{attrs:{"text-color":"black",label:"Save",color:"orange-3",push:""},on:{click:function(e){return t.add()}}})],1)])},yp=[];a("3e8f");Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("email",k()(k()({},Xt["d"]),{},{message:"{_field_} must be in correct format"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"}));var qp={components:{ValidationProvider:Zt["b"],ValidationObserver:Zt["a"]},data(){return{days:0,hours:0,minutes:0,resName:"",email:"",number:null,address:"",pan:null,vat:null,serviceCharge:null,vatCheck:!1,serviceChargeCheck:!1,unsettledTimer:0,unsettledTimerCheck:!0,menuCheckThis:!1,scFromRestaurant:null,vatFromRestaurant:null,hourFromRes:null,minuteFromRes:null,dayFromRes:null,check:!1}},props:{edit:{required:!0},propFood:{required:!0}},created(){this.fetchRestaurant()},watch:{serviceChargeCheck(){this.serviceChargeCheck||(this.serviceCharge=this.scFromRestaurant)},vatCheck(){this.vatCheck||(this.vat=this.vatFromRestaurant)},hours(){this.hours>23&&(this.days+=parseFloat(1),this.hours=parseFloat(0))},minutes(){this.minutes>59&&(this.hours+=parseFloat(1),this.minutes=parseFloat(0))},unsettledTimerCheck(){this.unsettledTimerCheck&&(this.hours=this.hourFromRes,this.minutes=this.minuteFromRes,this.dayFromRes?this.days=this.dayFromRes:this.days=0)}},methods:{fetchRestaurant(){$().then((t=>{this.resName=t.data.name,this.address=t.data.address,this.email=t.data.email,this.number=t.data.phone_number,this.pan=t.data.vat_number,this.vat=t.data.vat,this.serviceCharge=t.data.service_charge,this.scFromRestaurant=t.data.service_charge,this.vatFromRestaurant=t.data.vat,t.data&&(this.check=!0),R().then((t=>{if(this.serviceChargeCheck=t.data.enable_service_charge,this.vatCheck=t.data.enable_vat,this.unsettledTimerCheck=t.data.unsettled_next_day,this.unsettledTimer=t.data.unsettled_timer,this.unsettledTimer)if(this.unsettledTimer<60)this.minutes=this.unsettledTimer;else{const t=Math.floor(this.unsettledTimer/60);this.days=Math.floor(t/24),this.dayFromRes=this.dayFromRes,this.hours=t%24,this.hourFromRes=this.hours,this.minutes=this.unsettledTimer%60,this.minuteFromRes=this.minutes}this.menuCheckThis=t.data.show_tax_included_price})).catch((t=>{this.addSettings()}))})).catch((t=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"No Restaurant Registered!"})}))},addSettings(){var t={enable_vat:this.vatCheck,enable_service_charge:this.serviceChargeCheck,unsettled_timer:this.unsettledTimer,unsettled_next_day:this.unsettledTimerCheck,show_tax_included_price:this.menuCheckThis};E(t).then((t=>{this.serviceChargeCheck=t.data.enable_service_charge,this.vatCheck=t.data.enable_vat,this.unsettledTimerCheck=t.data.unsettled_next_day,this.unsettledTimer=t.data.unsettled_timer,this.menuCheckThis=t.data.show_tax_included_price})).catch((({res1:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Add"})}))},add(){this.$refs.restaurantForm.validate().then((t=>{if(t){var e={name:this.resName,email:this.email,address:this.address,phone_number:this.number,vat:this.vat,vat_number:this.pan,service_charge:this.serviceCharge};M(e).then((t=>{this.resName=t.data.data.name,this.email=t.data.data.email,this.address=t.data.data.address,this.number=t.data.data.phone_number,this.vat=t.data.data.vat,this.pan=t.data.data.vat_number,this.serviceCharge=t.data.data.service_charge,this.scFromRestaurant=t.data.data.service_charge,this.vatFromRestaurant=t.data.data.vat,this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Details Successfully Added"}),this.$emit("closeForm"),this.addSettings()})).catch((({res:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Add"})}))}}))},updateResSettings(){if(!this.unsettledTimerCheck){var t=parseFloat(24*this.days*60)+parseFloat(60*this.hours)+parseFloat(this.minutes);if(0===t)return void this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unsettled Timer cannot be 0"});this.unsettledTimer=t}var e={enable_vat:this.vatCheck,enable_service_charge:this.serviceChargeCheck,unsettled_timer:this.unsettledTimer,unsettled_next_day:this.unsettledTimerCheck,show_tax_included_price:this.menuCheckThis};B(e).then((t=>{if(this.serviceChargeCheck=t.data.enable_service_charge,this.vatCheck=t.data.enable_vat,this.unsettledTimerCheck=t.data.unsettled_next_day,this.unsettledTimer=t.data.unsettled_timer,this.unsettledTimer)if(this.unsettledTimer<60)this.minutes=this.unsettledTimer;else{const t=Math.floor(this.unsettledTimer/60);this.days=Math.floor(t/24),this.dayFromRes=this.dayFromRes,this.hours=t%24,this.hourFromRes=this.hours,this.minutes=this.unsettledTimer%60,this.minuteFromRes=this.minutes}this.menuCheckThis=t.data.show_tax_included_price})).catch((t=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:t.response.data[0]})}))},updateRes:function(){this.$refs.restaurantForm.validate().then((t=>{if(t){var e={name:this.resName,email:this.email,address:this.address,phone_number:this.number,vat:this.vat,vat_number:this.pan,service_charge:this.serviceCharge};Q(e).then((t=>{this.resName=t.data.data.name,this.email=t.data.data.email,this.address=t.data.data.address,this.number=t.data.data.phone_number,this.vat=t.data.data.vat,this.pan=t.data.data.vat_number,this.serviceCharge=t.data.data.service_charge,this.scFromRestaurant=t.data.data.service_charge,this.vatFromRestaurant=t.data.data.vat,this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Profile Successfully Updated"}),this.$emit("closeForm"),this.updateResSettings()})).catch((({res:t})=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Update"})}))}}))}}},Cp=qp,xp=Object(p["a"])(Cp,fp,yp,!1,null,"34345058",null),wp=xp.exports;kt()(xp,"components",{QSeparator:Bt["a"],QInput:Et["a"],QCheckbox:ie["a"],QBtn:xt["a"]});var kp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-md-12"},[a("q-tabs",{staticClass:"onGoingSub",attrs:{dense:"",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"add",label:"Add Employee"}}),a("q-tab",{attrs:{name:"list",label:"Employee List"}})],1)],1)]),a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"add"}},[a("AddEmployee")],1),a("q-tab-panel",{attrs:{name:"list"}},[a("EmployeeList")],1)],1)],1)},Ip=[],Sp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-pt-md"},[a("form",{ref:"custForm"},[a("ValidationObserver",{ref:"customerForm"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Role",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-select",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Role",dense:"","emit-value":"","map-options":"",options:t.roleOptions},model:{value:t.employee.role,callback:function(e){t.$set(t.employee,"role",e)},expression:"employee.role"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Username",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Username",dense:""},model:{value:t.employee.username,callback:function(e){t.$set(t.employee,"username",e)},expression:"employee.username"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Email",dense:""},model:{value:t.employee.email,callback:function(e){t.$set(t.employee,"email",e)},expression:"employee.email"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-6"},[a("validation-provider",{attrs:{name:"Password",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Password",dense:"",type:"password",type:t.isPwd?"password":"text"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}],null,!0),model:{value:t.employee.password,callback:function(e){t.$set(t.employee,"password",e)},expression:"employee.password"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1)])]),a("p",[t.edit?a("q-btn",{staticClass:"q-mt-md",attrs:{push:"",size:".8rem","text-color":"black",label:"Update",type:"button",color:"orange-3"},on:{click:function(e){return t.update()}}}):a("q-btn",{staticClass:"q-mt-md",attrs:{push:"",size:".8rem ","text-color":"black",label:"Add",type:"button",color:"orange-3"},on:{click:function(e){return t.add()}}})],1)],1)])])},Dp=[];Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"})),Object(Zt["c"])("digits",k()(k()({},Xt["b"]),{},{message:"{_field_} must contain exactly {length} numbers"})),Object(Zt["c"])("email",k()(k()({},Xt["d"]),{},{message:"{_field_} must be in email format"}));var Ap={components:{ValidationProvider:Zt["b"],ValidationObserver:Zt["a"]},data(){return{employee:{username:"",role:null,email:"",password:""},roleOptions:[{label:"Admin",value:1},{label:"Cashier/Waiter",value:2}],isPwd:!0}},props:{sender:{required:!0},edit:{required:!0},addCust:{}},methods:{async add(){if(await this.$refs.customerForm.validate())try{await P(this.employee),this.$q.notify({message:"Employee Added",color:"green-5",icon:"info"}),this.employee={username:"",role:null,email:"",password:""},this.addCust&&this.$emit("closeAdd")}catch(error){this.$q.notify({message:"Unable to Add Cutomer",color:"red-5",icon:"warning"})}}}},Fp=Ap,Tp=Object(p["a"])(Fp,Sp,Dp,!1,null,null,null),Op=Tp.exports;kt()(Tp,"components",{QSelect:ae["a"],QInput:Et["a"],QIcon:ne["a"],QBtn:xt["a"]});var $p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-pt-md"},[a("div",{staticClass:"col-6"},[a("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),a("div",{staticClass:"q-mt-md"},[a("q-markup-table",{attrs:{flat:"",bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-center"},[t._v("Select")]),a("th",{staticClass:"text-center"},[t._v("Username")]),a("th",{staticClass:"text-center"},[t._v("Role")]),a("th",{staticClass:"text-center"},[t._v("Email")]),a("th",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}]},[t._v("Status")])])]),a("tbody",t._l(t.employee,(function(e){return a("tr",{key:e.id},[a("td",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-center"},[a("q-checkbox",{on:{input:function(a){return t.sendEmployee(e)}},model:{value:e.choose,callback:function(a){t.$set(e,"choose",a)},expression:"emp.choose"}})],1),a("td",{staticClass:"text-center"},[t._v(t._s(e.username))]),1===e.role?a("td",{staticClass:"text-center"},[t._v("Admin")]):2===e.role?a("td",{staticClass:"text-center"},[t._v("Cashier/Waiter")]):a("td",{staticClass:"text-center"},[t._v("Others")]),a("td",{staticClass:"text-center"},[t._v(t._s(e.email))]),1!==e.role?a("td",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"text-center"},[a("q-toggle",{attrs:{color:"orange-3"},on:{input:function(a){return t.deactivateEmp(e)}},model:{value:e.empStatus,callback:function(a){t.$set(e,"empStatus",a)},expression:"emp.empStatus"}})],1):a("td",{directives:[{name:"show",rawName:"v-show",value:!t.select,expression:"!select"}],staticClass:"text-center"})])})),0)]),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1)])},Qp=[],Mp={created(){this.fetchEmployee()},activated(){this.fetchEmployee()},props:{select:{}},data:()=>({employee:[],sender:{},search:"",last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:7}}),methods:{async fetchEmployee(){const{page:t,itemsPerPage:e}=this.options,a=await N({search:this.search,page_size:e,page:t});this.employee=a.data.users.data,this.current_page=a.data.users.meta.current_page,this.previous_page=a.data.users.meta.previous_page,this.last_page=a.data.users.meta.last_page,this.next_page=a.data.users.meta.next_page,this.employee=this.employee.map((t=>k()(k()({},t),{},{choose:!1,empStatus:!1}))),this.employee.forEach((t=>{1===t.status?t.empStatus=!0:t.empStatus=!1}))},update(t){this.sender=t,this.status=!0},closeForm(){this.status=!1,this.fetchEmployee()},sendEmployee(t){this.$emit("selectedEmployee",t)},async deactivateEmp(t){if(t.empStatus)var e={status:1};else e={status:2};try{await j(t.id,e);this.$q.notify({message:"Staff Updated",color:"green-5",icon:"info"})}catch(error){this.$q.notify({message:"Error While Updating",color:"red-5",icon:"warning"})}}},watch:{search(){this.fetchEmployee()},current_page(){this.options.page=this.current_page,this.fetchEmployee()}}},Ep=Mp,Rp=Object(p["a"])(Ep,$p,Qp,!1,null,null,null),Bp=Rp.exports;kt()(Rp,"components",{QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QCheckbox:ie["a"],QToggle:$e["a"],QPagination:Oe["a"]});var Pp={components:{AddEmployee:Op,EmployeeList:Bp},data(){return{tab:"add"}}},Np=Pp,jp=Object(p["a"])(Np,kp,Ip,!1,null,null,null),Lp=jp.exports;kt()(jp,"components",{QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var zp={components:{RestaurantDetails:wp,Employee:Lp},methods:{},data:()=>({tab:"res"})},Up=zp,Vp=Object(p["a"])(Up,gp,_p,!1,null,null,null),Wp=Vp.exports;kt()(Vp,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var Yp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-lg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("q-card",{staticClass:"q-pa-sm title-card"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Waste Management")])])])])],1)]),a("q-card",{staticClass:"q-mt-lg"},[a("q-tabs",{staticClass:"text-grey q-mb-md",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"add",label:"Add Waste"}}),a("q-tab",{attrs:{name:"list",label:"Waste List"}})],1),a("q-tab-panels",{attrs:{animated:"","keep-alive":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"add"}},[a("AddWaste")],1),a("q-tab-panel",{attrs:{name:"list"}},[a("WasteList")],1)],1)],1)],1)},Gp=[],Hp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-pt-md"},[a("div",{staticClass:"col-6"},[a("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),a("div",{staticClass:"q-mt-md"},[a("q-markup-table",{attrs:{flat:"",bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Item")]),a("th",{staticClass:"text-left"},[t._v("Quantity")]),a("th",{staticClass:"text-left"},[t._v("Unit")]),a("th",{staticClass:"text-left"},[t._v("Wasted By")]),a("th",{directives:[{name:"show",rawName:"v-show",value:1===t.$store.state.user.user.role,expression:"$store.state.user.user.role === 1"}]},[t._v("Action")])])]),a("tbody",t._l(t.wasteList,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.inventory_item.item.name))]),a("td",[t._v(t._s(e.waste_quantity))]),a("td",[t._v(t._s(e.inventory_item.item.unit.unit))]),a("td",[t._v(t._s(e.wasted_by))]),a("td",{directives:[{name:"show",rawName:"v-show",value:1===t.$store.state.user.user.role,expression:"$store.state.user.user.role === 1"}],staticClass:"text-center"},[a("q-btn",{staticClass:"bg-confirm",attrs:{title:"edit",padding:"xs xs","text-color":"black",icon:"edit"},on:{click:function(a){return t.updateWaste(e)}}})],1)])})),0)]),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{staticClass:"text-black",attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1),a("q-dialog",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-sm"},[a("h6",{staticClass:"q-ma-none"},[t._v("Edit Waste")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("AddWaste",{attrs:{edit:!0,sender:t.sender},on:{closeForm:t.closeForm}})],1)],1)],1)],1)])},Jp=[],Kp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-form",[a("ValidationObserver",{ref:"wasteForm"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-4"},[a("validation-provider",{attrs:{name:"Inventory Item",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-standout","bg-color":"orange-2",label:"Select Item",dense:"",readonly:""},on:{click:function(e){t.itemDialog=!0}},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.itemDialog,callback:function(e){t.itemDialog=e},expression:"itemDialog"}},[a("InventoryList",{staticClass:"q-pa-md",attrs:{select:!0},on:{selectedItem:t.selectedItem}})],1),a("div",{staticClass:"col-4"},[a("validation-provider",{attrs:{name:"Quantity",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-standout","bg-color":"orange-2",label:"Waste Quantity",dense:""},model:{value:t.waste.waste_quantity,callback:function(e){t.$set(t.waste,"waste_quantity",t._n(e))},expression:"waste.waste_quantity"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-standout","bg-color":"orange-2",label:"Unit",dense:"",readonly:""},model:{value:t.waste.unit,callback:function(e){t.$set(t.waste,"unit",e)},expression:"waste.unit"}})],1),a("div",{staticClass:"col-4"},[a("validation-provider",{attrs:{name:"Wasted By",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{attrs:{filled:"",standout:"bg-standout","bg-color":"orange-2",label:"Wasted By",dense:""},model:{value:t.waste.wasted_by,callback:function(e){t.$set(t.waste,"wasted_by",e)},expression:"waste.wasted_by"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1)],1)]),a("div",{staticClass:"col-12 q-mb-none"},[t.edit?a("q-btn",{staticClass:"q-mt-md",attrs:{push:"","text-color":"black",size:"0.8rem",label:"Update",type:"button",color:"orange-3"},on:{click:function(e){return t.updateWaste()}}}):a("q-btn",{staticClass:"q-mt-md",attrs:{color:"orange-3",push:"","text-color":"black",size:"0.8rem",label:"Add",type:"button"},on:{click:t.add}})],1)],1)},Zp=[],Xp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"col-6"},[t._v("\n       \n    ")])]),a("div",{staticClass:"q-mt-md"},[a("q-markup-table",{attrs:{flat:"",bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-center"},[t._v("Select")]),a("th",{staticClass:"text-left"},[t._v("Name")]),a("th",[t._v("Unit")])])]),a("tbody",t._l(t.inventoryStorage,(function(e){return a("tr",{key:e.id},[a("th",{directives:[{name:"show",rawName:"v-show",value:t.select,expression:"select"}],staticClass:"text-center"},[a("q-checkbox",{attrs:{color:"orange-3"},on:{input:function(a){return t.selectItem(e)}},model:{value:e.choice,callback:function(a){t.$set(e,"choice",a)},expression:"storage.choice"}})],1),a("td",{staticClass:"text-left"},[t._v(t._s(e.name))]),e.unit?a("td",{staticClass:"text-center"},[t._v(t._s(e.unit))]):a("td",{staticClass:"text-center"},[t._v(" - ")])])})),0)])],1),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{staticClass:"text-black",attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1),a("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-up"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("StockOut",{attrs:{stock:t.stock},on:{closeForm:t.closeForm}})],1),a("q-dialog",{attrs:{"full-height":"","full-width":"","transition-show":"slide-up","transition-hide":"slide-up"},model:{value:t.display,callback:function(e){t.display=e},expression:"display"}},[a("StockDetails",{attrs:{detail:t.detail}})],1)],1)},th=[],eh={components:{StockDetails:Cr,StockOut:Dr},data(){return{last_page:0,current_page:0,next_page:0,previous_page:0,options:{page:1},inventoryStorage:[],inventory:[],show:!1,display:!1,food:[],beverage:[],addons:[],search:"",stock:{},detail:{}}},props:{select:{required:!0}},created(){this.fetchInventory()},watch:{current_page(){this.options.page=this.current_page,1!==this.current_page&&this.fetchInventory()},search(){this.fetchInventory()}},methods:{async fetchInventory(){this.inventoryStorage=[];var{page:t}=this.options;const e=await Vi({page:t,search:this.search,page_size:20});if(e.data.inventory.data)try{this.inventory=e.data.inventory.data,this.inventory=this.inventory.map((t=>k()(k()({},t),{},{choice:!1,edit:!1,name:t.item.name,unit:t.item.unit.unit}))),this.inventoryStorage=this.inventoryStorage.concat(this.inventory),this.current_page=e.data.inventory.meta.current_page,this.previous_page=e.data.inventory.meta.previous_page,this.last_page=e.data.inventory.meta.last_page,this.next_page=e.data.inventory.meta.next_page,this.fetchFood()}catch(a){console.log(a),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:a.result.error})}},async fetchFood(){var{page:t}=this.options;const e=await Ht({page:t,search:this.search,page_size:20});if(e.data.food.data)try{this.food=e.data.food.data,this.food=this.food.map((t=>k()(k()({},t),{},{choice:!1,edit:!1}))),this.inventoryStorage=this.inventoryStorage.concat(this.food),this.current_page=e.data.food.meta.current_page,this.previous_page=e.data.food.meta.previous_page,this.last_page=e.data.food.meta.last_page,this.next_page=e.data.food.meta.next_page,this.fetchBeverage()}catch(a){console.log(a),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:a})}},async fetchBeverage(){var{page:t}=this.options;const e=await Je({page:t,search:this.search,page_size:20});if(e.data.beverage.data)try{this.beverage=e.data.beverage.data,this.beverage=this.beverage.map((t=>k()(k()({},t),{},{choice:!1,edit:!1}))),this.inventoryStorage=this.inventoryStorage.concat(this.beverage),this.current_page=e.data.beverage.meta.current_page,this.previous_page=e.data.beverage.meta.previous_page,this.last_page=e.data.beverage.meta.last_page,this.next_page=e.data.beverage.meta.next_page,this.fetchAddons()}catch(a){console.log(a),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:a})}},async fetchAddons(){var{page:t}=this.options;const e=await $i({page:t,search:this.search,page_size:20});if(e.data.addons.data)try{this.addons=e.data.addons.data,this.addons=this.addons.map((t=>k()(k()({},t),{},{choice:!1,edit:!1}))),this.inventoryStorage=this.inventoryStorage.concat(this.addons),this.current_page=e.data.addons.meta.current_page,this.previous_page=e.data.addons.meta.previous_page,this.last_page=e.data.addons.meta.last_page,this.next_page=e.data.addons.meta.next_page}catch(a){console.log(a),this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:a})}},itemDetailBtn(t){this.detail=t,this.display=!0},closeForm(){this.show=!1,this.fetchInventory()},selectItem(t){this.$emit("selectedItem",t)}}},ah=eh,sh=Object(p["a"])(ah,Xp,th,!1,null,null,null),nh=sh.exports;kt()(sh,"components",{QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QCheckbox:ie["a"],QPagination:Oe["a"],QDialog:Nt["a"]}),Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"}));var ih={data:()=>({waste:{inventory_item:null,waste_quantity:null,wasted_by:"",unit:""},item:"",itemDialog:!1}),created(){this.checkEdit()},components:{ValidationObserver:Zt["a"],ValidationProvider:Zt["b"],InventoryList:nh},props:{sender:{},edit:{}},methods:{selectedItem(t){this.item=t.name,this.waste.inventory_item=t.id,this.waste.unit=t.unit,this.itemDialog=!1},checkEdit(){this.edit&&(this.waste={inventory_item:this.sender.inventory_item.id,waste_quantity:this.sender.waste_quantity,wasted_by:this.sender.wasted_by,unit:this.sender.unit.unit},this.item=this.sender.inventory_item.item.name)},async add(){if(await this.$refs.wasteForm.validate())try{await Wr(this.waste);this.$q.notify({message:"Waste Added",color:"green-5",icon:"info"}),this.waste={inventory_item:null,waste_quantity:null,wasted_by:"",unit:""},this.item=""}catch(t){this.$q.notify({message:"Unable to Add",color:"red-5",icon:"warning"})}},async updateWaste(){if(await this.$refs.wasteForm.validate())try{await Yr(this.sender.id,this.waste);this.$q.notify({message:"Waste Updated",color:"green-5",icon:"info"}),this.waste={inventory_item:null,waste_quantity:null,unit:""},this.item="",this.$emit("closeForm")}catch(t){this.$q.notify({message:"Unable to Update",color:"red-5",icon:"warning"})}}}},oh=ih,rh=Object(p["a"])(oh,Kp,Zp,!1,null,null,null),lh=rh.exports;kt()(rh,"components",{QForm:Oa["a"],QInput:Et["a"],QDialog:Nt["a"],QBtn:xt["a"]});var ch={components:{AddWaste:lh},data:()=>({wasteList:[],sender:{},search:"",last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:8},status:!1}),activated(){this.fetchWaste()},created(){this.fetchWaste()},methods:{async fetchWaste(){const{page:t,itemsPerPage:e}=this.options,a=await Vr({search:this.search,page_size:e,page:t});this.wasteList=a.data.data,this.current_page=a.data.meta.current_page,this.previous_page=a.data.meta.previous_page,this.last_page=a.data.meta.last_page,this.next_page=a.data.meta.next_page},updateWaste(t){this.sender=t,this.status=!0},closeForm(){this.status=!1,this.fetchWaste()}},watch:{search(){this.fetchWaste()},current_page(){this.options.page=this.current_page,this.fetchWaste()}}},dh=ch,mh=Object(p["a"])(dh,Hp,Jp,!1,null,null,null),uh=mh.exports;kt()(mh,"components",{QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QBtn:xt["a"],QPagination:Oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QSeparator:Bt["a"]}),kt()(mh,"directives",{ClosePopup:le["a"]});var ph={data:()=>({tab:"add"}),components:{WasteList:uh,AddWaste:lh}},hh=ph,vh=Object(p["a"])(hh,Yp,Gp,!1,null,null,null),bh=vh.exports;kt()(vh,"components",{QPage:Qt["a"],QCard:Ct["a"],QTabs:Be["a"],QTab:Pe["a"],QTabPanels:Ne["a"],QTabPanel:je["a"]});var gh=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.record?a("div",[a("DenominationReport",{on:{goBack:t.goBack}})],1):a("div",{staticClass:"row q-mt-sm"},[a("div",{staticClass:"col-3"},[t._v("\n             \n        ")]),a("div",{staticClass:"col-6"},[a("q-card",{staticClass:"q-pa-md title-card"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-9"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-md-12"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Date",readonly:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),a("div",{staticClass:"col-md-12"},[a("q-btn",{staticClass:"bg-payment",attrs:{label:"View Report",push:"",size:"0.8rem",padding:"xs sm"},on:{click:function(e){t.record=!0}}})],1)])]),a("div",{staticClass:"col-3"},[a("q-badge",{attrs:{color:"orange-3 text-black q-mt-xs"}},[a("span",{staticClass:"float-right q-pa-sm"},[t._v("User:\n                                "+t._s(t.$store.state.user.user.user)+"\n                            ")])])],1)])])],1),a("div",{staticClass:"col-2 "},[t._v("\n            \n        ")]),a("div",{staticClass:"col-3"},[t._v("\n             \n        ")]),a("div",{staticClass:"col-6 q-mt-sm"},[a("q-card",{staticClass:"q-pa-md title-card"},[a("q-markup-table",{attrs:{separator:"vertical"}},[a("thead",[a("tr",[a("th",[t._v("Denominations")]),a("th",[t._v("Quantity")]),a("th",[t._v("Amount")])])]),0!==t.denominationList.length?a("tbody",[t._l(t.denominationList.denomination_detail,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-right"},[t._v("\n                                "+t._s(e.currency_detail.type.currency_type)+"\n                                "),e.currency_detail.type.id<13?a("span",[t._v("x")]):t._e()]),a("td",{staticClass:"text-center"},[t._v("\n                                "+t._s(e.currency_detail.count)+"\n                            ")]),a("td",{staticClass:"text-center"},[t._v("\n                                "+t._s(e.currency_detail.total)+"\n                            ")])])})),a("tr",[a("td"),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.denominationList.total_value))])])],2):a("tbody",[t._l(t.currencyList,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-right"},[t._v("\n                                "+t._s(e.currency_type)+"\n                                "),e.id<13?a("span",[t._v("x")]):t._e()]),e.id<13?a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"90px"},attrs:{"bg-color":"amber-2",dense:"",filled:"",min:"0",type:"number"},on:{input:function(a){return t.calculateAmount(e)}},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",t._n(a))},expression:"currency.quantity"}})],1):a("td"),a("td",{attrs:{align:"center"}},[a("q-input",{staticStyle:{width:"120px"},attrs:{"bg-color":"amber-2",dense:"",filled:"",min:"0",type:"number"},model:{value:e.amount,callback:function(a){t.$set(e,"amount",t._n(a))},expression:"currency.amount"}})],1)])})),a("tr",[a("td"),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.calculateTotal))])])],2)]),a("p",{staticClass:"q-ma-none q-pa-xs"},[t._v("\n                    Starting Change: 10000\n                ")]),0===t.denominationList.length?a("p",{staticClass:"q-ma-none q-pa-xs"},[t._v("\n                    Variance:\n                    "),t.totalAmount>0?a("span",[t._v(t._s(t.totalAmount-1e4))]):t._e()]):a("p",{staticClass:"q-ma-none q-pa-xs"},[t._v("\n                    Variance:\n                    "),a("span",[t._v(t._s(t.denominationList.variance))])]),0===t.denominationList.length&&t.calculateSales-(t.totalAmount-1e4)>0?a("p",{staticClass:"q-ma-none q-pa-xs"},[t._v("\n                    Missing Amount:\n                    "),t.totalAmount>0?a("span",[t._v(t._s(t.calculateSales-(t.totalAmount-1e4)))]):t._e()]):t._e(),0===t.denominationList.length&&t.calculateSales-(t.totalAmount-1e4)<0?a("p",{staticClass:"q-ma-none q-pa-xs"},[t._v("\n                    Additional Amount:\n                    "),t.totalAmount>0?a("span",[t._v(t._s(Math.abs(t.calculateSales-(t.totalAmount-1e4))))]):t._e()]):t._e(),a("p",{staticClass:"q-ma-none q-pa-xs"},[a("span",[t._v("\n                        Total Sales: "+t._s(t.calculateSales)+"\n                    ")]),a("span",{staticClass:"float-right"},[a("q-btn",{directives:[{name:"show",rawName:"v-show",value:0===t.denominationList.length,expression:"denominationList.length === 0"}],staticClass:"bg-delete",attrs:{push:"",padding:"xs sm",size:".8rem",label:"Submit"},on:{click:function(e){return t.submit()}}})],1)]),0===t.denominationList.length?a("p",{staticClass:"q-ma-none q-pa-xs"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.totalAmount>0&&t.salesTotal>t.totalAmount-1e4||t.salesTotal<t.totalAmount-1e4,expression:"totalAmount > 0 && salesTotal > (totalAmount - 10000) || salesTotal < (totalAmount - 10000)"}]},[a("q-input",{staticStyle:{width:"70%"},attrs:{label:"Description",dense:"",filled:"","bg-color":"amber-2"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)]):a("p",{staticClass:"q-ma-none q-pa-xs"},[t._v("\n                    Description: "+t._s(t.denominationList.description)+"\n                ")])],1)],1)])])},_h=[];const fh=`${A["a"]}/api/v1/denomination/`;function yh(t){return Object(D["a"])().post(fh,t)}function qh(){return Object(D["a"])().get(`${fh}currency`)}function Ch(t={}){return Object(D["a"])().get(fh,{params:t})}var xh=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 q-pl-sm"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",{staticClass:"q-pa-none q-mb-sm"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Denomination Record")]),a("span",{staticClass:"float-right"},[a("q-btn",{staticClass:"bg-delete q-ml-sm",attrs:{push:"",size:"0.8rem",icon:"reply"},on:{click:function(e){return t.returnBack()}}},[a("q-tooltip",[t._v("Go To Previous Page")])],1)],1)]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-sm q-mt-sm"},[a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"From Date",type:"date"},model:{value:t.fromDate,callback:function(e){t.fromDate=e},expression:"fromDate"}})],1),a("div",{staticClass:"col-4"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"To Date",type:"date"},model:{value:t.toDate,callback:function(e){t.toDate=e},expression:"toDate"}})],1),a("div",{staticClass:"col-4 q-mt-xs"},[a("q-btn",{staticClass:"bg-confirm",attrs:{push:"",size:"0.8rem",label:"Generate"},on:{click:function(e){return t.showReport()}}})],1)])])])]),a("q-separator"),a("q-card-section",[0!==t.denominationList.length?a("q-markup-table",{attrs:{separator:"vertical"}},[a("thead",[a("tr",[a("th",[t._v("S.N.")]),a("th",[t._v("Date")])])]),a("tbody",t._l(t.denominationList,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.detailView(e)}}},[t._v(t._s(s+1))]),a("td",{staticClass:"text-center",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.detailView(e)}}},[t._v("\n                            "+t._s(e.denomination_date.substring(0,10))+"\n                        ")])])})),0)]):t._e()],1)],1),a("q-dialog",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("DetailDenomination",{attrs:{denomination:t.denomination}})],1)],1)},wh=[],kh=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row q-mt-sm"},[a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"q-pa-md title-card"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-9"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-7"},[a("q-input",{attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",label:"Date",readonly:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)])]),a("div",{staticClass:"col-3"},[a("p",{staticClass:"q-ma-none"},[a("span",{staticClass:"float-right q-mt-sm"},[t._v("User:\n                                "+t._s(t.$store.state.user.user.user)+"\n                            ")])])])])])],1),a("div",{staticClass:"col-12 q-mt-sm"},[a("q-card",{staticClass:"q-pa-md title-card"},[a("q-markup-table",{attrs:{separator:"vertical"}},[a("thead",[a("tr",[a("th",[t._v("Denominations")]),a("th",[t._v("Quantity")]),a("th",[t._v("Amount")])])]),a("tbody",[t._l(t.denomination.denomination_detail,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-right"},[t._v("\n                                "+t._s(e.currency_detail.type.currency_type)+"\n                                "),e.currency_detail.type.id<13?a("span",[t._v("x")]):t._e()]),a("td",{staticClass:"text-center"},[t._v("\n                                "+t._s(e.currency_detail.count)+"\n                            ")]),a("td",{staticClass:"text-center"},[t._v("\n                                "+t._s(e.currency_detail.total)+"\n                            ")])])})),a("tr",[a("td"),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.denomination.total_value))])])],2)]),a("p",{staticClass:"q-ma-none q-pa-xs"},[t._v("\n                    Starting Change: 10000\n                ")]),a("p",{staticClass:"q-ma-none q-pa-xs"},[t._v("\n                    Variance:\n                    "),a("span",[t._v(t._s(t.denomination.variance))])]),t.denomination.description?a("p",[t._v("\n                    Reason for Variance: "+t._s(t.denomination.description)+"\n                ")]):t._e()],1)],1)])])},Ih=[],Sh={props:{denomination:{required:!0}},created(){this.checkDenomination()},methods:{checkDenomination(){this.date=this.denomination.denomination_date.substring(0,10)}}},Dh=Sh,Ah=Object(p["a"])(Dh,kh,Ih,!1,null,null,null),Fh=Ah.exports;kt()(Ah,"components",{QCard:Ct["a"],QInput:Et["a"],QMarkupTable:Te["a"]});var Th={data:()=>({denominationList:[],denomination:{},fromDate:null,toDate:null,status:!1}),components:{DetailDenomination:Fh},methods:{returnBack(){this.$emit("goBack")},async showReport(){const t=await Ch({from_date:this.fromDate,to_date:this.toDate});this.denominationList=t.data.data,0===this.denominationList.length&&this.$q.notify({color:"gray-5",message:"No Records Available"})},detailView(t){this.denomination=t,this.status=!0}}},Oh=Th,$h=Object(p["a"])(Oh,xh,wh,!1,null,null,null),Qh=$h.exports;kt()($h,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QBtn:xt["a"],QTooltip:we["a"],QInput:Et["a"],QSeparator:Bt["a"],QMarkupTable:Te["a"],QDialog:Nt["a"]});var Mh={data:()=>({date:null,bsDate:"",dateType:"A.D",currencyList:[],denominationList:[],salesItem:[],postArray:[],totalAmount:0,variance:null,blank:!1,salesTotal:null,description:"",record:!1}),components:{DenominationReport:Qh},created(){this.fetchList(),this.fetchDate(),this.fetchDenomination(),this.getFoodSummary()},methods:{async fetchDenomination(){const t=await Ch({today:!0});this.denominationList=t.data},async fetchList(){const t=await qh();this.currencyList=t.data,this.currencyList=this.currencyList.map((t=>k()(k()({},t),{},{quantity:null,amount:0})))},async getFoodSummary(){const t=new Date;let e=t.getDate(),a=t.getMonth()+1,s=t.getFullYear(),n=`${s}-${a}-${e}`;const i=await Tt({item:0,from_date:n});this.salesItem=i.data.report},calculateAmount(t){t.amount=t.denomination_value*t.quantity},fetchDate(){this.date=(new Date).toLocaleDateString()},goBack(){this.record=!1},async submit(){this.salesTotal===this.totalAmount-1e4&&(this.description=""),this.currencyList.forEach((t=>{if(t.amount>0)var e={type:t.id,total:t.amount,count:t.quantity};else e={type:t.id,total:null,count:null};this.postArray.push(e)}));const t={total_value:this.totalAmount,description:this.description,detail:this.postArray};try{await yh(t);this.$q.notify({message:"Submit Successful",color:"green-5",icon:"info"}),this.totalAmount=null,this.postArray=[],this.description="",this.fetchDenomination()}catch(e){this.$q.notify({message:e.response.data.non_field_errors[0]||"Unable to Submit",color:"red-5",icon:"warning"})}}},computed:{calculateTotal(){return this.totalAmount=0,this.currencyList.forEach((t=>{this.totalAmount=parseFloat(this.totalAmount)+parseFloat(t.amount)})),this.totalAmount},calculateSales(){return this.salesTotal=this.salesItem.reduce(((t,e)=>t+parseFloat(e.net_price)),0),this.salesTotal}},watch:{bsDate(){this.date=this.convertEnglishDate(this.bsDate)}}},Eh=Mh,Rh=Object(p["a"])(Eh,gh,_h,!1,null,null,null),Bh=Rh.exports;kt()(Rh,"components",{QCard:Ct["a"],QInput:Et["a"],QBtn:xt["a"],QBadge:ke["a"],QMarkupTable:Te["a"]});var Ph=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-12 q-pl-sm"},[a("q-card",{staticClass:"my-card q-pa-md"},[a("q-card-section",{staticClass:"q-pa-none q-mb-sm"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12 q-mb-lg"},[a("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Wastage Report")])]),a("div",{staticClass:"col-12"},[a("DateBar",{on:{thisFiscalYear:t.thisFiscalYear,dateType:t.dateType,startDateBs:t.startDateBs,endDateBs:t.endDateBs,fromDate:t.fromDate,toDate:t.toDate}})],1),a("div",{staticClass:"col-4"},[a("p",[a("q-btn",{staticClass:"bg-delete q-mt-xs",attrs:{push:"",size:"0.8rem",label:"Show Report"},on:{click:function(e){return t.fetchWastage()}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.item,expression:"item"}],staticClass:"bg-confirm q-mt-xs q-ml-sm",attrs:{push:"",size:"0.8rem",label:"Clear"},on:{click:function(e){return t.clear()}}})],1)])])]),a("q-separator"),a("q-card-section",{staticClass:"q-pa-none q-mt-md"},[0===t.wasteList.length?a("div",{staticClass:"text-center font-bold"},[t._v("\n                No Rows To Display\n            ")]):a("div",[a("p",[a("span",[a("q-btn",{staticClass:"bg-payment",attrs:{push:"",label:"Export Excel",size:".8rem"},on:{click:function(e){return t.generateExcel("tbl","food-report")}}})],1)]),a("q-markup-table",{attrs:{separator:"vertical",id:"tbl"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("S.N.")]),a("th",[t._v("Wasted Item")]),a("th",[t._v("Wasted By")]),a("th",[t._v("Wasted Qty.")]),a("th",[t._v("Wasted Amount")])])]),a("tbody",[t._l(t.wasteList,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.inventory_item.item.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.wasted_by))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.waste_quantity))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.waste_amount))])])})),a("tr",[a("td"),a("td"),a("td"),a("td",{staticClass:"text-center"},[t._v("Total")]),a("td",{staticClass:"text-center"},[t._v(t._s(t.calculateTotal))])])],2)])],1)])],1)],1)},Nh=[],jh={components:{DateBar:wl},data:()=>({wasteList:[],from_date:"",to_date:"",item:!1}),computed:{calculateTotal(){return this.wasteList.reduce(((t,e)=>t+parseFloat(e.waste_amount)),0)}},methods:{async fetchWastage(){this.$q.loading.show({spinner:Es["a"],spinnerColor:"white",spinnerSize:80,message:"Fetching data. Please Wait !",messageColor:"white"});try{const t=await Ll({from_date:this.from_date,to_date:this.to_date});this.wasteList=t.data.data,this.wasteList=this.wasteList.map((t=>k()(k()({},t),{},{waste_amount:t.waste_quantity*t.inventory_item.purchase_rate}))),this.$q.loading.hide()}catch(t){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:error.response.data.error}),this.$q.loading.hide()}},generateExcel(t,e=""){var a,s="application/vnd.ms-excel",n=document.getElementById(t),i=n.outerHTML.replace(/ /g,"%20");if(e=e?e+".xls":"excel_data.xls",a=document.createElement("a"),document.body.appendChild(a),navigator.msSaveOrOpenBlob){var o=new Blob(["\ufeff",i],{type:s});navigator.msSaveOrOpenBlob(o,e)}else a.href="data:"+s+", "+i,a.download=e,a.click()},fetchDate(){const t=new Date,e=t.getFullYear();let a=t.getMonth()+1,s=t.getDate(),n=null,i=null;n=s<10?"0"+s:s,i=a<10?"0"+a:a;const o=e+"-"+i+"-"+n;this.to_date=o,this.from_date=o},toDate(t){this.to_date=t},fromDate(t){this.from_date=t},thisFiscalYear(t){this.thisFYear=!!t},startDateBs(t){this.start_date_bs=t},endDateBs(t){this.end_date_bs=t},dateType(t){this.date_type=t}}},Lh=jh,zh=Object(p["a"])(Lh,Ph,Nh,!1,null,null,null),Uh=zh.exports;kt()(zh,"components",{QCard:Ct["a"],QCardSection:Rt["a"],QBtn:xt["a"],QSeparator:Bt["a"],QMarkupTable:Te["a"]});var Vh=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticClass:"q-pa-lg"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("q-card",{staticClass:"q-pa-sm",staticStyle:{"box-shadow":"none"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("span",{staticClass:"font-bold text-md q-mb-none"},[t._v("Recipe Settings")])])])])],1)]),s("div",{staticClass:"row q-col-gutter-sm"},[s("div",{staticClass:"col-12"},[s("q-card",{staticClass:"q-mt-lg q-pa-md"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-8 q-mt-sm"},[s("RecipeList")],1),s("div",{staticClass:"col-4 q-mt-xl"},[s("q-img",{staticClass:"q-ml-sm",attrs:{src:a("d7c9")}})],1)])])],1)])])},Wh=[],Yh=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("span",{staticClass:"q-mb-md pointer",on:{click:function(e){t.add=!0}}},[a("q-chip",{staticClass:"menu-chip",attrs:{color:"orange-1"}},[a("q-avatar",{staticClass:"b-r-8",attrs:{push:"",icon:"add",padding:"md md",type:"button",color:"orange-3",size:"2.5rem","text-color":"black"}}),t._v("\n                Add Recipe\n            ")],1)],1)]),a("div",{staticClass:"col-6 q-mt-xs"},[a("q-input",{ref:"search",attrs:{dense:"",filled:"",placeholder:"Search","bg-color":"orange-1",type:"search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("div",{staticClass:"col-12"},[a("q-markup-table",{attrs:{flat:"",bordered:"",separator:"vertical"}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Recipe For")]),a("th",{staticClass:"text-center"},[t._v("Price")]),a("th",{staticClass:"text-center"},[t._v("Unit")]),a("th",{staticClass:"text-center"},[t._v("Action")])])]),a("tbody",t._l(t.recipes,(function(e){return a("tr",{key:e.id},[a("td",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.item.name))]),a("td",{staticClass:"text-center",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.item.price))]),e.item.unit?a("td",{staticClass:"text-center",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.detail(e)}}},[t._v(t._s(e.item.unit))]):a("td",{staticClass:"text-center",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.detail(e)}}},[t._v("-")]),a("td",{staticClass:"text-center"},[a("span",[a("q-btn",{staticClass:"bg-confirm",attrs:{title:"edit",padding:"xs xs","text-color":"black",icon:"edit"},on:{click:function(a){return t.editRecipe(e)}}})],1)])])})),0)]),a("div",{staticClass:"q-pt-md q-mb-sm"},[a("q-pagination",{attrs:{color:"orange-4",max:t.last_page,"max-pages":5,"boundary-links":""},model:{value:t.current_page,callback:function(e){t.current_page=e},expression:"current_page"}})],1)],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.add,callback:function(e){t.add=e},expression:"add"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-md"},[a("h6",{staticClass:"q-ma-none"},[t._v("Add Recipe Details")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("AddRecipe",{on:{closeRecipe:t.closeRecipe}})],1)],1)],1),a("q-dialog",{attrs:{"full-height":"","full-width":""},model:{value:t.edit,callback:function(e){t.edit=e},expression:"edit"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none q-mb-md"},[a("h6",{staticClass:"q-ma-none"},[t._v("Edit Recipe Details")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"","text-color":"black",dense:""}})],1),a("q-separator"),a("q-card-section",[a("AddRecipe",{attrs:{rcpe:t.rcpe,edit:t.edit},on:{closeRecipe:t.closeRecipe}})],1)],1)],1),a("q-dialog",{model:{value:t.del,callback:function(e){t.del=e},expression:"del"}},[a("DeleteLayout",{on:{deleteItem:t.deleteItem}})],1),a("q-dialog",{model:{value:t.detailStatus,callback:function(e){t.detailStatus=e},expression:"detailStatus"}},[a("RecipeDetail",{attrs:{propRecipe:t.propRecipe}})],1)],1)},Gh=[];const Hh=`${A["a"]}/api/v1/inventory/recipe`;function Jh(t={}){return Object(D["a"])().get(Hh,{params:t})}function Kh(t){return Object(D["a"])().post(Hh,t)}function Zh(t){return Object(D["a"])().delete(`${Hh}/${t}`)}function Xh(t,e){return Object(D["a"])().put(`${Hh}/${t}`,e)}var tv=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-form",[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-6"},[a("q-select",{attrs:{"transition-show":"flip-up","transition-hide":"flip-down",filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"",options:t.itemOptions,label:"Item Type"},model:{value:t.itemType,callback:function(e){t.itemType=e},expression:"itemType"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{staticStyle:{cursor:"pointer"},attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Recipe For",dense:"",readonly:""},on:{click:function(e){return t.selectItem()}},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1),a("q-dialog",{model:{value:t.foodStatus,callback:function(e){t.foodStatus=e},expression:"foodStatus"}},[a("FoodItemList",{staticClass:"q-pa-md",attrs:{select:!0,recipe:!0},on:{exitFood:t.exitFood}})],1),a("q-dialog",{model:{value:t.bevStatus,callback:function(e){t.bevStatus=e},expression:"bevStatus"}},[a("BeverageItemList",{staticClass:"q-pa-md",attrs:{select:!0,recipe:!0},on:{exitBeverage:t.exitBeverage}})],1),a("q-dialog",{model:{value:t.addonsStatus,callback:function(e){t.addonsStatus=e},expression:"addonsStatus"}},[a("ListAddons",{staticClass:"q-pa-md",attrs:{select:!0,recipe:!0},on:{exitAddons:t.exitAddons}})],1),a("div",{staticClass:"col-12 q-ml-xs q-mt-md",staticStyle:{"border-top":"1px solid rgba(0, 0, 0, 0.12)"}}),t._l(t.ingredients,(function(e,s){return a("div",{key:s,staticClass:"col-12"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-5"},[a("validation-provider",{attrs:{name:"Ingredient",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.errors;return[a("q-input",{staticClass:"q-mb-sm",attrs:{standout:"bg-orange-3","bg-color":"orange-2",dense:"",filled:"",label:"Select Ingredient",readonly:""},on:{click:function(e){return t.ingredientDisplay(s)}},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"ingredient.name"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),a("q-dialog",{model:{value:t.ingredientStatus,callback:function(e){t.ingredientStatus=e},expression:"ingredientStatus"}},[a("InventoryList",{staticClass:"q-pa-md",attrs:{select:!0},on:{selectedItem:t.selectedItem}})],1),a("div",{staticClass:"col-2"},[a("validation-provider",{attrs:{name:"Quantity",rules:"required|numeric|min:1"},scopedSlots:t._u([{key:"default",fn:function(s){var n=s.errors;return[a("q-input",{attrs:{dense:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",type:"number",label:"Qty."},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",t._n(a))},expression:"ingredient.quantity"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(n[0]))])]}}],null,!0)})],1),a("div",{staticClass:"col-2"},[a("q-input",{attrs:{dense:"",filled:"",standout:"bg-orange-3","bg-color":"orange-2",label:"Unit",readonly:""},model:{value:e.unit,callback:function(a){t.$set(e,"unit",a)},expression:"ingredient.unit"}})],1),a("div",{staticClass:"col-1"},[a("q-btn",{attrs:{push:"",color:"red-5",padding:"sm sm",round:"",icon:"delete","text-color":"white"},on:{click:function(e){return t.removeItem(s)}}},[a("q-tooltip",[t._v("\n                                Remove\n                            ")])],1)],1)],1)])}))],2),a("p",{staticClass:"q-ma-none q-pt-sm "},[a("span",{staticStyle:{cursor:"pointer"},on:{click:t.addNewItem}},[a("q-chip",{ref:"addService",attrs:{size:"1rem"}},[a("q-avatar",{staticStyle:{"border-radius":"50%"},attrs:{color:"amber-6","text-color":"white",icon:"add"}}),t._v("\n                    Add New Ingredients\n                ")],1)],1)]),a("p",[t.edit?a("q-btn",{staticClass:"q-mt-md",attrs:{"text-color":"black",label:"Update",type:"button",color:"orange-3",push:"",size:"0.8rem"},on:{click:function(e){return t.update()}}}):a("q-btn",{staticClass:"q-mt-md",attrs:{"text-color":"black",label:"Done",type:"button",color:"orange-3",push:"",size:"0.8rem"},on:{click:function(e){return t.recipeAdd()}}})],1)])],1)},ev=[];Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("numeric",k()(k()({},Xt["g"]),{},{message:"{_field_} must be numbers"})),Object(Zt["c"])("min",k()(k()({},Xt["f"]),{},{message:"{_field_} may not be less than {length} numbers"}));var av={components:{ListAddons:wd,FoodItemList:Me,BeverageItemList:ha,InventoryList:Or,ValidationObserver:Zt["a"],ValidationProvider:Zt["b"]},props:{edit:{required:!0,type:Boolean},rcpe:{required:!0}},created(){this.checkEdit(),this.checkQuery()},data:()=>({ingredients:[],ingre:{},itemOptions:["Food","Beverage","Addons"],item:"",itemType:"",currentIndex:"",itemId:null,bevStatus:!1,foodStatus:!1,addonsStatus:!1,ingredientStatus:!1}),methods:{checkEdit(){this.edit&&(this.item=this.rcpe.item.name,this.itemId=this.rcpe.item.id,this.itemType=this.rcpe.item_type,this.rcpe.recipe.map((t=>{this.ingredients.push({name:t.items.item.name,inventory_item:t.items.id,quantity:t.quantity,unit:t.items.item.unit.unit})})))},checkQuery(){this.$route.query.type&&(this.itemType=this.$route.query.type),this.$route.query.id&&(this.item=this.$route.query.item,this.itemId=this.$route.query.id)},selectItem(){"Food"===this.itemType?this.foodStatus=!0:"Beverage"===this.itemType?this.bevStatus=!0:"Addons"===this.itemType?this.addonsStatus=!0:this.$q.notify({message:"No Item Type Specified",color:"red-5",icon:"warning"})},exitFood(t){this.itemId=t.id,this.item=t.name,this.foodStatus=!1},exitBeverage(t){this.itemId=t.id,this.item=t.name,this.bevStatus=!1},exitAddons(t){this.itemId=t.id,this.item=t.name,this.addonsStatus=!1},addNewItem(){this.ingredients.push(s["a"].util.extend({},this.ingre))},ingredientDisplay(t){this.ingredientStatus=!0,this.currentIndex=t},selectedItem(t){this.ingredients[this.currentIndex].name=t.item.name,this.ingredients[this.currentIndex].inventory_item=t.id,this.ingredients[this.currentIndex].unit=t.item.unit.unit,this.ingredientStatus=!1},async recipeAdd(){if(this.ingredients.forEach((t=>{delete t.name,delete t.unit})),this.itemId)if(0!==this.ingredients.length){if(this.itemId.startsWith("F"))var t={food:this.itemId,recipe:this.ingredients};else if(this.itemId.startsWith("B"))t={beverage:this.itemId,recipe:this.ingredients};else t={addons:this.itemId,recipe:this.ingredients};try{await Kh(t);this.$q.notify({color:"green-5",message:"Recipe Added",icon:"info"}),this.$emit("closeRecipe")}catch(e){this.$q.notify({color:"red-5",message:"Unable to Add Recipe",icon:"warning"})}}else this.$q.notify({message:"No Ingredients Added for Specified Recipe",color:"red-5",icon:"warning"});else this.$q.notify({message:"Recipe Name not Specified",color:"red-5",icon:"warning"})},removeItem(t){s["a"].delete(this.ingredients,t)},async update(){if(this.ingredients.forEach((t=>{delete t.name,delete t.unit})),this.itemId)if(0!==this.ingredients.length){if(this.itemId.startsWith("F"))var t={food:this.itemId,recipe:this.ingredients};else if(this.itemId.startsWith("B"))t={beverage:this.itemId,recipe:this.ingredients};else t={addons:this.itemId,recipe:this.ingredients};try{await Xh(this.rcpe.id,t);this.$q.notify({color:"green-5",message:"Recipe Updated",icon:"info"}),this.$emit("closeRecipe")}catch(e){this.$q.notify({color:"red-5",message:"Unable to Update Recipe",icon:"warning"})}}else this.$q.notify({message:"No Ingredients Added for Specified Recipe",color:"red-5",icon:"warning"});else this.$q.notify({message:"Recipe Name not Specified",color:"red-5",icon:"warning"})}}},sv=av,nv=Object(p["a"])(sv,tv,ev,!1,null,null,null),iv=nv.exports;kt()(nv,"components",{QForm:Oa["a"],QSelect:ae["a"],QInput:Et["a"],QDialog:Nt["a"],QBtn:xt["a"],QTooltip:we["a"],QChip:Ie["a"],QAvatar:xe["a"]});var ov=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticStyle:{"background-color":"white"}},[t.propRecipe.image?a("q-img",{staticStyle:{height:"200px",width:"400px"},attrs:{src:t.propRecipe.item.image}}):a("q-avatar",{staticClass:"order-avatar bg-delete",staticStyle:{height:"200px",width:"400px"},attrs:{"text-color":"white",size:"15em"}},[t._v(t._s(t.propRecipe.item.name[0].toUpperCase()))]),a("q-card-section",[a("p",{staticClass:"text-h5 q-ma-none"},[a("span",[t._v("\n                "+t._s(t.propRecipe.item.name)+"\n            ")]),a("span",{staticClass:"float-right"},[a("span",{staticClass:"text-h6",staticStyle:{color:"indianred"}},[t._v("Rs."+t._s(t.propRecipe.item.price))]),t.propRecipe.item.unit?a("span",{staticClass:"text-grey text-h6"},[t._v(" per "+t._s(t.propRecipe.item.unit.toLowerCase()))]):t._e()])])]),a("q-separator",{staticClass:"q-mx-md q-mt-none q-pa-none q-mb-none"}),a("q-card-section",[a("p",{staticClass:"text-h6 q-ma-none"},[t._v("Ingredients")]),a("p",{staticClass:"q-ma-none"},t._l(t.propRecipe.recipe,(function(e){return a("ul",{key:e.id},[a("li",[t._v("\n                "+t._s(e.quantity)+" "+t._s(e.items.item.unit.unit.toLowerCase())+" of "+t._s(e.items.item.name)+"\n            ")])])})),0)])],1)},rv=[],lv={created(){},props:{propRecipe:{required:!0}}},cv=lv,dv=Object(p["a"])(cv,ov,rv,!1,null,null,null),mv=dv.exports;kt()(dv,"components",{QCard:Ct["a"],QImg:oe["a"],QAvatar:xe["a"],QCardSection:Rt["a"],QSeparator:Bt["a"]});var uv={data(){return{last_page:"",current_page:"",next_page:"",previous_page:"",options:{page:1,itemsPerPage:7},recipes:[],search:"",add:!1,rcpe:{},propRecipe:{},edit:!1,del:!1,deleteId:null,detailStatus:!1}},created(){this.fetchRecipe(),this.checkQuery()},components:{AddRecipe:iv,DeleteLayout:_e,RecipeDetail:mv},methods:{checkQuery(){this.$route.query.id&&(this.add=!0)},async fetchRecipe(){const{page:t,itemsPerPage:e}=this.options,a=await Jh({page:t,page_size:e,search:this.search});this.recipes=a.data.data,this.recipes=this.recipes.map((t=>k()(k()({},t),{},{item:{}}))),this.recipes.forEach((t=>{t.food?t.item=t.food:t.beverage?t.item=t.beverage:t.item=t.addons})),this.current_page=a.data.meta.current_page,this.previous_page=a.data.meta.previous_page,this.last_page=a.data.meta.last_page,this.next_page=a.data.meta.next_page},detail(t){this.propRecipe=t,this.detailStatus=!0},removeRecipe(t){this.deleteId=t,this.del=!0},async deleteItem(){try{await Zh(this.deleteId),this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:"Recipe Deleted"}),this.del=!1,this.fetchRecipe()}catch(t){this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Unable to Delete Recipe"}),this.del=!1}},closeRecipe(){this.add?this.add=!1:this.edit&&(this.edit=!1),this.fetchRecipe()},editRecipe(t){this.rcpe=t,this.edit=!0}},watch:{search(){this.fetchRecipe()},current_page(){this.options.page=this.current_page,this.fetchRecipe()}}},pv=uv,hv=Object(p["a"])(pv,Yh,Gh,!1,null,null,null),vv=hv.exports;kt()(hv,"components",{QChip:Ie["a"],QAvatar:xe["a"],QInput:Et["a"],QIcon:ne["a"],QMarkupTable:Te["a"],QBtn:xt["a"],QPagination:Oe["a"],QDialog:Nt["a"],QCard:Ct["a"],QCardSection:Rt["a"],QSpace:re["a"],QSeparator:Bt["a"]}),kt()(hv,"directives",{ClosePopup:le["a"]});var bv={components:{RecipeList:vv}},gv=bv,_v=Object(p["a"])(gv,Vh,Wh,!1,null,null,null),fv=_v.exports;kt()(_v,"components",{QPage:Qt["a"],QCard:Ct["a"],QImg:oe["a"]});var yv=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row fixed-center q-mt-md"},[a("q-card",{staticClass:"my-card shadow-4 q-pa-lg"},[a("div",{staticClass:"col-md-12 text-center "}),a("div",{staticClass:"col-md-12 text-center"},[a("p",{staticClass:"font-semibold text-h5 q-mb-none q-mb-sm"},[t._v("\n        "+t._s(t.resDetail.name)+"\n      ")]),a("p",{staticClass:"font-semibold text-h7 q-mb-none"},[t._v(t._s(t.resDetail.address))])]),a("div",{staticClass:"col-md-12"},[a("q-form",{ref:"changeForm",staticClass:"q-pt-sm q-mt-md",on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null}}},[a("ValidationObserver",[a("validation-provider",{attrs:{name:"Current Password",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{staticClass:"login-input q-mt-md",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",outlined:"","lazy-rules":"",label:"Current Password",type:t.isPwd?"password":"text"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}],null,!0),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])}),a("validation-provider",{attrs:{name:"New Password",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{staticClass:"login-input q-mt-md",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",outlined:"","lazy-rules":"",label:"New Password",type:t.isNewPw?"password":"text"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isNewPw?"visibility_off":"visibility"},on:{click:function(e){t.isNewPw=!t.isNewPw}}})]},proxy:!0}],null,!0),model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])}),a("validation-provider",{attrs:{name:"New Password",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("q-input",{staticClass:"login-input q-mt-md",attrs:{filled:"",standout:"bg-orange-3","bg-color":"orange-2",dense:"","stack-label":"",outlined:"","lazy-rules":"",label:"Confirm Password",type:t.isConPw?"password":"text"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isConPw?"visibility_off":"visibility"},on:{click:function(e){t.isConPw=!t.isConPw}}})]},proxy:!0}],null,!0),model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),a("span",{staticClass:"text-red-500"},[t._v(t._s(s[0]))])]}}])})],1),a("q-btn",{staticClass:"bg-payment q-mt-md float-right",attrs:{size:"sm md",label:"Change Password",padding:"xs md",dense:"",push:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.ChangePw()},click:function(e){return t.ChangePw()}}})],1)],1)])],1)},qv=[],Cv=a("379e");Object(Zt["d"])("eager"),Object(Zt["c"])("required",k()(k()({},Xt["h"]),{},{message:"{_field_} is required"})),Object(Zt["c"])("email",k()(k()({},Xt["d"]),{},{message:"{_field_} must be a valid email"})),Object(Zt["c"])("min",k()(k()({},Xt["f"]),{},{message:"{_field_} may not be greater than {length} characters"})),Object(Zt["c"])("alpha_num",k()(k()({},Xt["a"]),{},{message:"{_field_} may only contain alphabets or numbers"}));var xv={data(){return{isPwd:!0,isNewPw:!0,isConPw:!0,confirmPassword:"",password:"",newPassword:"",resDetail:{}}},components:{ValidationObserver:Zt["a"],ValidationProvider:Zt["b"]},created(){this.fetchRestaurant()},methods:{async fetchRestaurant(){const t=await $();this.resDetail=t.data},async ChangePw(){if(this.confirmPassword===this.newPassword)if(this.newPassword===this.password)this.$q.notify({color:"red-5",textColor:"white",icon:"info",message:"New Password Cannot Be Same As Old Password"});else{const t={old_password:this.password,new_password:this.newPassword};await Object(Cv["a"])(t).then((t=>{this.$q.notify({color:"green-5",textColor:"white",icon:"info",message:t.data.message}),dl["a"].logout(),this.$router.push({name:"Login"})})).catch((t=>{this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Error in Current Password"})}))}else this.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"Passwords Don't Match"})}}},wv=xv,kv=Object(p["a"])(wv,yv,qv,!1,null,null,null),Iv=kv.exports;kt()(kv,"components",{QCard:Ct["a"],QForm:Oa["a"],QInput:Et["a"],QIcon:ne["a"],QBtn:xt["a"]});const Sv=[{path:"/",component:()=>a.e(4).then(a.bind(null,"fd54")),name:"Login",meta:{checkLoggedIn:!0}},{path:"/currentorder",name:"CurrentOrder",meta:{requiresAuth:!0},component:yo},{path:"/mergepaymentinvoice",name:"MergeTablePayment",meta:{requiresAuth:!1},component:Wc},{path:"/editmergeorder",name:"EditMergeOrder",meta:{requiresAuth:!0},component:du},{path:"/paymentinvoice",name:"PaymentMenu",meta:{requiresAuth:!0},component:Qc},{path:"/",component:()=>Promise.all([a.e(0),a.e(2)]).then(a.bind(null,"713b")),children:[{path:"/dashboard",name:"Dashboard",meta:{requiresAuth:!0},component:Lt},{path:"/changepw",name:"ChangePassword",meta:{requiresAuth:!0},component:Iv},{path:"/foodmenu",name:"FoodMenu",meta:{requiresAuth:!0},component:ze},{path:"/beveragemenu",name:"BeverageMenu",meta:{requiresAuth:!0},component:_a},{path:"/combomenu",name:"ComboMenu",meta:{requiresAuth:!0},component:np},{path:"/addons",name:"Addons",meta:{requiresAuth:!0},component:Wd},{path:"/table",name:"Table",meta:{requiresAuth:!0},component:La},{path:"/recipe",name:"Recipe",meta:{requiresAuth:!0},component:fv},{path:"/customertab",name:"CustomerTab",meta:{requiresAuth:!0},component:bm},{path:"/restaurantsetting",name:"RestaurantSetting",meta:{requiresAuth:!0},component:Wp},{path:"/order",name:"Order",meta:{requiresAuth:!0},component:Si},{path:"/foodreports",name:"FoodReports",meta:{requiresAuth:!0},component:nd},{path:"/beveragereports",name:"BeverageReports",meta:{requiresAuth:!0},component:Wl},{path:"/complementaryreport",name:"ComplementaryReport",meta:{requiresAuth:!0},component:Cu},{path:"/refundreport",name:"RefundReport",meta:{requiresAuth:!0},component:Qu},{path:"/salesreports",name:"SalesReports",meta:{requiresAuth:!0},component:Nd},{path:"/wastereport",name:"WasteReport",meta:{requiresAuth:!0},component:Uh},{path:"/addonsreport",name:"AddonsReport",meta:{requiresAuth:!0},component:Qd},{path:"/inventoryitemreport",name:"InventoryItemReport",meta:{requiresAuth:!0},component:nc},{path:"/comboreport",name:"ComboReport",meta:{requiresAuth:!0},component:bp},{path:"/inventoryitems",name:"InventoryItems",meta:{requiresAuth:!0},component:zo},{path:"/inventory",name:"Inventory",meta:{requiresAuth:!0},component:el},{path:"/waste",name:"Waste",meta:{requiresAuth:!0},component:bh},{path:"/denomination",name:"Denomination",meta:{requiresAuth:!0},component:Bh},{path:"/vendor",name:"Vendor",meta:{requiresAuth:!0},component:rl},{path:"/registeremployee",name:"RegisterEmployee",meta:{requiresAuth:!0},component:bl},{path:"/todaysummary",name:"TodaySummaryReport",meta:{requiresAuth:!0},component:Zm}]},{path:"*",component:()=>a.e(3).then(a.bind(null,"e51e"))}];var Dv=Sv,Av=a("4503");s["a"].use(Av["a"]),s["a"].use(g["a"]);var Fv=function(){const t=new g["a"]({scrollBehavior:()=>({x:0,y:0}),routes:Dv,mode:"hash",base:""});return t.beforeEach(((t,e,a)=>t.meta.checkLoggedIn&&dl["a"].check()?a({name:"Dashboard"}):t.meta.requiresAuth&&!dl["a"].check()?a({name:"Login"}):a())),t},Tv=async function(){const t="function"===typeof b["b"]?await Object(b["b"])({Vue:s["a"]}):b["b"],e="function"===typeof Fv?await Fv({Vue:s["a"],store:t}):Fv;t.$router=e;const a={router:e,store:t,render:t=>t(v),el:"#q-app"};return{app:a,store:t,router:e}},Ov=({router:t,store:e,Vue:a})=>{sessionStorage.removeItem("wss_register");const s=Math.random().toString(36).substring(2);t.beforeEach(((t,e,a)=>{const n=sessionStorage.getItem("wss_register");if("true"!==n){let t=setInterval((()=>{$().then((({data:e})=>{Ja.send(JSON.stringify({type:"register",res_name:e.name,unique_id:s})),sessionStorage.setItem("res_name",e.name),sessionStorage.setItem("wss_register","true"),clearInterval(t)})).catch((()=>{clearInterval(t)}))}),1500)}a()}))};const $v="";async function Qv(){const{app:t,store:e,router:a}=await Tv();let n=!1;const i=t=>{n=!0;const e=Object(t)===t?a.resolve(t).route.fullPath:t;window.location.href=e},o=window.location.href.replace(window.location.origin,""),r=[Ja,Ov];for(let c=0;!1===n&&c<r.length;c++)if("function"===typeof r[c])try{await r[c]({app:t,router:a,store:e,Vue:s["a"],ssrContext:null,redirect:i,urlPath:o,publicPath:$v})}catch(l){return l&&l.url?void(window.location.href=l.url):void console.error("[Quasar] boot error:",l)}!0!==n&&new s["a"](t)}Qv()},"31cd":function(t,e,a){},"379e":function(t,e,a){"use strict";a.d(e,"b",(function(){return c})),a.d(e,"a",(function(){return d}));var s=a("f61f");const n=`${s["a"]}/api/v1/user/login/`,i=`${s["a"]}/api/v1/user/change/password/`;var o=a("bc3a"),r=a.n(o),l=(a("4360"),a("be3b"));function c(t){return r.a.post(n,t)}function d(t){return Object(l["a"])().put(i,t)}},"3de2":function(t,e,a){"use strict";a("accf")},"3f40":function(t,e,a){"use strict";a("c615")},4360:function(t,e,a){"use strict";a.d(e,"a",(function(){return g}));var s={};a.r(s),a.d(s,"user",(function(){return m}));var n={};a.r(n),a.d(n,"SET_USER_DATA",(function(){return u})),a.d(n,"SET_USER_TOKEN",(function(){return p}));var i={};a.r(i),a.d(i,"storetoken",(function(){return h})),a.d(i,"storeuser",(function(){return v}));var o=a("2b0e"),r=a("2f62"),l=a("0e44"),c=a("4503"),d=function(){return{user:{},auth:{}}};function m(t){return t.user}function u(t,e){let a=Object.assign({},e);t.user=a}function p(t,e){t.auth=e}function h({commit:t},e){t("SET_USER_TOKEN",e)}function v({commit:t},e){t("SET_USER_DATA",e)}var b={namespaced:!0,state:d,getters:s,mutations:n,actions:i};o["a"].use(c["a"]),o["a"].use(r["a"]);const g=new r["a"].Store({modules:{user:b},plugins:[Object(l["a"])()],strict:!1});e["b"]=function(){return g}},"4aaa":function(t,e,a){},"4ded":function(t,e,a){"use strict";a("2708")},7629:function(t,e,a){t.exports=a.p+"img/table.8d0cc329.png"},"80f8":function(t,e,a){"use strict";a("d3ab")},a558:function(t,e,a){"use strict";a("2938")},aa13:function(t,e,a){},accf:function(t,e,a){},b97e:function(t,e,a){},bce4:function(t,e,a){"use strict";a("4aaa")},be3b:function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var s=a("4360");function n(){const t=s["a"].state.user.auth.access;return t?{Authorization:"Bearer "+t}:{}}function i(){const t={};s["a"].dispatch("user/storetoken",t)}var o=a("f61f"),r=a("bc3a"),l=a.n(r),c=a("d1dd"),d=a("2a19");const m=l.a.create({baseURL:o["a"],headers:{common:n()}});function u(){const t=l.a.create({baseURL:o["a"],headers:{common:n()}});return t.interceptors.response.use((function(t){return t}),(function(t){if(402!==t.response.status){if(401===t.response.status){if(c["a"].postrefreshToken())return;i()}return Promise.reject(t)}d["a"].create({type:"negative",message:t.response.data.message})})),t}m.interceptors.response.use((function(t){return t}),(function(t){return 401===t.response.status&&i(),Promise.reject(t)}))},c615:function(t,e,a){},c73b:function(t,e,a){},cd8b:function(t,e,a){"use strict";a("1397")},d1dd:function(t,e,a){"use strict";var s=a("379e"),n=a("4360");class i{attempt(t){return Object(s["b"])(t).then((({data:t})=>(n["a"].dispatch("user/storetoken",t),this.getPayload(t.access)))).catch((t=>{const e={};return n["a"].dispatch("user/storetoken",e),Promise.reject(t)}))}getPayload(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(e){return null}}check(){const t=this.getPayload(n["a"].state.user.auth.access);return!(!t||!t.user_id)}logout(){const t={};n["a"].dispatch("user/storetoken",t)}}e["a"]=new i},d3ab:function(t,e,a){},d6b4:function(t,e,a){},d7c9:function(t,e,a){t.exports=a.p+"img/recipe.99618b85.png"},e20b:function(t,e,a){t.exports=a.p+"img/FoodMenu.bf41716d.jpg"},e601:function(t,e,a){"use strict";a("b97e")},e8eb:function(t,e,a){"use strict";a("1c67")},ea5a:function(t,e,a){"use strict";a("aa13")},eb3b:function(t,e,a){t.exports=a.p+"img/BeverageMenu.ec05078f.jpg"},f61f:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));const s="http://[2400:1a00:b012:5d8f:b3a8:d33e:6334:68d2]:8000"},faed:function(t,e,a){"use strict";a("1e5d")}});